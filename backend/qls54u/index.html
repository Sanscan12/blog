<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaWeb Servlet | 柏竹</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="https://image.bozhu12.cc/myblog/Essay/favicon.ico">
    <script language="javascript" type="text/javascript" src="/js/pgmanor-self.js"></script>
    <meta name="description" content="学习足迹 , 记录生活!">
    <meta name="Sasncan12" content="柏竹博客, 个人技术博客, 前后端端 , 技术文档">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#bd93f9">
    
    <link rel="preload" href="/assets/css/0.styles.eab9c879.css" as="style"><link rel="preload" href="/assets/js/app.a4f4c3d6.js" as="script"><link rel="preload" href="/assets/js/2.b26d2d6f.js" as="script"><link rel="preload" href="/assets/js/29.dc19960f.js" as="script"><link rel="prefetch" href="/assets/js/10.36796886.js"><link rel="prefetch" href="/assets/js/100.f522cc52.js"><link rel="prefetch" href="/assets/js/101.6df04d88.js"><link rel="prefetch" href="/assets/js/102.5d46ae32.js"><link rel="prefetch" href="/assets/js/103.c6d3d031.js"><link rel="prefetch" href="/assets/js/104.4ed7c111.js"><link rel="prefetch" href="/assets/js/105.95457a61.js"><link rel="prefetch" href="/assets/js/106.066f3cd9.js"><link rel="prefetch" href="/assets/js/107.9b0389fa.js"><link rel="prefetch" href="/assets/js/108.01c0a784.js"><link rel="prefetch" href="/assets/js/109.41b46823.js"><link rel="prefetch" href="/assets/js/11.95f8dafb.js"><link rel="prefetch" href="/assets/js/110.d4c6bd27.js"><link rel="prefetch" href="/assets/js/111.f4e4cb53.js"><link rel="prefetch" href="/assets/js/112.b554564d.js"><link rel="prefetch" href="/assets/js/113.46c5af4f.js"><link rel="prefetch" href="/assets/js/114.23b88f30.js"><link rel="prefetch" href="/assets/js/12.8d7bd029.js"><link rel="prefetch" href="/assets/js/13.94813285.js"><link rel="prefetch" href="/assets/js/14.7efd7ddb.js"><link rel="prefetch" href="/assets/js/15.ff3f086f.js"><link rel="prefetch" href="/assets/js/16.bf8a8e86.js"><link rel="prefetch" href="/assets/js/17.92a22e5a.js"><link rel="prefetch" href="/assets/js/18.7cc9709c.js"><link rel="prefetch" href="/assets/js/19.04e0ed6b.js"><link rel="prefetch" href="/assets/js/20.94fc0002.js"><link rel="prefetch" href="/assets/js/21.a9c5d5ca.js"><link rel="prefetch" href="/assets/js/22.42672388.js"><link rel="prefetch" href="/assets/js/23.d331c5a7.js"><link rel="prefetch" href="/assets/js/24.6bd3d5c3.js"><link rel="prefetch" href="/assets/js/25.48031560.js"><link rel="prefetch" href="/assets/js/26.468456c3.js"><link rel="prefetch" href="/assets/js/27.29e8a17f.js"><link rel="prefetch" href="/assets/js/28.7a4e006f.js"><link rel="prefetch" href="/assets/js/3.367f6c22.js"><link rel="prefetch" href="/assets/js/30.c7518ffa.js"><link rel="prefetch" href="/assets/js/31.6343cd24.js"><link rel="prefetch" href="/assets/js/32.91708d22.js"><link rel="prefetch" href="/assets/js/33.8bd40136.js"><link rel="prefetch" href="/assets/js/34.3284860c.js"><link rel="prefetch" href="/assets/js/35.371d75ef.js"><link rel="prefetch" href="/assets/js/36.ffd42ea4.js"><link rel="prefetch" href="/assets/js/37.5aff573e.js"><link rel="prefetch" href="/assets/js/38.2196733e.js"><link rel="prefetch" href="/assets/js/39.d825c6bb.js"><link rel="prefetch" href="/assets/js/4.5017c5ca.js"><link rel="prefetch" href="/assets/js/40.61fb895c.js"><link rel="prefetch" href="/assets/js/41.0615f8e5.js"><link rel="prefetch" href="/assets/js/42.a0d48c72.js"><link rel="prefetch" href="/assets/js/43.ec7ddd83.js"><link rel="prefetch" href="/assets/js/44.29204dcc.js"><link rel="prefetch" href="/assets/js/45.7172fc34.js"><link rel="prefetch" href="/assets/js/46.e647158b.js"><link rel="prefetch" href="/assets/js/47.6b6c6498.js"><link rel="prefetch" href="/assets/js/48.0500c9f5.js"><link rel="prefetch" href="/assets/js/49.8f5e7bba.js"><link rel="prefetch" href="/assets/js/5.9c242416.js"><link rel="prefetch" href="/assets/js/50.3c5d4fb3.js"><link rel="prefetch" href="/assets/js/51.d75b9780.js"><link rel="prefetch" href="/assets/js/52.68c8e058.js"><link rel="prefetch" href="/assets/js/53.5c132b96.js"><link rel="prefetch" href="/assets/js/54.47696045.js"><link rel="prefetch" href="/assets/js/55.ea67af8f.js"><link rel="prefetch" href="/assets/js/56.17fa9cba.js"><link rel="prefetch" href="/assets/js/57.a5e97d2a.js"><link rel="prefetch" href="/assets/js/58.1a3f6102.js"><link rel="prefetch" href="/assets/js/59.f65cbbcd.js"><link rel="prefetch" href="/assets/js/6.c9ec2389.js"><link rel="prefetch" href="/assets/js/60.4a3db590.js"><link rel="prefetch" href="/assets/js/61.bdb12a11.js"><link rel="prefetch" href="/assets/js/62.e2fcb173.js"><link rel="prefetch" href="/assets/js/63.371cd3e1.js"><link rel="prefetch" href="/assets/js/64.b6320764.js"><link rel="prefetch" href="/assets/js/65.1dc0a4fd.js"><link rel="prefetch" href="/assets/js/66.9ee44982.js"><link rel="prefetch" href="/assets/js/67.d19e34a7.js"><link rel="prefetch" href="/assets/js/68.6706d730.js"><link rel="prefetch" href="/assets/js/69.e7294bf3.js"><link rel="prefetch" href="/assets/js/7.66c4ded7.js"><link rel="prefetch" href="/assets/js/70.047fe6b2.js"><link rel="prefetch" href="/assets/js/71.9a7997e7.js"><link rel="prefetch" href="/assets/js/72.693f0e9b.js"><link rel="prefetch" href="/assets/js/73.aad94c77.js"><link rel="prefetch" href="/assets/js/74.dd54c292.js"><link rel="prefetch" href="/assets/js/75.a249d03d.js"><link rel="prefetch" href="/assets/js/76.0c08b78e.js"><link rel="prefetch" href="/assets/js/77.7fc5027f.js"><link rel="prefetch" href="/assets/js/78.f5815cec.js"><link rel="prefetch" href="/assets/js/79.ee059b4d.js"><link rel="prefetch" href="/assets/js/8.6a57f7df.js"><link rel="prefetch" href="/assets/js/80.e18c6842.js"><link rel="prefetch" href="/assets/js/81.edaefa79.js"><link rel="prefetch" href="/assets/js/82.f25a1886.js"><link rel="prefetch" href="/assets/js/83.3aca79c5.js"><link rel="prefetch" href="/assets/js/84.b6c01839.js"><link rel="prefetch" href="/assets/js/85.7ecaa40c.js"><link rel="prefetch" href="/assets/js/86.82453ceb.js"><link rel="prefetch" href="/assets/js/87.e35b68fe.js"><link rel="prefetch" href="/assets/js/88.4a082f88.js"><link rel="prefetch" href="/assets/js/89.d5a7fa37.js"><link rel="prefetch" href="/assets/js/9.21bb6026.js"><link rel="prefetch" href="/assets/js/90.1fadc12e.js"><link rel="prefetch" href="/assets/js/91.ef67a518.js"><link rel="prefetch" href="/assets/js/92.25e5b4d1.js"><link rel="prefetch" href="/assets/js/93.d35c3a72.js"><link rel="prefetch" href="/assets/js/94.866c0dc0.js"><link rel="prefetch" href="/assets/js/95.f5787960.js"><link rel="prefetch" href="/assets/js/96.1b7927c3.js"><link rel="prefetch" href="/assets/js/97.50068ab3.js"><link rel="prefetch" href="/assets/js/98.312c75e2.js"><link rel="prefetch" href="/assets/js/99.651591e4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.eab9c879.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://image.bozhu12.cc/myblog/Essay/hendImage01.jpg" alt="柏竹" class="logo"> <span class="site-name can-hide">柏竹</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/backend/" class="nav-link router-link-active">后端</a></div><div class="nav-item"><a href="/web/" class="nav-link">前端</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/other/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/Amway/" class="nav-link">应用推荐</a></li></ul></div></div><div class="nav-item"><a href="/say/say2023/#四月" class="nav-link">说说</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/friendLink/" class="nav-link">友链</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://image.bozhu12.cc/myblog/Essay/favicon.ico"> <div class="blogger-info"><h3>柏竹</h3> <span>奋斗柏竹</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/backend/" class="nav-link router-link-active">后端</a></div><div class="nav-item"><a href="/web/" class="nav-link">前端</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/other/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/Amway/" class="nav-link">应用推荐</a></li></ul></div></div><div class="nav-item"><a href="/say/say2023/#四月" class="nav-link">说说</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/friendLink/" class="nav-link">友链</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaWeb</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/backend/0y9sdx/" class="sidebar-link">Tomcat</a></li><li><a href="/backend/qls54u/" aria-current="page" class="active sidebar-link">JavaWeb Servlet</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/backend/qls54u/#servlet-api" class="sidebar-link">Servlet API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/backend/qls54u/#servlet-2" class="sidebar-link">Servlet</a></li><li class="sidebar-sub-header level3"><a href="/backend/qls54u/#genericservlet" class="sidebar-link">GenericServlet</a></li><li class="sidebar-sub-header level3"><a href="/backend/qls54u/#httpservlet" class="sidebar-link">HttpServlet</a></li><li class="sidebar-sub-header level3"><a href="/backend/qls54u/#servletcontext" class="sidebar-link">ServletContext</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/backend/qls54u/#servlet-应用" class="sidebar-link">Servlet 应用</a></li><li class="sidebar-sub-header level2"><a href="/backend/qls54u/#servlet-工作原理" class="sidebar-link">Servlet 工作原理</a></li><li class="sidebar-sub-header level2"><a href="/backend/qls54u/#servlet-生命周期" class="sidebar-link">Servlet 生命周期</a></li><li class="sidebar-sub-header level2"><a href="/backend/qls54u/#request-请求" class="sidebar-link">Request 请求</a></li><li class="sidebar-sub-header level2"><a href="/backend/qls54u/#response-响应" class="sidebar-link">Response 响应</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/backend/qls54u/#响应图片" class="sidebar-link">响应图片</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/backend/qls54u/#session-会话" class="sidebar-link">Session 会话</a></li><li class="sidebar-sub-header level2"><a href="/backend/qls54u/#servlet-初始化参数" class="sidebar-link">Servlet 初始化参数</a></li><li class="sidebar-sub-header level2"><a href="/backend/qls54u/#servlet-注解" class="sidebar-link">Servlet 注解</a></li><li class="sidebar-sub-header level2"><a href="/backend/qls54u/#servlet-下载" class="sidebar-link">Servlet 下载</a></li></ul></li><li><a href="/backend/nkcjdp/" class="sidebar-link">JSP</a></li><li><a href="/backend/0nybdh/" class="sidebar-link">过滤监听器</a></li><li><a href="/backend/tlfhkk/" class="sidebar-link">会话跟踪</a></li><li><a href="/backend/aud35w/" class="sidebar-link">MVC设计模式</a></li><li><a href="/backend/s9wrzy/" class="sidebar-link">Ajax</a></li><li><a href="/backend/d4tcq2/" class="sidebar-link">JSON</a></li><li><a href="/backend/r5xd4s/" class="sidebar-link">JspSmartUpload应用</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>拓展技术</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>框架技术</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringMVC</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringClound</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper bg-style-1"><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/backend/#后端" data-v-06225672>后端</a></li><li data-v-06225672><a href="/backend/#JavaWeb" data-v-06225672>JavaWeb</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="javascript:;" data-v-06225672>柏竹</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2020-02-18</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">JavaWeb Servlet<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="servlet"><a href="#servlet" class="header-anchor">#</a> Servlet</h1> <p>Servlet是在Web服务器运行的Java程序，主要负责与客户端数据交互，生成动态的Web内容。通常 通过HTTP 进行 接收 和 响应 来自客户端的请求！</p> <p><strong>工作步骤：</strong></p> <ol><li>服务器 启动Servlet</li> <li>客户端 发送请求 至 服务器</li> <li>服务器 调用Servlet，根据 客户端 请求内容 传给服务器</li> <li>服务器 响应返回 客户端</li></ol> <h2 id="servlet-api"><a href="#servlet-api" class="header-anchor">#</a> Servlet API</h2> <p><a href="http://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/package-summary.html" target="_blank" rel="noopener noreferrer">点击查看文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="servlet-2"><a href="#servlet-2" class="header-anchor">#</a> Servlet</h3> <blockquote><p><strong>implements Servlet</strong>
javax.servlet</p></blockquote> <p>用于 <strong>接收请求</strong> 与 <strong>响应请求</strong> ，服务器必须实现的方法</p> <table><thead><tr><th>返回</th> <th>抽象方法</th> <th>说明</th></tr></thead> <tbody><tr><td>void</td> <td>==init()==</td> <td>构造服务器</td></tr> <tr><td>void</td> <td>==service()==</td> <td>服务器 响应请求</td></tr> <tr><td>void</td> <td>==destroy()==</td> <td>移出 服务器 视为垃圾</td></tr> <tr><td>ServletConfig</td> <td>==getServletConfig()==</td> <td>获取 服务器对象</td></tr> <tr><td>String</td> <td>==getServletInfo()==</td> <td>获取 有关服务器的信息</td></tr></tbody></table> <h3 id="genericservlet"><a href="#genericservlet" class="header-anchor">#</a> GenericServlet</h3> <blockquote><p><strong>class abstract GenericServlet</strong>
javax.servlet</p></blockquote> <p><strong>GenericServlet类</strong> 实现 <strong>Servlet接口</strong>
用于Web的 HTTP Servlet 服务项</p> <table><thead><tr><th>返回</th> <th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td>Enumeration</td> <td>==getInitParameterNames()==</td> <td>获取 指定参数名的对象</td></tr> <tr><td>Enumeration</td> <td>==getServletName()==</td> <td>获取 服务名</td></tr> <tr><td>ServletContext</td> <td>==getServletContext()==</td> <td>获取 全局对象</td></tr></tbody></table> <h3 id="httpservlet"><a href="#httpservlet" class="header-anchor">#</a> HttpServlet</h3> <blockquote><p><strong>class abstract HttpServlet</strong>
javax.servlet.http</p></blockquote> <p><strong>HttpServlet</strong> 继承 <strong>GenericServlet类</strong>
处理 http请求数据</p> <table><thead><tr><th>返回</th> <th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td>void</td> <td>==doGet()==</td> <td>处理GET请求</td></tr> <tr><td>void</td> <td>==doPost()==</td> <td>处理POST请求</td></tr> <tr><td>void</td> <td>==doPut()==</td> <td>处理PUT请求</td></tr> <tr><td>···</td> <td>...</td> <td>...（更多自查文档）</td></tr></tbody></table> <h3 id="servletcontext"><a href="#servletcontext" class="header-anchor">#</a> ServletContext</h3> <blockquote><p><strong>implements ServletContext</strong></p> <p>javax.servlet Interface ServletContext</p></blockquote> <p><a href="http://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/ServletContext.html" target="_blank" rel="noopener noreferrer">点击对象方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>用于与其他 servlet容器 通信的方法</p> <p>获取方式在请求的方法体里</p> <ul><li>==this.getServletContext()==</li> <li>==HttpServletRequest.getServletContext()==</li></ul> <p><strong>存取值常用方法</strong></p> <table><thead><tr><th>返回</th> <th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td>void</td> <td><code>setAttribute(String key,Object value)</code></td> <td>向上下域 存键值</td></tr> <tr><td>Object</td> <td><code>getAttribute(String key)</code></td> <td>从上下域 取指定键的值</td></tr> <tr><td>void</td> <td><code>removeAttribute(String key)</code></td> <td>删除上下文 指定键的值</td></tr></tbody></table> <h2 id="servlet-应用"><a href="#servlet-应用" class="header-anchor">#</a> Servlet 应用</h2> <ol><li>在 <code>web</code> 创建 index.html ，模拟客户端请求发送</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>!!!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>No.1 Servlet应用<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>get请求测试<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post-test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="2"><li>创建实现Servlet类，继承 <code>HttpServlet类</code></li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    
    <span class="token comment">/*
    * HttpServletRequest：请求对象
    * HttpServletResponse：响应对象
    * */</span>
    
    <span class="token comment">//处理 get 请求</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req <span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;get-------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;req : &quot;</span> <span class="token operator">+</span> req<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;resp : &quot;</span> <span class="token operator">+</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">//处理 post 请求</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req <span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;post-------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;req : &quot;</span> <span class="token operator">+</span> req<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;resp : &quot;</span> <span class="token operator">+</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>在 <code>../web/WEB-INF/web.xml</code> 文档配置映射关系
在 <code>&lt;web-app&gt;</code> 添加映射关系</li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- ⾃定义名称 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>No1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 
	处理请求的类的完整路径
	LoginServlet类在src根路径里
	 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>LoginServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- mapping 表示映射 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- ⾃定义名称 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>No1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 请求名 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>标签执行顺序：</p> <ol><li>客户端 请求</li> <li>进入 web.xml 匹配数据</li> <li><code>&lt;servlet-mapping&gt;</code> 里的 <code>&lt;url-pattern&gt;</code> 标签 <strong>内容</strong> 与 <strong>请求名</strong> 进行匹配</li> <li>匹配成功后 进行以下匹配 （映射标签）
<code>&lt;servlet-mapping&gt;</code> 里的 <code>&lt;servlet-name&gt;</code> 标签 <strong>内容</strong> 与
<code>&lt;servlet&gt;</code> 里的 <code>&lt;servlet-name&gt;</code> 标签 <strong>内容</strong></li> <li>匹配成功后 进行以下匹配 （处理类路径）
<code>&lt;servlet&gt;</code> 里的 <code>&lt;servlet-class&gt;</code> 标签 <strong>内容</strong> 与 <strong>src内的路径匹配</strong></li></ol></blockquote> <ol start="4"><li>启动，打开 地址： （以下两个测试）
http://localhost:8080/工程名/访问服务器的路径
http://localhost:8080</li></ol> <h2 id="servlet-工作原理"><a href="#servlet-工作原理" class="header-anchor">#</a> Servlet 工作原理</h2> <ol><li>Servlet容器 将Servlet类载入内存 ， 实例调用它具体方法。一个Web应用一个Servlet</li> <li>调用Servlet的Service()方法 <code>ServletRequest对象</code> (请求对象) 和 <code>ServletResponse对象</code> (响应对象) 都是由 <code>Servlet容器</code> 封装好的，直接调用即可</li> <li>每个Servlet都有一个封装Servlet配置的 <code>ServletConfig对象</code></li></ol> <h2 id="servlet-生命周期"><a href="#servlet-生命周期" class="header-anchor">#</a> Servlet 生命周期</h2> <p><img src="http://sanscan12.gitee.io/blogimg/Content/JavaWeb/15.png" alt=""></p> <ol><li>实例化（使用构造方法创建对象）</li> <li>初始化 init()方法</li> <li>服务 service()方法</li> <li>销毁 destroy()方法</li></ol> <p><strong>init方法</strong> 将会主要完成以下工作：</p> <ol><li>创建用于解析 xml 配置文件的 contextDigester 对象</li> <li>读取默认 context.xml 配置文件，如果存在解析它</li> <li>读取默认 Host 配置文件，如果存在解析它</li> <li>读取默认 Context 自身的配置文件，如果存在解析它</li> <li>设置 Context 的 DocBase</li></ol> <p><strong>注意：</strong></p> <ol><li>当客户端发送请求，如果 存在servlet对象无需创建，否则新建servlet对象</li> <li>第二次请求时，会判断对象是否存在，但不会执执行init()方法，而直接执行service()方法</li> <li>相应的请求方式，会对应 service方法里的处理方式</li></ol> <h2 id="request-请求"><a href="#request-请求" class="header-anchor">#</a> Request 请求</h2> <p>HttpServletRequest表示Http环境中的Servlet请求。（扩展了ServletRequest接口）</p> <p><a href="http://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/ServletRequest.html" target="_blank" rel="noopener noreferrer">点击更多Servlet请求方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <table><thead><tr><th>返回</th> <th>常用方法</th> <th>说明</th></tr></thead> <tbody><tr><td>String</td> <td>==getParameter(String  name)==</td> <td>获取 表单指定名称 组件的值</td></tr> <tr><td>String[]</td> <td>==getParameterValues(String name)==</td> <td>获取 表单指定名称 组件的多个值</td></tr> <tr><td>void</td> <td>==setCharacterEncoding(String env)==</td> <td>设置 请求的编码类型（针对Post请求）</td></tr> <tr><td>RequestDispatcher</td> <td>==getRequestDispatcher(String url)==</td> <td>跳转 指定页面路径</td></tr> <tr><td>void</td> <td>==setAttribute(String key , String value)==</td> <td>存储请求属性</td></tr> <tr><td>Object</td> <td>==getAttribute(String key)==</td> <td>获取 指定属性的返回值</td></tr> <tr><td>String</td> <td>==getRequestURI()==</td> <td>获取 url</td></tr></tbody></table> <p><strong>请求方式：</strong></p> <blockquote><ul><li><p>通过表单 get/post 提交</p></li> <li><p>通过 a标签 发送数据</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>提交名?key1=value&amp;key2=vlaue..<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/test?name=sans&amp;age=12<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>通过地址栏直接拼接-get请求</p></li> <li><p>js提交数据-get请求</p></li></ul></blockquote> <p><strong>乱码处理：</strong></p> <blockquote><ul><li><p>post请求转编码 setCharacterEncoding(&quot;UTF-8&quot;);</p></li> <li><p>get请求 转编码 （方法1）</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//针对于get提交时中⽂乱码</span>
<span class="token class-name">String</span> s<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>变量名<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">&quot;ISO-8859-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> s<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">&quot;ISO-8859-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;GBK&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>get请求 转编码 （方法2）
在Tomcat目录 <code>/conf/server.xml</code> 设置字符集</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Connector</span> <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>8080<span class="token punctuation">&quot;</span></span> <span class="token attr-name">protocol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>HTTP/1.1<span class="token punctuation">&quot;</span></span> 
 <span class="token attr-name">connectionTimeout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20000<span class="token punctuation">&quot;</span></span>
 <span class="token attr-name">redirectPort</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>8443<span class="token punctuation">&quot;</span></span> <span class="token attr-name">URIEncoding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div></li></ul></blockquote> <p><strong>get和post区别：</strong></p> <blockquote><p><strong>get请求：</strong> 该请求会附加在URL之后，从 <code>?</code> 开始以 <code>&amp;</code> 分割变量和属性。url采用的是ASCLL编码。</p> <p><strong>post请求：</strong> 该请求数据置放在HTTP请求包的包体中进行传输数据。</p> <p><strong>数据传输大小</strong>
get会受到url的长度限制，而post不会</p> <p><strong>安全性</strong>
提交/进入 时，get会在url后面显示，而post不会</p></blockquote> <p><strong>实例：</strong></p> <p><strong>html页面</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>!!!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>requestTest?click=true&amp;summary=用户点击了超链接<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>超链接测试<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>requestTest<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        uname:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
        upassword:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userpassword<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
        sex:
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radio<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>man<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>男
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radio<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>woman<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>女
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
        hobby:
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hobby<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>basketball<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>篮球
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hobby<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>football<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>足球
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hobby<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tennis<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>网球
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>Java获取</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRequestTest</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req <span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Get=========&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;超链接点击了？&quot;</span><span class="token operator">+</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;摘要：&quot;</span><span class="token operator">+</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;summary&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req <span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Post=========&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//解决乱码</span>
        req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token class-name">String</span> name <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> password <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;userpassword&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> sex <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;sex&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> hobbys <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameterValues</span><span class="token punctuation">(</span><span class="token string">&quot;hobby&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;UserName：&quot;</span><span class="token operator">+</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;UserPassword：&quot;</span><span class="token operator">+</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;sex：&quot;</span><span class="token operator">+</span> sex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>hobbys <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">||</span> hobbys<span class="token punctuation">.</span>length <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;hobby：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> tmp <span class="token operator">:</span> hobbys<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        
        <span class="token comment">//存值</span>
        req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;userpassword&quot;</span><span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//取值</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;取值测试：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//跳转页面 (提交跳转的页面 在web文件夹下subTest.html)</span>
        req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">&quot;/subTest.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="response-响应"><a href="#response-响应" class="header-anchor">#</a> Response 响应</h2> <p>HttpServletResponse 表示 Servlet响应，继承了ServletResponse接口，专门用来封装HTTP响应消息。</p> <p><a href="http://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/http/HttpServletResponse.html" target="_blank" rel="noopener noreferrer">点击更多Servlet响应方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <table><thead><tr><th>返回</th> <th>常用方法</th> <th>说明</th></tr></thead> <tbody><tr><td>void</td> <td>==addCookie(Cookie cookie)==</td> <td>指定 cookie添加到响应中</td></tr> <tr><td>void</td> <td>==sendRedirect(String location)==</td> <td>指定 重定向URL位置（页面跳转）</td></tr> <tr><td>PrintWriter</td> <td>==getWriter()==</td> <td>获取 可以给前端输出的字符流对象</td></tr> <tr><td>void</td> <td>==setContentType(String type)==</td> <td>设置 响应的内容类型</td></tr></tbody></table> <p><strong>重定向与转发的区别</strong></p> <blockquote><ul><li><strong>重定向</strong> 会改变地址，requset存储的数据会丢失
<strong>转发</strong> 时地址会显示请求页面的地址，保存了页面的数据</li> <li><strong>重定向</strong> 两次请求 两次响应；<strong>转发</strong> 一次请求 一次响应</li> <li>js 跳转页面，也会丢失 requset存储的数据</li></ul></blockquote> <p><img src="http://sanscan12.gitee.io/blogimg/Content/JavaWeb/16.png" alt=""></p> <h3 id="响应图片"><a href="#响应图片" class="header-anchor">#</a> 响应图片</h3> <p>以流的形式响应图片</p> <p><strong>实现方案：</strong></p> <ol><li>使用FileChannel的方法</li> <li>使用普通的io，fileinputstream-&gt;byte[]-&gt;response.outputstream</li> <li>使用ImageIO的read和write方法实现</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 方式1</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req <span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\Users\\admin\\Desktop\\ceshi.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">FileInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;image/png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fis<span class="token punctuation">.</span><span class="token function">getChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
            <span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>fis<span class="token punctuation">.</span><span class="token function">available</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token class-name">Channels</span><span class="token punctuation">.</span><span class="token function">newChannel</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 方式2</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req <span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\Users\\admin\\Desktop\\ceshi.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span><span class="token punctuation">(</span><span class="token class-name">FileInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;image/png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span>fis<span class="token punctuation">.</span><span class="token function">available</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        fis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 方式3</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req <span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\Users\\admin\\Desktop\\ceshi.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">BufferedImage</span> image <span class="token operator">=</span> <span class="token class-name">ImageIO</span><span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;image/png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">OutputStream</span> os <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ImageIO</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token string">&quot;png&quot;</span><span class="token punctuation">,</span> os<span class="token punctuation">)</span><span class="token punctuation">;</span>
        os<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        os<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="session-会话"><a href="#session-会话" class="header-anchor">#</a> Session 会话</h2> <p>session是服务器端使用的一种记录客户端状态的机制。（是ServletRequest的扩展）
sessinon可有多个页面、多个request(请求)，重定向也不会丢失数据。
当浏览器访问Web服务器时，Servlet容器就会创建一个Session对象和ID属性，当客户端后续访问服务器时，只要将ID标识号传递给服务器，服务器就能判断该请求是哪个客户端发送的，从而选择与之对应的Session对象为其服务。</p> <p><a href="http://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/ServletRequest.html" target="_blank" rel="noopener noreferrer">更多ServletRequest方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="http://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/http/HttpServletRequest.html" target="_blank" rel="noopener noreferrer">更多HttpServletRequest方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="http://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/http/HttpSession.html" target="_blank" rel="noopener noreferrer">更多HttpSession方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <table><thead><tr><th>返回</th> <th>常用方法</th> <th>说明</th></tr></thead> <tbody><tr><td>HttpSession</td> <td>==getSession()==</td> <td>获取 请求的Session对象</td></tr> <tr><td>void</td> <td>==setAttribute(String key , Object value)==</td> <td>以key/value存储属性值</td></tr> <tr><td>Object</td> <td>==getAttribute(String key)==</td> <td>获取 指定key的属性值，没有则null</td></tr> <tr><td>void</td> <td>==invalidate()==</td> <td>设置 session 无效，取消任何会话的对象</td></tr> <tr><td>String</td> <td>==getid()==</td> <td>获取 当前 会话ID标识号</td></tr> <tr><td>void</td> <td>==setMaxInactiveInterval(int interval)==</td> <td>设置 会话有效时长 ，超出时长则无效会话(单位：秒)</td></tr> <tr><td>void</td> <td>==removeAttribute(String key)==</td> <td>从此会话 删除 指定key的值(置为null)</td></tr></tbody></table> <p><strong>会话有效时长：</strong></p> <blockquote><ol><li><p>setMaxInactiveInterval(int second) //指定秒数有效</p></li> <li><p>编辑 <code>web.xml</code></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-config</span><span class="token punctuation">&gt;</span></span>
 	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-timeout</span><span class="token punctuation">&gt;</span></span>10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-timeout</span><span class="token punctuation">&gt;</span></span>//单位:分钟
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-config</span><span class="token punctuation">&gt;</span></span> 
</code></pre></div></li></ol></blockquote> <p><strong>session失效方式：</strong></p> <blockquote><ol><li>invalidate()</li> <li>removeAttribute(&quot;key&quot;);</li> <li>直接关闭浏览器</li></ol></blockquote> <h2 id="servlet-初始化参数"><a href="#servlet-初始化参数" class="header-anchor">#</a> Servlet 初始化参数</h2> <p>在 <code>web.xml</code> 中配置 Servlet 时，可以配置初始化参数
Servlet可通过 <code>ServletConfig接口</code> 提供的方法来获取这些参数</p> <p><strong>servlet局部参数配置</strong></p> <p>在 <code>web.xml</code> 中对应的 servlet 添加 <code>init-param属性</code>（获取参数仅限于配置的servlet）</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>key<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>value<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>servlet全局部参数配置</strong></p> <p>在 <code>web.xml</code> 中添加 <code>context-param属性</code> （全部servlet都可获取）</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>key<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>value<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>获取数据</strong></p> <ol><li><p>请求 -&gt; <strong>init()</strong> -&gt; ...
servlet中 重写init()方法，通过以下代码获取 （全局和局部获取方式不一样）</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">ServletConfig</span> config<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
    <span class="token comment">//匹配指定name 获取 对应的值</span>
    <span class="token comment">//局部</span>
    <span class="token class-name">String</span> vlaue <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//全局</span>
    <span class="token class-name">String</span> vlaue2 <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token string">&quot;allKey&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>请求 -&gt; init() -&gt; servlet() -&gt; <strong>doGet()/doPost()</strong> -&gt; ...</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//超链接响应获取</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req <span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">//局部</span>
    <span class="token class-name">String</span> vlaue <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//全局</span>
    <span class="token class-name">String</span> vlaue2 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token string">&quot;allKey&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> vlaue3 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token string">&quot;allKey&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <p><strong>注意：</strong> 不同的获取方式不能共存！！！</p> <h2 id="servlet-注解"><a href="#servlet-注解" class="header-anchor">#</a> Servlet 注解</h2> <p>注解 提供的信息，让开发更便捷易懂</p> <table><thead><tr><th>属性</th> <th>类型</th> <th>必须</th> <th>说明</th></tr></thead> <tbody><tr><td>asyncSupported</td> <td>boolean</td> <td>F</td> <td>Servlet是否支持异步操作</td></tr> <tr><td>displayName</td> <td>String</td> <td>F</td> <td>Servlet显示名称</td></tr> <tr><td>initParams</td> <td>webInitParam[]</td> <td>F</td> <td>配置初始化参数</td></tr> <tr><td>loadOnStartup</td> <td>int</td> <td>F</td> <td>Servlet 的优先级 加载(越小越早)</td></tr> <tr><td>name</td> <td>String</td> <td>F</td> <td>指定Servlet名称</td></tr> <tr><td>urlPatterns/value</td> <td>String[]</td> <td>T</td> <td>两个属性作用相同，指定处理的url</td></tr></tbody></table> <p><strong>urlPatterns匹配说明</strong></p> <blockquote><p><strong>完全匹配</strong> <code>/test/userList.action</code> 匹配绝对路径的请求</p> <p><strong>路径匹配</strong> <code>/test/*</code> 匹配test路径下的所有请求</p> <p><strong>扩展名匹配</strong> <code>*.action</code> 匹配后缀为action 结尾的请求</p></blockquote> <p><strong>注意：</strong></p> <blockquote><ul><li>如果当前Servlet注解了就无需再配置 <code>web.xml</code></li> <li>name若不指定值，则默认以类名为name</li> <li>urlPatterns路径分割不需有斜杠 <code>/</code></li> <li>urlPatterns可映射多个路径</li></ul></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>
        name <span class="token operator">=</span> <span class="token string">&quot;No.6&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">//完全路径；全局路径匹配；扩展名匹配</span>
        <span class="token comment">//   /test/no1/index.css</span>
        <span class="token comment">//   /test/*    ;   /test/no1/*</span>
        <span class="token comment">//   *.css</span>
        
        urlPatterns <span class="token operator">=</span> <span class="token string">&quot;/test/no1/*&quot;</span><span class="token punctuation">,</span>
        initParams <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token annotation punctuation">@WebInitParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        loadOnStartup <span class="token operator">=</span> <span class="token number">1</span>
<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AnnotationTest</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    ···
<span class="token punctuation">}</span>
</code></pre></div><h2 id="servlet-下载"><a href="#servlet-下载" class="header-anchor">#</a> Servlet 下载</h2> <p>如果用户需要通过 链接进行下载，可通过得到的请求进行响应输出，从而达到下载的效果</p> <p><strong>大致步骤：</strong></p> <ol><li>通过 在请求中的属性 获取指定下载的文件名</li> <li>获取 项目的下载虚拟路径
==ServletContext.getRealPath(&lt;web根目录开始找下载文件夹路径&gt;)==</li> <li>获取文件输入流 （拼接获取指定的文件流   （filename步骤1获取的属性值）
==new FileInputStream(path + filename);==</li> <li>设置文件名解决汉字不能 。一定要用 <code>iso8859-1</code> 编码集（用于响应头拼接
==new String(filename.getBytes(),&quot;iso8859-1&quot;);==</li> <li>设置响应头
==resp.setHeader(&quot;content-disposition&quot;,&quot;attachment;filename=&quot;+filename);==</li> <li>获取 响应输出流</li> <li>读写输出至浏览器</li> <li>关闭 输入、输出 流</li></ol> <p><strong>示例：</strong></p> <blockquote><p>下载的文件夹在根目录中的 <code>files</code> 文件夹 里</p></blockquote> <p><strong>html</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>超链接下载方式<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>files/file.txt<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>文本文件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>files/file.jpg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>图片文件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>files/file.zip<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>压缩文件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>手动编码下载方式<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/download?fileName=file.txt<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>文本文件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/download?fileName=file.jpg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>图片文件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/download?fileName=file.zip<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>压缩文件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>java</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@WebSevlet</span><span class="token punctuation">(</span><span class="token string">&quot;/download/*&quot;</span><span class="token punctuation">)</span>

<span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req <span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    
    <span class="token class-name">String</span> filename <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;fileName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> path <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">&quot;/files/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token class-name">InputStream</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>path <span class="token operator">+</span> filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 对汉字进行编码（因 浏览器会 识别 iso8859-1</span>
    filename <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>filename<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;iso8859-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 设置响应头</span>
    resp<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;content-disposition&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;attachment;filename=&quot;</span><span class="token operator">+</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">OutputStream</span> out <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>bs<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>bs<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    in<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div></div>  <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=Jsp" title="标签">#Jsp</a><a href="/tags/?tag=servlet" title="标签">#servlet</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/03/12, 00:43:49</span></div></div> <div class="page-nav-wapper"><!----> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/backend/0y9sdx/" class="prev">Tomcat</a></span> <span class="next"><a href="/backend/nkcjdp/">JSP</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/other/exa9a2/"><div>
            OpenResty
            <!----></div></a> <span class="date">04-03</span></dt></dl><dl><dd>02</dd> <dt><a href="/other/asxx12/"><div>
            Lua应用
            <!----></div></a> <span class="date">04-03</span></dt></dl><dl><dd>03</dd> <dt><a href="/other/newbing/"><div>
            无魔法newbing
            <!----></div></a> <span class="date">03-27</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="Sanscan12" title="联系" target="_blank" class="iconfont icon-weixin"></a><a href="https://github.com/Sasncan12" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/user/home?id=448156561" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2023
    <span> | <a href="https://beian.miit.gov.cn/">桂ICP备2022009417号-1</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.a4f4c3d6.js" defer></script><script src="/assets/js/2.b26d2d6f.js" defer></script><script src="/assets/js/29.dc19960f.js" defer></script>
  </body>
</html>
