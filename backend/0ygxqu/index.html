<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JDBC | 柏竹</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="https://image.bozhu12.cc/myblog/Essay/favicon.ico">
    <script language="javascript" type="text/javascript" src="/js/pgmanor-self.js"></script>
    <meta name="description" content="学习足迹 , 记录生活!">
    <meta name="Sasncan12" content="柏竹博客, 个人技术博客, 前后端端 , 技术文档">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#bd93f9">
    
    <link rel="preload" href="/assets/css/0.styles.b41e82d5.css" as="style"><link rel="preload" href="/assets/js/app.868d2b2a.js" as="script"><link rel="preload" href="/assets/js/2.b26d2d6f.js" as="script"><link rel="preload" href="/assets/js/56.52f80c93.js" as="script"><link rel="prefetch" href="/assets/js/10.9835140b.js"><link rel="prefetch" href="/assets/js/100.dcba8fa8.js"><link rel="prefetch" href="/assets/js/101.314dcf65.js"><link rel="prefetch" href="/assets/js/102.e7f0336c.js"><link rel="prefetch" href="/assets/js/103.c2f49346.js"><link rel="prefetch" href="/assets/js/104.f707a4af.js"><link rel="prefetch" href="/assets/js/105.45fb9dcd.js"><link rel="prefetch" href="/assets/js/106.b66a400b.js"><link rel="prefetch" href="/assets/js/107.eb1b6083.js"><link rel="prefetch" href="/assets/js/108.fd9c37f3.js"><link rel="prefetch" href="/assets/js/109.a79f69d5.js"><link rel="prefetch" href="/assets/js/11.95f8dafb.js"><link rel="prefetch" href="/assets/js/110.88eeca9d.js"><link rel="prefetch" href="/assets/js/111.bb163e50.js"><link rel="prefetch" href="/assets/js/112.a0f2d04d.js"><link rel="prefetch" href="/assets/js/113.c0aa96e1.js"><link rel="prefetch" href="/assets/js/114.18d14ce2.js"><link rel="prefetch" href="/assets/js/115.77cf8086.js"><link rel="prefetch" href="/assets/js/116.ea226ae1.js"><link rel="prefetch" href="/assets/js/117.b7efacb3.js"><link rel="prefetch" href="/assets/js/118.412111ae.js"><link rel="prefetch" href="/assets/js/119.84832933.js"><link rel="prefetch" href="/assets/js/12.8d7bd029.js"><link rel="prefetch" href="/assets/js/120.1ef4233d.js"><link rel="prefetch" href="/assets/js/121.3acaee9d.js"><link rel="prefetch" href="/assets/js/122.d1ce8218.js"><link rel="prefetch" href="/assets/js/123.c5f4d6be.js"><link rel="prefetch" href="/assets/js/124.449d5ada.js"><link rel="prefetch" href="/assets/js/125.4f58bc85.js"><link rel="prefetch" href="/assets/js/126.c0e65c1d.js"><link rel="prefetch" href="/assets/js/127.443b34f5.js"><link rel="prefetch" href="/assets/js/128.78d6afc8.js"><link rel="prefetch" href="/assets/js/129.317283b8.js"><link rel="prefetch" href="/assets/js/13.ff3bdc87.js"><link rel="prefetch" href="/assets/js/130.7c71f59a.js"><link rel="prefetch" href="/assets/js/14.7e6d262f.js"><link rel="prefetch" href="/assets/js/15.3ebd1a95.js"><link rel="prefetch" href="/assets/js/16.c2cd40e1.js"><link rel="prefetch" href="/assets/js/17.687de162.js"><link rel="prefetch" href="/assets/js/18.10172e49.js"><link rel="prefetch" href="/assets/js/19.6366e55e.js"><link rel="prefetch" href="/assets/js/20.659a362d.js"><link rel="prefetch" href="/assets/js/21.8bb371df.js"><link rel="prefetch" href="/assets/js/22.55156cea.js"><link rel="prefetch" href="/assets/js/23.bc601a3a.js"><link rel="prefetch" href="/assets/js/24.66cb07c5.js"><link rel="prefetch" href="/assets/js/25.65e92ad2.js"><link rel="prefetch" href="/assets/js/26.91e496c6.js"><link rel="prefetch" href="/assets/js/27.3cbd695a.js"><link rel="prefetch" href="/assets/js/28.8d873306.js"><link rel="prefetch" href="/assets/js/29.f5506360.js"><link rel="prefetch" href="/assets/js/3.e5f0e56f.js"><link rel="prefetch" href="/assets/js/30.5fecd315.js"><link rel="prefetch" href="/assets/js/31.4e81dcd5.js"><link rel="prefetch" href="/assets/js/32.6ea862c0.js"><link rel="prefetch" href="/assets/js/33.7a2226f1.js"><link rel="prefetch" href="/assets/js/34.42421005.js"><link rel="prefetch" href="/assets/js/35.ee91ee76.js"><link rel="prefetch" href="/assets/js/36.47833f09.js"><link rel="prefetch" href="/assets/js/37.6d65f5e8.js"><link rel="prefetch" href="/assets/js/38.c948d014.js"><link rel="prefetch" href="/assets/js/39.07b53ec9.js"><link rel="prefetch" href="/assets/js/4.5017c5ca.js"><link rel="prefetch" href="/assets/js/40.61fb895c.js"><link rel="prefetch" href="/assets/js/41.11ef63c0.js"><link rel="prefetch" href="/assets/js/42.826fc880.js"><link rel="prefetch" href="/assets/js/43.e21776c9.js"><link rel="prefetch" href="/assets/js/44.255279ff.js"><link rel="prefetch" href="/assets/js/45.ef371806.js"><link rel="prefetch" href="/assets/js/46.607be86f.js"><link rel="prefetch" href="/assets/js/47.7b16d355.js"><link rel="prefetch" href="/assets/js/48.0d02e0dd.js"><link rel="prefetch" href="/assets/js/49.98e8b139.js"><link rel="prefetch" href="/assets/js/5.9c242416.js"><link rel="prefetch" href="/assets/js/50.b5ef4880.js"><link rel="prefetch" href="/assets/js/51.33ecfccb.js"><link rel="prefetch" href="/assets/js/52.312c0c25.js"><link rel="prefetch" href="/assets/js/53.b08c6bb3.js"><link rel="prefetch" href="/assets/js/54.1428e09b.js"><link rel="prefetch" href="/assets/js/55.42d99966.js"><link rel="prefetch" href="/assets/js/57.d09223fc.js"><link rel="prefetch" href="/assets/js/58.d143c73b.js"><link rel="prefetch" href="/assets/js/59.3a3ba409.js"><link rel="prefetch" href="/assets/js/6.20f6982a.js"><link rel="prefetch" href="/assets/js/60.d24f2249.js"><link rel="prefetch" href="/assets/js/61.abeabf2b.js"><link rel="prefetch" href="/assets/js/62.7bb27154.js"><link rel="prefetch" href="/assets/js/63.b9bb2eb2.js"><link rel="prefetch" href="/assets/js/64.b6adffd9.js"><link rel="prefetch" href="/assets/js/65.7091eed7.js"><link rel="prefetch" href="/assets/js/66.0532446c.js"><link rel="prefetch" href="/assets/js/67.fa9fe998.js"><link rel="prefetch" href="/assets/js/68.d4e5fc39.js"><link rel="prefetch" href="/assets/js/69.31c44f21.js"><link rel="prefetch" href="/assets/js/7.c22f1339.js"><link rel="prefetch" href="/assets/js/70.383fc4e0.js"><link rel="prefetch" href="/assets/js/71.08a725ff.js"><link rel="prefetch" href="/assets/js/72.d1402eb1.js"><link rel="prefetch" href="/assets/js/73.c79551a8.js"><link rel="prefetch" href="/assets/js/74.66cc5d6d.js"><link rel="prefetch" href="/assets/js/75.64e05663.js"><link rel="prefetch" href="/assets/js/76.14e8409d.js"><link rel="prefetch" href="/assets/js/77.14006f72.js"><link rel="prefetch" href="/assets/js/78.3473bf85.js"><link rel="prefetch" href="/assets/js/79.5430f58c.js"><link rel="prefetch" href="/assets/js/8.a8e2447d.js"><link rel="prefetch" href="/assets/js/80.ff413c18.js"><link rel="prefetch" href="/assets/js/81.7bb0b123.js"><link rel="prefetch" href="/assets/js/82.90e93971.js"><link rel="prefetch" href="/assets/js/83.ee24e324.js"><link rel="prefetch" href="/assets/js/84.937f5f34.js"><link rel="prefetch" href="/assets/js/85.7f98aaeb.js"><link rel="prefetch" href="/assets/js/86.4c55855c.js"><link rel="prefetch" href="/assets/js/87.c4eb45e9.js"><link rel="prefetch" href="/assets/js/88.640495f9.js"><link rel="prefetch" href="/assets/js/89.3372a870.js"><link rel="prefetch" href="/assets/js/9.674ab0b1.js"><link rel="prefetch" href="/assets/js/90.cfc27473.js"><link rel="prefetch" href="/assets/js/91.93b2178d.js"><link rel="prefetch" href="/assets/js/92.0194aab3.js"><link rel="prefetch" href="/assets/js/93.346d631a.js"><link rel="prefetch" href="/assets/js/94.d9e7346f.js"><link rel="prefetch" href="/assets/js/95.83829aa6.js"><link rel="prefetch" href="/assets/js/96.b0eb6641.js"><link rel="prefetch" href="/assets/js/97.35d86169.js"><link rel="prefetch" href="/assets/js/98.cf5cd95a.js"><link rel="prefetch" href="/assets/js/99.1bb98724.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b41e82d5.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://image.bozhu12.cc/myblog/Essay/hendImage01.jpg" alt="柏竹" class="logo"> <span class="site-name can-hide">柏竹</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/backend/" class="nav-link router-link-active">后端</a></div><div class="nav-item"><a href="/web/" class="nav-link">前端</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/other/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/Amway/" class="nav-link">应用推荐</a></li><li class="dropdown-item"><!----> <a href="/say/say2023/" class="nav-link">说说</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/friendLink/" class="nav-link">友链</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://image.bozhu12.cc/myblog/Essay/favicon.ico"> <div class="blogger-info"><h3>柏竹</h3> <span>奋斗柏竹</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/backend/" class="nav-link router-link-active">后端</a></div><div class="nav-item"><a href="/web/" class="nav-link">前端</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/other/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/Amway/" class="nav-link">应用推荐</a></li><li class="dropdown-item"><!----> <a href="/say/say2023/" class="nav-link">说说</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/friendLink/" class="nav-link">友链</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaWeb</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>拓展技术</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>框架技术</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>数据库</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/backend/621sa1/" class="sidebar-link">MySQL</a></li><li><a href="/backend/0ygxqu/" aria-current="page" class="active sidebar-link">JDBC</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/backend/0ygxqu/#体系构架" class="sidebar-link">体系构架</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/backend/0ygxqu/#体系结构" class="sidebar-link">体系结构</a></li><li class="sidebar-sub-header level3"><a href="/backend/0ygxqu/#组件" class="sidebar-link">组件</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/backend/0ygxqu/#首次应用" class="sidebar-link">首次应用</a></li><li class="sidebar-sub-header level2"><a href="/backend/0ygxqu/#api" class="sidebar-link">API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/backend/0ygxqu/#connection" class="sidebar-link">Connection</a></li><li class="sidebar-sub-header level3"><a href="/backend/0ygxqu/#resultset" class="sidebar-link">ResultSet</a></li><li class="sidebar-sub-header level3"><a href="/backend/0ygxqu/#resultsetmetadata" class="sidebar-link">ResultSetMetaData</a></li><li class="sidebar-sub-header level3"><a href="/backend/0ygxqu/#statement" class="sidebar-link">Statement</a></li><li class="sidebar-sub-header level3"><a href="/backend/0ygxqu/#preparestatement" class="sidebar-link">PrepareStatement</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/backend/0ygxqu/#多表关系" class="sidebar-link">多表关系</a></li><li class="sidebar-sub-header level2"><a href="/backend/0ygxqu/#事务应用" class="sidebar-link">事务应用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/backend/0ygxqu/#savepoints-事务存档" class="sidebar-link">Savepoints(事务存档)</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/backend/0ygxqu/#批量处理" class="sidebar-link">批量处理</a></li><li class="sidebar-sub-header level2"><a href="/backend/0ygxqu/#反射处理集" class="sidebar-link">反射处理集</a></li><li class="sidebar-sub-header level2"><a href="/backend/0ygxqu/#连接池" class="sidebar-link">连接池</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/backend/0ygxqu/#dbcp连接池" class="sidebar-link">DBCP连接池</a></li><li class="sidebar-sub-header level3"><a href="/backend/0ygxqu/#c3p0连接池" class="sidebar-link">C3P0连接池</a></li><li class="sidebar-sub-header level3"><a href="/backend/0ygxqu/#druid连接池" class="sidebar-link">Druid连接池</a></li><li class="sidebar-sub-header level3"><a href="/backend/0ygxqu/#软编码" class="sidebar-link">软编码</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/backend/0ygxqu/#代码索引" class="sidebar-link">代码索引</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/backend/0ygxqu/#jdbc应用" class="sidebar-link">JDBC应用</a></li><li class="sidebar-sub-header level3"><a href="/backend/0ygxqu/#jdbc应用-增、删、改" class="sidebar-link">JDBC应用 增、删、改</a></li><li class="sidebar-sub-header level3"><a href="/backend/0ygxqu/#preparedstatement预状态通道" class="sidebar-link">PreparedStatement预状态通道</a></li><li class="sidebar-sub-header level3"><a href="/backend/0ygxqu/#jdbc事务应用" class="sidebar-link">JDBC事务应用</a></li><li class="sidebar-sub-header level3"><a href="/backend/0ygxqu/#savepoints存档" class="sidebar-link">Savepoints存档</a></li><li class="sidebar-sub-header level3"><a href="/backend/0ygxqu/#sql批处理" class="sidebar-link">SQL批处理</a></li><li class="sidebar-sub-header level3"><a href="/backend/0ygxqu/#jdbc整合应用" class="sidebar-link">JDBC整合应用</a></li></ul></li></ul></li><li><a href="/backend/k5hxej/" class="sidebar-link">Hibernate</a></li><li><a href="/backend/zi2hq0/" class="sidebar-link">Mybatis</a></li><li><a href="/backend/ldn760/" class="sidebar-link">Redis</a></li><li><a href="/backend/redis2/" class="sidebar-link">Redis原理篇</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringMVC</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringBoot</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringClound</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper bg-style-1"><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/backend/#后端" data-v-06225672>后端</a></li><li data-v-06225672><a href="/backend/#数据库" data-v-06225672>数据库</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="javascript:;" data-v-06225672>柏竹</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2020-02-18</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">JDBC<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="jdbc"><a href="#jdbc" class="header-anchor">#</a> JDBC</h1> <p>JDBC是一种SQL语句的Java API ，Java语言编写的 类和接口</p> <ul><li>连接数据库</li> <li>创建 SQL语句</li> <li>在数据库中SQL查询</li> <li>查看和生成记录</li></ul> <h2 id="体系构架"><a href="#体系构架" class="header-anchor">#</a> 体系构架</h2> <h3 id="体系结构"><a href="#体系结构" class="header-anchor">#</a> 体系结构</h3> <img src="https://image.bozhu12.cc/myblog/MySQL/MySQL02.png">
**JDBC API：** 提供应用程序JDBC管理器连接
**JDBC Driver Manager：** 管理器驱动程序连接
<h3 id="组件"><a href="#组件" class="header-anchor">#</a> 组件</h3> <p><strong>DriverManager：</strong> 此类 管理数据库驱动程序列表
<strong>Driver：</strong> 此接口 处理与数据库服务器的通信，连接具体驱动
<strong>Connection：</strong> 该界面具有用于联系数据库的所有方法
<strong>Statement：</strong> 此接口 创建的对象将SQL语句提交到数据库
<strong>ResultSet：</strong> 在使用Statement对象执行SQL查询后，这些对象保存从数据库检索的数据。它作为一 个迭代器，允许我们移动其数据。
<strong>SQLException：</strong> 此类数据库发生的错误</p> <h2 id="首次应用"><a href="#首次应用" class="header-anchor">#</a> 首次应用</h2> <p>构建JDBC应用：</p> <ol><li><strong>导入包</strong> <code>import java.sql.*</code></li> <li>**注册JDBC驱动程序 ** 通过Java程序 初始化驱动程序 <code>Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</code> , 驱动类文件加载至内存中，并自动注册</li> <li><strong>连接对象</strong> 通过 <code>DriverManager.getConnection(String url, String userName, String passWord )方法</code> 获取 <code>Connection对象</code> (数据库的物理连接)</li> <li><strong>执行查询</strong> 通过 <code>Statement对象</code> 构建 和 提交SQL语句到数据库</li> <li><strong>结果集提取数据</strong> 通过 <code>ResultSet.getXXX(String 字段名 )方法</code> 获取结果集检索数据（XXX代表对应的数据类型）</li> <li><strong>释放资源</strong> 关闭所有数据库资源，避免依赖JVM垃圾收集器</li></ol> <p>**注册JDBC驱动程序 方法 **</p> <blockquote><p><font color="#05ffdc">Class.forName(String str)</font>  根据路径进行加载驱动
<font color="#05ffdc">DriverManager.registerDriver(Driver mydriver)</font>  静态方法 对象加载</p></blockquote> <p><a href="#G1">点击代码示例</a><a id="C1" href="#">*</a> （JDBC应用）</p> <h2 id="api"><a href="#api" class="header-anchor">#</a> API</h2> <p>实现数据库连接交互信息</p> <h3 id="connection"><a href="#connection" class="header-anchor">#</a> Connection</h3> <p>连接数据库 <code>DriverManager.getConnection()方法</code> 建立连接，重载方法有</p> <p><font color="#05ffdc">DriverManager.getConnection(String url)</font> <font color="#05ffdc">DriverManager.getConnection(String url，Properties prop)</font> <font color="#05ffdc">DriverManager.getConnection(String url，String user，String password)</font> <font color="#05ffdc">DriverManager.getConnection(String url, Properties info)</font></p> <p><strong>数据库URL配置</strong></p> <table><thead><tr><th>RDBMS</th> <th>JDBC驱动程序名称</th> <th>网址格式</th></tr></thead> <tbody><tr><td>MYSQL8</td> <td>com.mysql.cj.jdbc.Driver</td> <td>jdbc:mysql://HostName:3306/databaseName?serverTimezone=UTC</td></tr> <tr><td>MySQL</td> <td>com.mysql.jdbc.Driver</td> <td>jdbc:mysql://HostName:3306/databaseName</td></tr> <tr><td>ORACLE</td> <td>oracle.jdbc.driver.OracleDriver</td> <td>jdbc:oracle:thin:@HostName:Port Number：databaseName</td></tr> <tr><td>DB2</td> <td>COM.ibm.db2.jdbc.net.DB2Driver</td> <td>jdbc:db2:HostName:Port / databaseName</td></tr> <tr><td>SYBASE</td> <td>com.sybase.jdbc.SybDriver</td> <td>jdbc:sybase:Tds:HostName:Port Number / databaseName</td></tr></tbody></table> <p><strong>HostName：</strong> IP地址
<strong>Post：</strong> 端口
<strong>databaseName：</strong> 库名</p> <blockquote><p>注意：mysql8以后的url必须添加时区 ==serverTimezone=UTC==</p></blockquote> <h3 id="resultset"><a href="#resultset" class="header-anchor">#</a> ResultSet</h3> <p>数据库中的查询结果集
<code>ResultSet对象</code> 维护指向结果集中当前行的光标。 如果没有在 <code>createStatement()方法</code> 中指定参数 ，则自动获取TYPE_FORWARD_ONLY</p> <table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td>ResultSet.TYPE_SCROLL_INSENSITIVE</td> <td>光标可前后滚动，对数据更改不敏感</td></tr> <tr><td>ResultSet.TYPE_SCROLL_SENSITIVE</td> <td>光标可前后滚动，对底层数据更改敏感</td></tr> <tr><td>ResultSet.TYPE_FORWARD_ONLY</td> <td>光标只能在结果集中向前移动</td></tr></tbody></table> <h3 id="resultsetmetadata"><a href="#resultsetmetadata" class="header-anchor">#</a> ResultSetMetaData</h3> <p>一般用于获取 <code>ResultSet对象</code> 中字段的类型和属性的信息的对象</p> <p><strong>ResultSetMetaData方法</strong></p> <table><thead><tr><th>返回</th> <th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td>String</td> <td><font color="#05ffdc">getColumnName(int column)</font></td> <td>获取 指定字段名称（从1开始）</td></tr> <tr><td>String</td> <td><font color="#05ffdc">getColumnLabel(int column)</font></td> <td>获取 指定字段的别名（从1开始）</td></tr> <tr><td>int</td> <td><font color="#05ffdc">getColumnCount()</font></td> <td>获取 当前ResultSet对象中的字段数</td></tr> <tr><td>String</td> <td><font color="#05ffdc">getColumnTypeName(int column)</font></td> <td>检索 指定字段的库，特定的类型名称</td></tr> <tr><td>···</td> <td>···</td> <td>···</td></tr></tbody></table> <h3 id="statement"><a href="#statement" class="header-anchor">#</a> Statement</h3> <p>在使用 <code>Statement对象</code> 执行SQL语句之前，连接后得到 <code>Connection对象</code> 的 <code>createStatement()方法</code> 创建Statement对象</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//以下代码需要 异常 捕获或抛出</span>
<span class="token comment">//获取数据库的实体连接</span>
<span class="token class-name">Connection</span> connection <span class="token operator">=</span> ······ <span class="token punctuation">;</span>
<span class="token class-name">Statement</span> stmt <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Statement方法</strong></p> <table><thead><tr><th>返回</th> <th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td>boolean</td> <td><font color="#05ffdc">execute(String SQL)</font></td> <td>是否存在 ResultSet对象</td></tr> <tr><td>int</td> <td><font color="#05ffdc">executeUpdate(String SQL)</font></td> <td>在数据库中执行SQL语句，并且获取 SQL语句影响的行数</td></tr> <tr><td>ResultSet</td> <td><font color="#05ffdc">executeQuery(String SQL)</font></td> <td>获取 查询的结果集，迭代遍历可获取数据</td></tr> <tr><td>void</td> <td><font color="#05ffdc">close()</font></td> <td>关闭对象</td></tr></tbody></table> <p><a href="#G2">点击代码示例</a><a id="C2" href="#">*</a> （JDBC应用 增、删、改）</p> <p><strong>恶意SQL注入</strong></p> <p>通过SQL命令插入Web表单提交或输入域名或页面请求的查询字符串，最终以伪信息进行SQL执行命令，示例：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> username <span class="token operator">=</span> <span class="token string">&quot;aa&quot;</span><span class="token punctuation">;</span>
<span class="token comment">//跳过判断 ； 通过 或 进行 1=1</span>
<span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token string">&quot; '' OR 1=1 &quot;</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;SELECT * FROM users WHERE username = '&quot;</span><span class="token operator">+</span>username<span class="token operator">+</span><span class="token string">&quot;' AND password = &quot;</span><span class="token operator">+</span>password<span class="token punctuation">;</span>
</code></pre></div><h3 id="preparestatement"><a href="#preparestatement" class="header-anchor">#</a> PrepareStatement</h3> <p><code>PrepareStatement接口</code> 预状态通道，也是 <code>Statement接口</code> 的子接口，它能简化代码、预防注入恶意sql注入、提高效率的优点
SQL语句可动态的提供参数相应的数据</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//抛出|捕获 异常</span>
<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;SELECT * FROM users WHERE username = ? AND password = ?&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">PreparedStatement</span> pps <span class="token operator">=</span> <span class="token class-name">Connection</span><span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
pps<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token punctuation">,</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pps<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token punctuation">,</span> <span class="token string">&quot;123123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//执行sql</span>
<span class="token keyword">int</span> resultSet <span class="token operator">=</span> pps<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
···
    
pps<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在当中所有参数都由 <code>？</code> 标记，执行SQL前，必须提供为每个参数提供值！！</p> <p><strong>PreparedStatement方法</strong></p> <table><thead><tr><th>返回</th> <th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td>boolean</td> <td><font color="#05ffdc">execute()</font></td> <td>是否存在 ResultSet对象</td></tr> <tr><td>int</td> <td><font color="#05ffdc">executeUpdate()</font></td> <td>在数据库中执行SQL语句，并且获取 SQL语句影响的行数</td></tr> <tr><td>ResultSet</td> <td><font color="#05ffdc">executeQuery()</font></td> <td>获取 查询的结果集，迭代遍历可获取数据</td></tr> <tr><td>XXX</td> <td><font color="#05ffdc">setXXX(int mark,XXX value)</font></td> <td>XXX代表绑定对应的数据类型<br><strong>mark：</strong> 下标锁定（下标是从1开始）<br><strong>value：</strong> 指定下标赋予值</td></tr> <tr><td></td> <td>···</td> <td></td></tr> <tr><td>void</td> <td><font color="#05ffdc">close()</font></td> <td>关闭对象</td></tr></tbody></table> <p><a href="#G3">点击代码示例</a><a id="C3" href="#">*</a> （PreparedStatement预状态通道）</p> <p><strong>statement和PreparedStatement区别</strong></p> <ol><li>statement属于状态通道，PreparedStatement属于预状态通道</li> <li>预状态通道会先编译sql语句,再去执行，比statement执行效率高</li> <li>预状态通道支持占位符<code>?</code> ，给占位符赋值的时候，位置从1开始</li> <li>预状态通道可以防止sql注入，因 预状态通道在处理值的时候以字符串形式处理</li> <li>PreparedStatement通道传递的参数只能是变量，并非变量</li></ol> <h2 id="多表关系"><a href="#多表关系" class="header-anchor">#</a> 多表关系</h2> <p>数据库的分类有：一对一、一对多、多对多</p> <p>实体类通过属性的方式建立两表关系
<strong>类名=表名</strong> 、 <strong>列名=属性名</strong></p> <p>实现方式原理：通过查询提取出的数据，对相应类属性进行赋值</p> <p>有学生类(Student)，有ID、姓名属性，生成它们的get、set方法
数据库数据 （XX库 Student表）</p> <table><thead><tr><th>sid</th> <th>sname</th></tr></thead> <tbody><tr><td>1</td> <td>柏竹</td></tr> <tr><td>2</td> <td>黑猫</td></tr></tbody></table> <p>以下代码实例</p> <div class="language-java extra-class"><pre class="language-java"><code>····
<span class="token comment">//执行SQL</span>
<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;SELECT * FROM student&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">PreparedStatement</span> pps <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
resultSet <span class="token operator">=</span> pps<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Student</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	student<span class="token punctuation">.</span><span class="token function">setSid</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">&quot;sid&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	student<span class="token punctuation">.</span><span class="token function">setsName</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;sname&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a href="https://download.csdn.net/download/weixin_45963193/15892444" target="_blank" rel="noopener noreferrer">点击多表项目测试代码<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> （可以自行下载查看详细操作 · <strong>免费</strong>）</p> <h2 id="事务应用"><a href="#事务应用" class="header-anchor">#</a> 事务应用</h2> <p><a href="https://blog.csdn.net/weixin_45963193/article/details/114806596" target="_blank" rel="noopener noreferrer">点击事务了解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>JDBC连接默认是 <code>自动提交模式</code> ，JDBC也支持手动事务，每条SQL语句完成后自动提交到数据库
事务能使控制库数据何时进行数据更改，如果一组SQL语句视为一个逻辑单元去执行，要么全部成功，要么全部失败！</p> <p>通过 <code>Connection对象</code> 进行事务提交回滚操作！</p> <table><thead><tr><th>返回</th> <th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td>void</td> <td><font color="#05ffdc">setAutoCommit(boolean autoCommit)</font></td> <td>是否关闭自动提交事务（自动打开事务）</td></tr> <tr><td>boolean</td> <td><font color="#05ffdc">getAutoCommit()</font></td> <td>是否为自动提交事务模式</td></tr> <tr><td>void</td> <td><font color="#05ffdc">commit()</font></td> <td>提交事务</td></tr> <tr><td>void</td> <td><font color="#05ffdc">rollback()</font></td> <td>回滚事务</td></tr> <tr><td>void</td> <td><font color="#05ffdc">close()</font></td> <td>释放资源</td></tr></tbody></table> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//connection 已连接</span>
connection<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//SQL操作</span>
·····
    
<span class="token comment">//手动提交</span>
connection<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a href="#G4">点击代码示例</a><a id="C4" href="#">*</a> （JDBC事务应用）</p> <h3 id="savepoints-事务存档"><a href="#savepoints-事务存档" class="header-anchor">#</a> Savepoints(事务存档)</h3> <p>事务执行过程，可设置保存点，设置保存点库数据会更变。保存存档后的点（库更改后数据是永久性的），当中出现异常，回滚事务时会返回至存档点，并非开头启动事务点！</p> <p>通过 <code>Connection对象</code> 进行存档点的操作！</p> <table><thead><tr><th>返回</th> <th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td>Savepoint</td> <td><font color="#05ffdc">setSavepoint(String name)</font></td> <td>定义存档点，需设存档点名</td></tr> <tr><td>void</td> <td><font color="#05ffdc">releaseSavepoint(Savepoint savepoint)</font></td> <td>删除指定存档点</td></tr> <tr><td>void</td> <td><font color="#05ffdc">rollback(Savepoint  savepoint)</font></td> <td>指定回滚目的</td></tr></tbody></table> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Savepoint</span> archiveNo1 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    ···
    <span class="token comment">//connection 已连接</span>
    connection<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Statement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">//SQL操作</span>
    ·····
    <span class="token comment">//以上是SQL完成操作</span>
    archiveNo1 <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">setSavepoint</span><span class="token punctuation">(</span><span class="token string">&quot;ArchiveNo1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ·····
        
    <span class="token comment">//手动提交</span>
    connection<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> throwables<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//异常回滚</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                connection<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span>archiveNo1<span class="token punctuation">)</span><span class="token punctuation">;</span>
                connection<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a href="#G5">点击代码示例</a><a id="C5" href="#">*</a> （Savepoints存档）</p> <h2 id="批量处理"><a href="#批量处理" class="header-anchor">#</a> 批量处理</h2> <p>JDBC允许 批量处理SQL语句 ，通过事务一次调用提交库
一次发送多条SQL语句，可减少数据库的交互次数，提高质量</p> <p>通过 <code>PreparedStatement</code>对象 、 <code>Statement</code>对象  实现批处理方法</p> <table><thead><tr><th>返回</th> <th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td>void</td> <td><font color="#05ffdc">addBatch()</font></td> <td>PreparedStatement对象添加SQL语句</td></tr> <tr><td>void</td> <td><font color="#05ffdc">addBatch(String sql)</font></td> <td>Statement对象 添加SQL语句</td></tr> <tr><td>int[]</td> <td><font color="#05ffdc">executeBatch()</font></td> <td>获取批量执行的影响数(顺序=添加SQL顺序)，并执行 批量SQL语句</td></tr></tbody></table> <p><strong>实现步骤</strong></p> <ol><li>连接数据库 <code>Connection对象</code></li> <li>设置手动事务 <code>Connection对象</code> 的 <code>setAutoCommit(false)</code>方法</li> <li>获取通道对象 <code>PreparedStatement</code>对象 或 <code>Statement</code>对象</li> <li>不同通道对象，添加方式不同！
<code>Statement</code>对象  通过 <code>addBatch(sql)</code>方法 实现添加SQL语句
<code>PreparedStatement</code>对象 通过 <code>addBatch()</code>方法 实现添加 SQL语句</li> <li>通过 通道对象 的 <code>executeBatch()</code>方法  批量执行SQL语句</li> <li>提交事务 <code>Connection</code>对象 的 <code>commit()</code>方法 进行提交</li></ol> <p><strong>注意：</strong> 批量处理过程中出现异常，可通过异常捕获进行回滚操作</p> <p><a href="#G6">点击代码示例</a><a id="C6" href="#">*</a> （SQL批处理）</p> <h2 id="反射处理集"><a href="#反射处理集" class="header-anchor">#</a> 反射处理集</h2> <p>利用反射处理查询到的结果集，对应的数据赋予对象！
注意：以下代码要求库中的字段名与类中的属性名相同，且类所有属性都有get、set方法！（类至少有一个相同）</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//库连接</span>
···
<span class="token class-name">List</span> studentall <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//student表 = studnet类 ，且 表studnet的字段 = 类studnet的属性！！</span>
<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;SELECT * FROM student&quot;</span><span class="token punctuation">;</span>
pps <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
rs <span class="token operator">=</span> pps<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//提取 结果集 字段的类型和属性的信息</span>
<span class="token class-name">ResultSetMetaData</span> metaData <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getMetaData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//赋予字段数</span>
<span class="token keyword">int</span> count <span class="token operator">=</span> metaData<span class="token punctuation">.</span><span class="token function">getColumnCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> columnNames <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">//字段数组</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> count <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    columnNames<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> metaData<span class="token punctuation">.</span><span class="token function">getColumnName</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//通过反射 student类中的所有方法</span>
<span class="token class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> declaredMethods <span class="token operator">=</span> student<span class="token punctuation">.</span><span class="token function">getDeclaredMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//无参的构造方法</span>
    <span class="token class-name">Object</span> s <span class="token operator">=</span> cla<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//遍历数组字段</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> columnName <span class="token operator">:</span> columnNames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//用于比较 set方法名  </span>
        <span class="token class-name">String</span> newColumnName <span class="token operator">=</span> <span class="token string">&quot;set&quot;</span><span class="token operator">+</span>columnName<span class="token punctuation">;</span>
        <span class="token comment">//遍历类方法</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Method</span> declaredMethod <span class="token operator">:</span> declaredMethods<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//比较方法名（无视大小写）</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>declaredMethod<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>newColumnName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">//通过反射实现方法</span>
                declaredMethod<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>s <span class="token punctuation">,</span> rs<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span>columnName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//每条数据都添加</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="连接池"><a href="#连接池" class="header-anchor">#</a> 连接池</h2> <p><a href="https://blog.csdn.net/weixin_45963193/article/details/114016342#t18" target="_blank" rel="noopener noreferrer">点击连接池说明<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="dbcp连接池"><a href="#dbcp连接池" class="header-anchor">#</a> DBCP连接池</h3> <p><strong>实现步骤：</strong></p> <ol><li>导入jdk依赖包
mysql-jdbc.jar
commons-dbcp.jar
commons-pool.jar</li> <li>实例 <code>BasicDataSource对象</code></li> <li>功能属性实现 <code>BasicDataSource对象</code> 的 set方法</li> <li>获取连接 通过 <code>BasicDataSource对象</code> 的 <code>getConnection()方法</code></li></ol> <p><strong>配置实例</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testHard</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span><span class="token punctuation">{</span>
	<span class="token comment">// 硬编码 使用DBCP连接池</span>
	<span class="token class-name">BasicDataSource</span> source <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BasicDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//设置连接的信息</span>
	source<span class="token punctuation">.</span><span class="token function">setDriverClassName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//设置 url 、 用户 、 密码 ···</span>
	source<span class="token punctuation">.</span><span class="token function">setUrl</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://localhost:3306/day2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	source<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	source<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;111&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取连接</span>
	<span class="token class-name">Connection</span> connection <span class="token operator">=</span> source<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="c3p0连接池"><a href="#c3p0连接池" class="header-anchor">#</a> C3P0连接池</h3> <p>C3P0与DBCP区别</p> <ol><li>C3P0有自动回收空闲连接功能，DBCP没有</li> <li>C3P0无需手动，DBCP需手动配置文件</li> <li>C3P0配置文件命名固定（c3p0-config.xml）</li></ol> <p><strong>实现步骤：</strong></p> <ol><li><p>导入jdk依赖包</p> <p>mysql-jdbc.jar</p> <p>c3p0-0.9.1.2.jar (版本号)</p></li> <li><p>创建 <code>c3p0-config.xml</code> 配置文件，路径：src文件夹下</p></li> <li><p>手动 配置文件
调用无参的默认配置 <code>&lt;default-config&gt;</code>
调用有参的配置<code>&lt;named-config name=&quot;Myc3p0Test&quot;&gt;</code> 自定命名</p></li> <li><p>实例 <code>ComboPooledDataSource对象</code> 无参调用默认的，有参调用自定义的</p></li> <li><p>获取连接 通过 <code>ComboPooledDataSource对象</code> 的 <code>getConnection()方法</code></p></li></ol> <p>手动配置 <code>c3p0-config.xml</code> 配置文件。实例：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>c3p0-config</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 默认配置，如果没有指定则使用这个配置 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>default-config</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 基本配置 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClass<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>com.mysql.cj.jdbc.Driver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcUrl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>jdbc:mysql://localhost:3306/test?serverTimezone=Asia/Shanghai<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--扩展配置--&gt;</span>
        <span class="token comment">&lt;!-- 连接超过1min报错--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkoutTimeout<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>60000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--30秒检查空闲连接 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>idleConnectionTestPeriod<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>30<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>initialPoolSize<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 30秒不适用丢弃--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxIdleTime<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>30<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxPoolSize<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>100<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>minPoolSize<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxStatements<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>200<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>default-config</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 命名的配置 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>named-config</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Myc3p0Test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClass<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>com.mysql.cj.jdbc.Driver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcUrl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>jdbc:mysql://localhost:3306/test?serverTimezone=Asia/Shanghai<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 如果池中数据连接不够时一次增长多少个 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>acquireIncrement<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>initialPoolSize<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>20<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>minPoolSize<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxPoolSize<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>40<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxStatements<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>20<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxStatementsPerConnection<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>named-config</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>c3p0-config</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="druid连接池"><a href="#druid连接池" class="header-anchor">#</a> Druid连接池</h3> <p>Druid是目前大厂流行的连接池，有以下特点：</p> <ol><li><strong>秒查询</strong>
快速的聚合能力以及亚秒级的OLAP查询能力</li> <li><strong>实时数据注入</strong>
保证在实时和离线环境下 事件的 实效性 和 统一性</li> <li><strong>可扩展PB级存储</strong>
扩容到PB的数据量，每秒百万级别的数据注入</li> <li><strong>多环境部署</strong>
可从多种数据系统中注入数据</li> <li><strong>丰富社区</strong>
学习交流</li></ol> <p><strong>实现步骤：</strong> （实现方式跟DBCP差不多）</p> <ol><li>导入jdk依赖包
mysql-jdbc.jar
druid-1.0.9.jar （版本号）</li> <li>实例 <code>DruidDataSource对象</code></li> <li>功能属性实现 <code>DruidDataSource对象</code> 的 set方法</li> <li>获取连接 通过 <code>DruidDataSource对象</code> 的 <code>getConnection()方法</code></li></ol> <h3 id="软编码"><a href="#软编码" class="header-anchor">#</a> 软编码</h3> <p>软编码，在项目中添加配置文件，可避免今后代码多次修改
使用 <code>properties类型</code> 的文件，示例</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token comment">#连接设置</span>
<span class="token key attr-name">driverClassName</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.jdbc.Driver</span>
<span class="token key attr-name">url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/day2</span>
<span class="token key attr-name">username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">password</span><span class="token punctuation">=</span><span class="token value attr-value">111</span>
<span class="token comment">#&lt;!-- 初始化连接 --&gt;</span>
<span class="token key attr-name">initialSize</span><span class="token punctuation">=</span><span class="token value attr-value">10</span>
<span class="token comment">#最大连接数量</span>
<span class="token key attr-name">maxActive</span><span class="token punctuation">=</span><span class="token value attr-value">50</span>
<span class="token comment">#&lt;!-- 最大空闲连接 --&gt;</span>
<span class="token key attr-name">maxIdle</span><span class="token punctuation">=</span><span class="token value attr-value">20</span>
<span class="token comment">#&lt;!-- 最小空闲连接 --&gt;</span>
<span class="token key attr-name">minIdle</span><span class="token punctuation">=</span><span class="token value attr-value">5</span>
<span class="token comment">#&lt;!-- 超时等待时间以毫秒为单位 6000毫秒/1000等于60秒 --&gt;</span>
<span class="token key attr-name">maxWait</span><span class="token punctuation">=</span><span class="token value attr-value">6000</span>
</code></pre></div><p><strong>属性提取</strong></p> <p>提取前提注意文件路径，以下代码是 src文件夹下的路径！</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//方法1</span>
<span class="token comment">//需要添加 IOException异常捕获</span>
<span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Dbutils</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;linkInfo.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> driver <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> url <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> userName <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> passWord <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//方法2</span>
<span class="token class-name">ResourceBundle</span> bundle <span class="token operator">=</span> <span class="token class-name">ResourceBundle</span><span class="token punctuation">.</span><span class="token function">getBundle</span><span class="token punctuation">(</span><span class="token string">&quot;文件名&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> driver <span class="token operator">=</span> bundle<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> url <span class="token operator">=</span> bundle<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> userName <span class="token operator">=</span> bundle<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> passWord <span class="token operator">=</span> bundle<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="代码索引"><a href="#代码索引" class="header-anchor">#</a> 代码索引</h2> <h3 id="jdbc应用"><a href="#jdbc应用" class="header-anchor">#</a> JDBC应用</h3> <p>（<a href="#C1">返回</a><a id="G1" href="#">*</a>）</p> <p>数据库数据：（Test库 student表 的数据）</p> <table><thead><tr><th>SNO (varchar)</th> <th>SNAME (varchar)</th> <th>SSEX (varchar)</th> <th>SBIRTHDAY (data)</th> <th>CLASS (varchar)</th></tr></thead> <tbody><tr><td>108</td> <td>曾华</td> <td>男</td> <td>1977-09-01</td> <td>95033</td></tr> <tr><td>105</td> <td>匡明</td> <td>男</td> <td>1975-10-02</td> <td>95031</td></tr> <tr><td>107</td> <td>王丽</td> <td>女</td> <td>1976-01-23</td> <td>95033</td></tr> <tr><td>101</td> <td>李军</td> <td>男</td> <td>1976-02-20</td> <td>95033</td></tr> <tr><td>109</td> <td>王芳</td> <td>女</td> <td>1975-02-10</td> <td>95031</td></tr> <tr><td>103</td> <td>陆君</td> <td>男</td> <td>1974-06-03</td> <td>95031</td></tr></tbody></table> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @Author: 柏竹
 * @Description: 一个简洁主义...
 * @Date_Created_in: 2021-03-15 22:11
 * @Modified_By:
 * @Project: JDBC应用测试
 */</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">Statement</span> statement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">//1. 加载驱动</span>
            <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">/*//也可以，通过对象 进行加载驱动
            Driver myDriver = new com.mysql.cj.jdbc.Driver();
            DriverManager.registerDriver( myDriver );*/</span>
            
            <span class="token comment">//2. 获取连接</span>
            <span class="token class-name">String</span> userName <span class="token operator">=</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> passWord <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
            <span class="token comment">//jdbc:mysql://hostname:3306/databaseName?serverTimezone=UTC</span>
            <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/test?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url <span class="token punctuation">,</span> userName <span class="token punctuation">,</span> passWord<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">/*//也可以，数据库URL和一个Properties对象连接
            //前提需要导包 import java.util.Properties;
            String URL = &quot;jdbc:mysql://localhost:3306/test?serverTimezone=UTC&quot;;
            Properties info = new Properties();
            info.put(&quot;user&quot;,&quot;root&quot;);
            info.put(&quot;password&quot;,&quot;&quot;);
            connection = DriverManager.getConnection(URL , info);*/</span>
            
            <span class="token comment">//3. 定义sql，创建状态通道（进行sql语句的发送）</span>
            statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token string">&quot;SELECT * FROM student;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">//4. 取出结果集信息</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//取出数据</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;学号:&quot;</span> <span class="token operator">+</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">&quot;SNO&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,  &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;姓名:&quot;</span> <span class="token operator">+</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;SNAME&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,  &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;性别:&quot;</span> <span class="token operator">+</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;SSEX&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,  &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;班级:&quot;</span> <span class="token operator">+</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;CLASS&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> <span class="token operator">|</span> <span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token comment">//5. 关闭，释放资源</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>connection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>statement <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>resultSet <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> throwables<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                throwables<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>

<span class="token comment">/*
学号:108,  姓名:曾华,  性别:男,  班级:95033
学号:105,  姓名:匡明,  性别:男,  班级:95031
学号:107,  姓名:王丽,  性别:女,  班级:95033
学号:101,  姓名:李军,  性别:男,  班级:95033
学号:109,  姓名:王芳,  性别:女,  班级:95031
学号:103,  姓名:陆君,  性别:男,  班级:95031
*/</span>
</code></pre></div><h3 id="jdbc应用-增、删、改"><a href="#jdbc应用-增、删、改" class="header-anchor">#</a> JDBC应用 增、删、改</h3> <p>（<a href="#C2">返回</a><a id="G2" href="#">*</a>）</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @Author: 柏竹
 * @Description: 一个简洁主义...
 * @Date_Created_in: 2021-03-15 22:11
 * @Modified_By:
 * @Project: JDBC应用 增、删、改
 */</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo2</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">Statement</span> statement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">//本次使用另一方法应用JDBC</span>
            
            <span class="token comment">//1. 加载驱动</span>
            <span class="token class-name">Driver</span> myDriver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>Driver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">registerDriver</span><span class="token punctuation">(</span> myDriver <span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">//2. 获取连接</span>
            <span class="token comment">//前提需要导包 import java.util.Properties;</span>
            <span class="token class-name">String</span> rul <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/test?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
            <span class="token class-name">Properties</span> info <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            info<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            info<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>rul <span class="token punctuation">,</span> info<span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">//3. 定义sql，创建状态通道（进行sql语句的发送）</span>
            statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">//4. SQL语句操作</span>
            
            <span class="token comment">//建表(前提：库中没有该表 tableTest)</span>
            <span class="token class-name">String</span> tableName <span class="token operator">=</span> <span class="token string">&quot;tableTest&quot;</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> newTable <span class="token operator">=</span> <span class="token string">&quot;CREATE TABLE &quot;</span><span class="token operator">+</span>tableName<span class="token operator">+</span><span class="token string">&quot;(no int,name varchar(10) NOT NULL);&quot;</span><span class="token punctuation">;</span>
            statement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>newTable<span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">//是否空表 （是否记录有数据）</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>statement<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token string">&quot;SELECT * FROM &quot;</span><span class="token operator">+</span>tableName<span class="token operator">+</span><span class="token string">&quot;;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;NULL Table....Creating&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;NOT NULL Table&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
           
            <span class="token comment">//新增数据10条</span>
            <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> name <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token string">&quot;Sans&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Jack&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Tom&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Cate&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Jone&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Bcck&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//INSERT INTO 表名 VALUES(值1 [,值2. . .]);</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;INSERT INTO &quot;</span><span class="token operator">+</span>tableName<span class="token operator">+</span><span class="token string">&quot; VALUE(&quot;</span><span class="token operator">+</span>i<span class="token operator">+</span><span class="token string">&quot;,&quot;</span><span class="token operator">+</span>name<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">&quot;);&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                result <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token string">&quot;INSERT INTO &quot;</span><span class="token operator">+</span>tableName<span class="token operator">+</span><span class="token string">&quot; VALUE(&quot;</span><span class="token operator">+</span>i<span class="token operator">+</span><span class="token string">&quot;,'&quot;</span><span class="token operator">+</span>name<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">&quot;');&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">isItDone</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
                
            <span class="token punctuation">}</span>
            
            <span class="token comment">//修改表（将 sans名 改为 Sanscan名）</span>
            <span class="token comment">//UPDATE 表名 SET 字段名1 = 字段值1 [,字段名2 = 值2…] [WHERE 条件表达式];</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;UPDATE &quot;</span><span class="token operator">+</span>tableName<span class="token operator">+</span><span class="token string">&quot; SET &quot;</span><span class="token operator">+</span><span class="token string">&quot; name = 'Sanscan' WHERE name = 'sans';&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            result <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token string">&quot;UPDATE &quot;</span><span class="token operator">+</span>tableName<span class="token operator">+</span><span class="token string">&quot; SET &quot;</span><span class="token operator">+</span><span class="token string">&quot; name = 'Sanscan' WHERE name = 'sans';&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">isItDone</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">//删除数据 (删除名为Cate的记录)</span>
            <span class="token comment">//DELETE FROM 表名 [WHERE 条件表达式];</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;DELETE FROM &quot;</span><span class="token operator">+</span>tableName<span class="token operator">+</span><span class="token string">&quot; WHERE name = 'Cate';&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            result <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token string">&quot;DELETE FROM &quot;</span><span class="token operator">+</span>tableName<span class="token operator">+</span><span class="token string">&quot; WHERE name = 'Cate';&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">isItDone</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">//查表</span>
            resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token string">&quot;SELECT * FROM &quot;</span><span class="token operator">+</span>tableName<span class="token operator">+</span><span class="token string">&quot;;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//取出数据</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;NO.&quot;</span> <span class="token operator">+</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">&quot;no&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Name:&quot;</span> <span class="token operator">+</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
    
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            
            <span class="token comment">//5. 关闭，释放资源</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>connection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>statement <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>resultSet <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> throwables<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                throwables<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        
    <span class="token punctuation">}</span>
    
    <span class="token comment">/**测试SQL语句执行情况*/</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">isItDone</span><span class="token punctuation">(</span><span class="token keyword">int</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
<span class="token comment">/*
NOT NULL Table
INSERT INTO tableTest VALUE(1,Jack);
执行成功
INSERT INTO tableTest VALUE(2,Tom);
执行成功
INSERT INTO tableTest VALUE(3,Cate);
执行成功
INSERT INTO tableTest VALUE(4,Jone);
执行成功
INSERT INTO tableTest VALUE(5,Bcck);
执行成功
UPDATE tableTest SET  name = 'Sanscan' WHERE name = 'sans';
执行成功
DELETE FROM tableTest WHERE name = 'Cate';
执行成功
NO.1, Name:Sanscan
NO.2, Name:Jack
NO.3, Name:Tom
NO.5, Name:Jone
*/</span>
</code></pre></div><h3 id="preparedstatement预状态通道"><a href="#preparedstatement预状态通道" class="header-anchor">#</a> PreparedStatement预状态通道</h3> <p>（<a href="#C3">返回</a><a id="G3" href="#">*</a>）</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @Author: 柏竹
 * @Description: 一个简洁主义...
 * @Date_Created_in: 2021-03-15 22:11
 * @Modified_By:
 * @Project: JDBC 预状态通道测试 PreparedStatement接口
 */</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo3</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> pps <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">//1. 加载驱动</span>
            <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">//2. 获取连接</span>
            <span class="token class-name">String</span> userName <span class="token operator">=</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> passWord <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
            <span class="token comment">//jdbc:mysql://hostname:3306/databaseName?serverTimezone=UTC</span>
            <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/test?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url <span class="token punctuation">,</span> userName <span class="token punctuation">,</span> passWord<span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">/*
            * 3. 定义PreparedStatement预状态通道（进行sql语句的发送）
            * */</span>
            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;SELECT * FROM student WHERE CLASS=? AND SNAME=?;&quot;</span><span class="token punctuation">;</span>
            pps <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> uName <span class="token operator">=</span> <span class="token string">&quot;95031&quot;</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> uClass <span class="token operator">=</span> <span class="token string">&quot;王芳&quot;</span><span class="token punctuation">;</span>
            <span class="token comment">//通过指定下标进行赋予值</span>
            pps<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>uName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            pps<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>uClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            resultSet <span class="token operator">=</span> pps<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">//4. 取出结果集信息</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//取出数据</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;学号:&quot;</span> <span class="token operator">+</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">&quot;SNO&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,  &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;姓名:&quot;</span> <span class="token operator">+</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;SNAME&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,  &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;性别:&quot;</span> <span class="token operator">+</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;SSEX&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,  &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;班级:&quot;</span> <span class="token operator">+</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;CLASS&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> <span class="token operator">|</span> <span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            
            <span class="token comment">//5. 关闭，释放资源</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>connection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>pps <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    pps<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>resultSet <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> throwables<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                throwables<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>

<span class="token comment">/*
学号:109,  姓名:王芳,  性别:女,  班级:95031
*/</span>
</code></pre></div><h3 id="jdbc事务应用"><a href="#jdbc事务应用" class="header-anchor">#</a> JDBC事务应用</h3> <p>（<a href="#C4">返回</a><a id="G4" href="#">*</a>）</p> <p>数据库 test库 cs表</p> <table><thead><tr><th>no（int 主键 自增）</th> <th>name（varchar 标签名）</th></tr></thead> <tbody><tr><td>···</td> <td>···</td></tr></tbody></table> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @Author: 柏竹
 * @Description: 一个简洁主义...
 * @Date_Created_in: 2021-03-18 19:44
 * @Modified_By:
 * @Project： 手动事务
 */</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ManualAffairTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">Statement</span> statement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            
            <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> userName <span class="token operator">=</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> passWord <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/test?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url <span class="token punctuation">,</span> userName <span class="token punctuation">,</span> passWord<span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">//关闭自动事务</span>
            connection<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//通道</span>
            statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">//SQL操作</span>
            <span class="token comment">//新增加条数</span>
            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;INSERT INTO cs (name) VALUES('11');&quot;</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;影响数 : &quot;</span> <span class="token operator">+</span> statement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;事务是否自动模式？&quot;</span><span class="token operator">+</span> connection<span class="token punctuation">.</span><span class="token function">getAutoCommit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">//手动提交</span>
            connection<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> throwables<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//异常回滚</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                connection<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                 <span class="token keyword">if</span> <span class="token punctuation">(</span>statement <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    statement<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>connection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> throwables<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                throwables<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">/*
影响数 : 1
事务是否自动模式？false
*/</span>
</code></pre></div><h3 id="savepoints存档"><a href="#savepoints存档" class="header-anchor">#</a> Savepoints存档</h3> <p>（<a href="#C5">返回</a><a id="G5" href="#">*</a>）</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @Author: 柏竹
 * @Description: 一个简洁主义...
 * @Date_Created_in: 2021-03-18 22:18
 * @Modified_By:
 * @Project：Savepoints存档测试
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SavepointsTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">Statement</span> statement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">Savepoint</span> archiveNo1 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
        
            <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> userName <span class="token operator">=</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> passWord <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/test?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url <span class="token punctuation">,</span> userName <span class="token punctuation">,</span> passWord<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
            <span class="token comment">//关闭自动事务</span>
            connection<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//通道</span>
            statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
            <span class="token comment">//SQL操作</span>
            <span class="token comment">//新增加条数</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;影响数 : &quot;</span> <span class="token operator">+</span> statement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token string">&quot;INSERT INTO cs (name) VALUES('22a');&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//以上是SQL完成操作</span>
            archiveNo1 <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">setSavepoint</span><span class="token punctuation">(</span><span class="token string">&quot;ArchiveNo1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;影响数 : &quot;</span> <span class="token operator">+</span> statement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token string">&quot;INSERT INTO cs (name) VALUES('22b');&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
            <span class="token comment">//手动提交</span>
            connection<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> throwables<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//异常回滚</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                connection<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span>archiveNo1<span class="token punctuation">)</span><span class="token punctuation">;</span>
                connection<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>connection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> throwables<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                throwables<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="sql批处理"><a href="#sql批处理" class="header-anchor">#</a> SQL批处理</h3> <p>（<a href="#C6">返回</a><a id="G6" href="#">*</a>）</p> <p>数据库 test库 cs表</p> <table><thead><tr><th>no（int 主键 自增）</th> <th>name（varchar 标签名）</th></tr></thead> <tbody><tr><td>···</td> <td>···</td></tr></tbody></table> <p><strong>Statement通道实现批量处理</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Statement</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @Author: 柏竹
 * @Description: 一个简洁主义...
 * @Date_Created_in: 2021-03-19 20:49
 * @Modified_By:
 * @Project： Statement通道实现批量处理
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StatementTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">Statement</span> statement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> userName <span class="token operator">=</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> passWord <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/test?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url <span class="token punctuation">,</span> userName <span class="token punctuation">,</span> passWord<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
            <span class="token comment">//关闭自动事务</span>
            connection<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//通道</span>
            statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
            <span class="token comment">//SQL操作</span>
            <span class="token comment">//新增加条数</span>
            <span class="token class-name">String</span> sql1 <span class="token operator">=</span> <span class="token string">&quot;INSERT INTO cs (name) VALUES('柏竹a');&quot;</span><span class="token punctuation">;</span>
            statement<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span>sql1<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> sql2 <span class="token operator">=</span> <span class="token string">&quot;INSERT INTO cs (name) VALUES('柏竹b');&quot;</span><span class="token punctuation">;</span>
            statement<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span>sql2<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> sql3 <span class="token operator">=</span> <span class="token string">&quot;INSERT INTO cs (name) VALUES('柏竹c');&quot;</span><span class="token punctuation">;</span>
            statement<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span>sql3<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> sql4 <span class="token operator">=</span> <span class="token string">&quot;INSERT INTO cs (name) VALUES('柏竹d');&quot;</span><span class="token punctuation">;</span>
            statement<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span>sql4<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> sql5 <span class="token operator">=</span> <span class="token string">&quot;INSERT INTO cs (name) VALUES('柏竹e');&quot;</span><span class="token punctuation">;</span>
            statement<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span>sql5<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
            <span class="token comment">//批量执行SQL语句</span>
            <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ints <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> tmp <span class="token operator">:</span> ints<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;anInt : &quot;</span> <span class="token operator">+</span> tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        
            <span class="token comment">//手动提交</span>
            connection<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> throwables<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//异常回滚</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>connection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    connection<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>connection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>statement <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    statement<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> throwables<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                throwables<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>PreparedStatement通道实现批量处理</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @Author: 柏竹
 * @Description: 一个简洁主义...
 * @Date_Created_in: 2021-03-19 21:23
 * @Modified_By:
 * @Project： PreparedStatement通道实现批量处理
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PreparedStatementTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> pps <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> userName <span class="token operator">=</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> passWord <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/test?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url <span class="token punctuation">,</span> userName <span class="token punctuation">,</span> passWord<span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">//关闭自动事务</span>
            connection<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//通道</span>
            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;INSERT INTO cs (name) VALUES(?);&quot;</span><span class="token punctuation">;</span>
            pps <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">//SQL操作</span>
            <span class="token comment">//新增加条数</span>
            pps<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;柏竹a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            pps<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            pps<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;柏竹b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            pps<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            pps<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;柏竹c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            pps<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            pps<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;柏竹d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            pps<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            pps<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;柏竹e&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            pps<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">//批量执行SQL语句</span>
            <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ints <span class="token operator">=</span> pps<span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> tmp <span class="token operator">:</span> ints<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;anInt : &quot;</span> <span class="token operator">+</span> tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
            <span class="token comment">//手动提交</span>
            connection<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> throwables<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//异常回滚</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>connection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    connection<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>connection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>pps <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    pps<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> throwables<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                throwables<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="jdbc整合应用"><a href="#jdbc整合应用" class="header-anchor">#</a> JDBC整合应用</h3> <p>项目链接下载</p></div></div>  <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=JDBC" title="标签">#JDBC</a><a href="/tags/?tag=null" title="标签">#</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/03/12, 00:43:49</span></div></div> <div class="page-nav-wapper"><!----> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/backend/621sa1/" class="prev">MySQL</a></span> <span class="next"><a href="/backend/k5hxej/">Hibernate</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/blog/spel1/"><div>
            SpEL表达式
            <span class="title-tag">
              转载
            </span></div></a> <span class="date">10-10</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/e7a69f/"><div>
            06IDEA玩法
            <!----></div></a> <span class="date">09-16</span></dt></dl><dl><dd>03</dd> <dt><a href="/other/1hg722/"><div>
            ruoyi-plus 若依框架
            <!----></div></a> <span class="date">09-01</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="Sanscan12" title="联系" target="_blank" class="iconfont icon-weixin"></a><a href="https://github.com/Sanscan12" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/user/home?id=448156561" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2023
    <span> | <a href="https://beian.miit.gov.cn/">桂ICP备2022009417号-1</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.868d2b2a.js" defer></script><script src="/assets/js/2.b26d2d6f.js" defer></script><script src="/assets/js/56.52f80c93.js" defer></script>
  </body>
</html>
