<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL | 柏竹</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="https://image.bozhu12.cc/myblog/Essay/favicon.ico">
    <script language="javascript" type="text/javascript" src="/js/pgmanor-self.js"></script>
    <meta name="description" content="学习足迹 , 记录生活!">
    <meta name="Sasncan12" content="柏竹博客, 个人技术博客, 前后端端 , 技术文档">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#bd93f9">
    
    <link rel="preload" href="/assets/css/0.styles.b41e82d5.css" as="style"><link rel="preload" href="/assets/js/app.19d69fa3.js" as="script"><link rel="preload" href="/assets/js/2.b26d2d6f.js" as="script"><link rel="preload" href="/assets/js/55.63a70956.js" as="script"><link rel="prefetch" href="/assets/js/10.7dcdd9e8.js"><link rel="prefetch" href="/assets/js/100.f3af5bda.js"><link rel="prefetch" href="/assets/js/101.73de88d8.js"><link rel="prefetch" href="/assets/js/102.ab0d9a73.js"><link rel="prefetch" href="/assets/js/103.d988423e.js"><link rel="prefetch" href="/assets/js/104.7e50c512.js"><link rel="prefetch" href="/assets/js/105.75883898.js"><link rel="prefetch" href="/assets/js/106.a31e9e94.js"><link rel="prefetch" href="/assets/js/107.3e237695.js"><link rel="prefetch" href="/assets/js/108.0fe1bdc4.js"><link rel="prefetch" href="/assets/js/109.4fb13502.js"><link rel="prefetch" href="/assets/js/11.ef0fbdd8.js"><link rel="prefetch" href="/assets/js/110.946daf73.js"><link rel="prefetch" href="/assets/js/111.95f0e03e.js"><link rel="prefetch" href="/assets/js/112.98a59d1d.js"><link rel="prefetch" href="/assets/js/113.98895321.js"><link rel="prefetch" href="/assets/js/114.1419962d.js"><link rel="prefetch" href="/assets/js/115.56e434a8.js"><link rel="prefetch" href="/assets/js/116.4765eee1.js"><link rel="prefetch" href="/assets/js/117.d9b02ff9.js"><link rel="prefetch" href="/assets/js/118.8d75a747.js"><link rel="prefetch" href="/assets/js/119.5e0fde69.js"><link rel="prefetch" href="/assets/js/12.8d7bd029.js"><link rel="prefetch" href="/assets/js/120.3df76986.js"><link rel="prefetch" href="/assets/js/121.5e59bc16.js"><link rel="prefetch" href="/assets/js/122.dd6c6483.js"><link rel="prefetch" href="/assets/js/123.4e0058b3.js"><link rel="prefetch" href="/assets/js/124.85a7df77.js"><link rel="prefetch" href="/assets/js/125.ed53f4a1.js"><link rel="prefetch" href="/assets/js/126.e29f8870.js"><link rel="prefetch" href="/assets/js/127.880c218e.js"><link rel="prefetch" href="/assets/js/128.5a0c7351.js"><link rel="prefetch" href="/assets/js/129.75c5ff63.js"><link rel="prefetch" href="/assets/js/13.3cbeb6a6.js"><link rel="prefetch" href="/assets/js/130.24d04412.js"><link rel="prefetch" href="/assets/js/131.8f9b1fac.js"><link rel="prefetch" href="/assets/js/132.b29f6f24.js"><link rel="prefetch" href="/assets/js/133.83969679.js"><link rel="prefetch" href="/assets/js/14.d29f7e81.js"><link rel="prefetch" href="/assets/js/15.2e4f8cc2.js"><link rel="prefetch" href="/assets/js/16.c2cd40e1.js"><link rel="prefetch" href="/assets/js/17.687de162.js"><link rel="prefetch" href="/assets/js/18.6ec9b542.js"><link rel="prefetch" href="/assets/js/19.c927b9a4.js"><link rel="prefetch" href="/assets/js/20.6802ce4f.js"><link rel="prefetch" href="/assets/js/21.84b3b498.js"><link rel="prefetch" href="/assets/js/22.96d2aead.js"><link rel="prefetch" href="/assets/js/23.de185789.js"><link rel="prefetch" href="/assets/js/24.4c0b05ee.js"><link rel="prefetch" href="/assets/js/25.48031560.js"><link rel="prefetch" href="/assets/js/26.468456c3.js"><link rel="prefetch" href="/assets/js/27.3cbd695a.js"><link rel="prefetch" href="/assets/js/28.8d873306.js"><link rel="prefetch" href="/assets/js/29.9ca430ae.js"><link rel="prefetch" href="/assets/js/3.70818af4.js"><link rel="prefetch" href="/assets/js/30.1a971485.js"><link rel="prefetch" href="/assets/js/31.4e81dcd5.js"><link rel="prefetch" href="/assets/js/32.9f1befb2.js"><link rel="prefetch" href="/assets/js/33.c8bf090d.js"><link rel="prefetch" href="/assets/js/34.42421005.js"><link rel="prefetch" href="/assets/js/35.ee91ee76.js"><link rel="prefetch" href="/assets/js/36.47833f09.js"><link rel="prefetch" href="/assets/js/37.fe7aa186.js"><link rel="prefetch" href="/assets/js/38.c948d014.js"><link rel="prefetch" href="/assets/js/39.07b53ec9.js"><link rel="prefetch" href="/assets/js/4.5017c5ca.js"><link rel="prefetch" href="/assets/js/40.1b706b50.js"><link rel="prefetch" href="/assets/js/41.5bae9676.js"><link rel="prefetch" href="/assets/js/42.759c42f7.js"><link rel="prefetch" href="/assets/js/43.e21776c9.js"><link rel="prefetch" href="/assets/js/44.255279ff.js"><link rel="prefetch" href="/assets/js/45.ef371806.js"><link rel="prefetch" href="/assets/js/46.1e5e7a3d.js"><link rel="prefetch" href="/assets/js/47.e0649606.js"><link rel="prefetch" href="/assets/js/48.a7b8d307.js"><link rel="prefetch" href="/assets/js/49.98e8b139.js"><link rel="prefetch" href="/assets/js/5.9c242416.js"><link rel="prefetch" href="/assets/js/50.9b6aba9e.js"><link rel="prefetch" href="/assets/js/51.25ced686.js"><link rel="prefetch" href="/assets/js/52.312c0c25.js"><link rel="prefetch" href="/assets/js/53.b08c6bb3.js"><link rel="prefetch" href="/assets/js/54.1428e09b.js"><link rel="prefetch" href="/assets/js/56.33203c35.js"><link rel="prefetch" href="/assets/js/57.d09223fc.js"><link rel="prefetch" href="/assets/js/58.4830df32.js"><link rel="prefetch" href="/assets/js/59.e98710ea.js"><link rel="prefetch" href="/assets/js/6.20f6982a.js"><link rel="prefetch" href="/assets/js/60.d24f2249.js"><link rel="prefetch" href="/assets/js/61.abeabf2b.js"><link rel="prefetch" href="/assets/js/62.7bb27154.js"><link rel="prefetch" href="/assets/js/63.b9bb2eb2.js"><link rel="prefetch" href="/assets/js/64.71d50f9d.js"><link rel="prefetch" href="/assets/js/65.d1fc7229.js"><link rel="prefetch" href="/assets/js/66.0532446c.js"><link rel="prefetch" href="/assets/js/67.7463f515.js"><link rel="prefetch" href="/assets/js/68.e40172ab.js"><link rel="prefetch" href="/assets/js/69.d04abfdd.js"><link rel="prefetch" href="/assets/js/7.4c5dac4c.js"><link rel="prefetch" href="/assets/js/70.a9d113fc.js"><link rel="prefetch" href="/assets/js/71.7968de88.js"><link rel="prefetch" href="/assets/js/72.d1402eb1.js"><link rel="prefetch" href="/assets/js/73.524fcfb1.js"><link rel="prefetch" href="/assets/js/74.1be7702b.js"><link rel="prefetch" href="/assets/js/75.64e05663.js"><link rel="prefetch" href="/assets/js/76.d4a0c2fd.js"><link rel="prefetch" href="/assets/js/77.14006f72.js"><link rel="prefetch" href="/assets/js/78.4a236501.js"><link rel="prefetch" href="/assets/js/79.4cca6a09.js"><link rel="prefetch" href="/assets/js/8.6a57f7df.js"><link rel="prefetch" href="/assets/js/80.8cb1a157.js"><link rel="prefetch" href="/assets/js/81.6c432be9.js"><link rel="prefetch" href="/assets/js/82.90e93971.js"><link rel="prefetch" href="/assets/js/83.33fe6367.js"><link rel="prefetch" href="/assets/js/84.a0fb9ac3.js"><link rel="prefetch" href="/assets/js/85.2d9806cf.js"><link rel="prefetch" href="/assets/js/86.4c55855c.js"><link rel="prefetch" href="/assets/js/87.c0b71b3c.js"><link rel="prefetch" href="/assets/js/88.985574a4.js"><link rel="prefetch" href="/assets/js/89.ad80c67a.js"><link rel="prefetch" href="/assets/js/9.e43b9501.js"><link rel="prefetch" href="/assets/js/90.f7586c92.js"><link rel="prefetch" href="/assets/js/91.94d98eef.js"><link rel="prefetch" href="/assets/js/92.28db747e.js"><link rel="prefetch" href="/assets/js/93.3b6b6e43.js"><link rel="prefetch" href="/assets/js/94.f06a3d0a.js"><link rel="prefetch" href="/assets/js/95.0708c378.js"><link rel="prefetch" href="/assets/js/96.847e1946.js"><link rel="prefetch" href="/assets/js/97.f8ec7770.js"><link rel="prefetch" href="/assets/js/98.4b33cebd.js"><link rel="prefetch" href="/assets/js/99.e521633f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b41e82d5.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://image.bozhu12.cc/myblog/Essay/hendImage01.jpg" alt="柏竹" class="logo"> <span class="site-name can-hide">柏竹</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/backend/" class="nav-link router-link-active">后端</a></div><div class="nav-item"><a href="/web/" class="nav-link">前端</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/other/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/Amway/" class="nav-link">应用推荐</a></li><li class="dropdown-item"><!----> <a href="/say/say2023/" class="nav-link">说说</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/friendLink/" class="nav-link">友链</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://image.bozhu12.cc/myblog/Essay/favicon.ico"> <div class="blogger-info"><h3>柏竹</h3> <span>奋斗柏竹</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/backend/" class="nav-link router-link-active">后端</a></div><div class="nav-item"><a href="/web/" class="nav-link">前端</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/other/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/Amway/" class="nav-link">应用推荐</a></li><li class="dropdown-item"><!----> <a href="/say/say2023/" class="nav-link">说说</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/friendLink/" class="nav-link">友链</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaWeb</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>拓展技术</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>框架技术</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>数据库</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/backend/621sa1/" aria-current="page" class="active sidebar-link">MySQL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/backend/621sa1/#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header level2"><a href="/backend/621sa1/#卸载" class="sidebar-link">卸载</a></li><li class="sidebar-sub-header level2"><a href="/backend/621sa1/#数据类型" class="sidebar-link">数据类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#整型数据" class="sidebar-link">整型数据</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#浮点型" class="sidebar-link">浮点型</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#日期-时间类型" class="sidebar-link">日期 时间类型</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#字符串型" class="sidebar-link">字符串型</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#二进制数据类型" class="sidebar-link">二进制数据类型</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#大文本数据类型" class="sidebar-link">大文本数据类型</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#大数据二进制类型" class="sidebar-link">大数据二进制类型</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#枚举型" class="sidebar-link">枚举型</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#多选项" class="sidebar-link">多选项</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/backend/621sa1/#ddl-库操作" class="sidebar-link">DDL 库操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#创建数据库" class="sidebar-link">创建数据库</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#查看数据库" class="sidebar-link">查看数据库</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#修改数据库" class="sidebar-link">修改数据库</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#删除数据库" class="sidebar-link">删除数据库</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#选择数据库" class="sidebar-link">选择数据库</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/backend/621sa1/#ddl-表操作" class="sidebar-link">DDL 表操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#创建表" class="sidebar-link">创建表</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#查看表" class="sidebar-link">查看表</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#修改表" class="sidebar-link">修改表</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#删除表" class="sidebar-link">删除表</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/backend/621sa1/#dml-数据操作" class="sidebar-link">DML 数据操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#插入数据" class="sidebar-link">插入数据</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#更改数据" class="sidebar-link">更改数据</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#删除数据" class="sidebar-link">删除数据</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/backend/621sa1/#dcl-安全访问" class="sidebar-link">DCL 安全访问</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#创建用户" class="sidebar-link">创建用户</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#授权用户" class="sidebar-link">授权用户</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#查询权限" class="sidebar-link">查询权限</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#撤销权限" class="sidebar-link">撤销权限</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#删除用户" class="sidebar-link">删除用户</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#权限刷新" class="sidebar-link">权限刷新</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/backend/621sa1/#dql-数据查询" class="sidebar-link">DQL 数据查询</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#普通查询" class="sidebar-link">普通查询</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#条件查询-where" class="sidebar-link">条件查询 (WHERE)</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#指定查询-in" class="sidebar-link">指定查询 (IN)</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#范围查询-between-and" class="sidebar-link">范围查询 (BETWEEN  AND)</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#空值查询-null" class="sidebar-link">空值查询 (NULL)</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#过滤查询-distinct" class="sidebar-link">过滤查询 (DISTINCT )</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#模糊查询-like" class="sidebar-link">模糊查询 (LIKE)</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#多条件查询-and" class="sidebar-link">多条件查询  (AND)</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#多条件查询-or" class="sidebar-link">多条件查询 (OR)</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#高级查询" class="sidebar-link">高级查询</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#聚合函数" class="sidebar-link">聚合函数</a></li><li class="sidebar-sub-header level5"><a href="/backend/621sa1/#记数函数-count" class="sidebar-link">记数函数 (COUNT)</a></li><li class="sidebar-sub-header level5"><a href="/backend/621sa1/#求和函数-sum" class="sidebar-link">求和函数 (SUM)</a></li><li class="sidebar-sub-header level5"><a href="/backend/621sa1/#平均值函数-avg" class="sidebar-link">平均值函数 (AVG)</a></li><li class="sidebar-sub-header level5"><a href="/backend/621sa1/#最大值函数-max" class="sidebar-link">最大值函数 (MAX)</a></li><li class="sidebar-sub-header level5"><a href="/backend/621sa1/#最小值函数-min" class="sidebar-link">最小值函数 (MIN)</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#顺序查询-order-by" class="sidebar-link">顺序查询 (ORDER BY)</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#分组查询-group-by" class="sidebar-link">分组查询 (GROUP BY)</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#限制查询-limit" class="sidebar-link">限制查询 (LIMIT)</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#别名" class="sidebar-link">别名</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#表别名" class="sidebar-link">表别名</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#字段别名" class="sidebar-link">字段别名</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#多表关系" class="sidebar-link">多表关系</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#连接查询-cross-join" class="sidebar-link">连接查询(CROSS JOIN)</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#自然连接-natural-join" class="sidebar-link">自然连接(NATURAL JOIN)</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#合并结果集-union" class="sidebar-link">合并结果集 (UNION)</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#内连接-inner-join" class="sidebar-link">内连接 (INNER JOIN)</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#外连接-outer-join" class="sidebar-link">外连接 (OUTER JOIN)</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#子查询" class="sidebar-link">子查询</a></li><li class="sidebar-sub-header level5"><a href="/backend/621sa1/#where中子查询" class="sidebar-link">where中子查询</a></li><li class="sidebar-sub-header level5"><a href="/backend/621sa1/#from中子查询" class="sidebar-link">from中子查询</a></li><li class="sidebar-sub-header level5"><a href="/backend/621sa1/#select中子查询" class="sidebar-link">select中子查询</a></li><li class="sidebar-sub-header level5"><a href="/backend/621sa1/#in" class="sidebar-link">IN</a></li><li class="sidebar-sub-header level5"><a href="/backend/621sa1/#exists" class="sidebar-link">EXISTS</a></li><li class="sidebar-sub-header level5"><a href="/backend/621sa1/#any" class="sidebar-link">ANY</a></li><li class="sidebar-sub-header level5"><a href="/backend/621sa1/#all" class="sidebar-link">ALL</a></li><li class="sidebar-sub-header level5"><a href="/backend/621sa1/#比较运算符" class="sidebar-link">比较运算符</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#查新执行顺序" class="sidebar-link">查新执行顺序</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#sql优化" class="sidebar-link">SQL优化</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/backend/621sa1/#完整性" class="sidebar-link">完整性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#实体完整性" class="sidebar-link">实体完整性</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#单字段主键" class="sidebar-link">单字段主键</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#唯一约束" class="sidebar-link">唯一约束</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#字段自动增加" class="sidebar-link">字段自动增加</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#域完整性" class="sidebar-link">域完整性</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#数据类型-2" class="sidebar-link">数据类型</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#非空约束" class="sidebar-link">非空约束</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#默认约束" class="sidebar-link">默认约束</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#无符号约束" class="sidebar-link">无符号约束</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#约束范围" class="sidebar-link">约束范围</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#引用完整性" class="sidebar-link">引用完整性</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#外键约束" class="sidebar-link">外键约束</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/backend/621sa1/#索引" class="sidebar-link">索引</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#索引创建" class="sidebar-link">索引创建</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#单列索引-normal" class="sidebar-link">单列索引 (NORMAL)</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#唯一索引-unique" class="sidebar-link">唯一索引 (UNIQUE )</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#全文索引-fulltext" class="sidebar-link">全文索引 (FULLTEXT)</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#空间索引-spatial" class="sidebar-link">空间索引 (SPATIAL)</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#索引删除" class="sidebar-link">索引删除</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/backend/621sa1/#函数" class="sidebar-link">函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#数学函数" class="sidebar-link">数学函数</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#字符串函数" class="sidebar-link">字符串函数</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#日期与时间的函数" class="sidebar-link">日期与时间的函数</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#条件判断函数" class="sidebar-link">条件判断函数</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#加密函数" class="sidebar-link">加密函数</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/backend/621sa1/#事务" class="sidebar-link">事务</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#事务acid特性" class="sidebar-link">事务ACID特性</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#事务安全问题" class="sidebar-link">事务安全问题</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#事务隔离级别" class="sidebar-link">事务隔离级别</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#未提交-read-uncommitted" class="sidebar-link">未提交 (READ  UNCOMMITTED)</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#已读提交-read-committed" class="sidebar-link">已读提交 (READ  COMMITTED)</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#可重复读-repeatable-read" class="sidebar-link">可重复读 (REPEATABLE READ)</a></li><li class="sidebar-sub-header level4"><a href="/backend/621sa1/#顺序读-serializable" class="sidebar-link">顺序读 (SERIALIZABLE)</a></li><li class="sidebar-sub-header level3"><a href="/backend/621sa1/#隔离级别锁的情况" class="sidebar-link">隔离级别锁的情况</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/backend/621sa1/#锁机制" class="sidebar-link">锁机制</a></li></ul></li><li><a href="/backend/0ygxqu/" class="sidebar-link">JDBC</a></li><li><a href="/backend/k5hxej/" class="sidebar-link">Hibernate</a></li><li><a href="/backend/zi2hq0/" class="sidebar-link">Mybatis</a></li><li><a href="/backend/ldn760/" class="sidebar-link">Redis</a></li><li><a href="/backend/redis2/" class="sidebar-link">Redis原理篇</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringMVC</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringBoot</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringClound</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Ruoyi-Vue-Plus</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper bg-style-1"><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/backend/#后端" data-v-06225672>后端</a></li><li data-v-06225672><a href="/backend/#数据库" data-v-06225672>数据库</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="javascript:;" data-v-06225672>柏竹</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2020-02-18</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">MySQL<!----></h1>  <div class="theme-vdoing-content content__default"><h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <p><a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener noreferrer">点击官方链接下载<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>配置环境</strong></p> <p>在MySQL根目录下的 <code>bin文件</code> 在 变量 <code>Path</code> 增添 。如</p> <div class="language-text extra-class"><pre class="language-text"><code>D:\MySQL\mysql-8.0.22-winx64\bin
</code></pre></div><p><strong>配置文件</strong></p> <p>在MySQL根目录下的新建 <code>my.ini文件</code> 和 <code>data文件夹</code> , 配置参数</p> <div class="language-text extra-class"><pre class="language-text"><code>[mysql]
# 设置mysql客户端默认字符集
default-character-set=utf8
[mysqld] 
# 设置3306端口
port = 3306 
# 设置MySQL根目录
basedir=D:\MySQL\mysql-8.0.22-winx64
# 设置MySQL数据库数据存放目录
datadir=D:\MySQL\mysql-8.0.22-winx64\data 
# 允许最大连接数
max_connections=200 
# 服务端使用的字符集默认为UTF8
character-set-server=utf8 
# 创建新表时将使用的默认存储引擎
default-storage-engine=INNODB
# 设置时间戳
explicit_defaults_for_timestamp=true
</code></pre></div><p><strong>安装MySQL</strong></p> <p><strong>初始化数据库</strong> 在MySQL的根目录 <code>bin文件夹</code> 里 ，管理员身份打开cmd执行指令</p> <div class="language-cmd extra-class"><pre class="language-text"><code>mysqld --initialize-insecure --user=mysql
</code></pre></div><p><strong>查看是否安装</strong> 然后安装执行，cmd执行指令</p> <div class="language-cmd extra-class"><pre class="language-text"><code>mysqld install
</code></pre></div><p>如果未提示成功，请用管理员身份打开重新执行cmd执行指令</p> <p><strong>启动MySQL服务</strong>。cmd执行指令</p> <div class="language-cmd extra-class"><pre class="language-text"><code>net start mysql
</code></pre></div><p>也可以在 <strong>控制面板</strong> 打开服务 进行启动 MySQL服务</p> <p>进入myslq，无密码执行，cmd执行指令</p> <div class="language-cmd extra-class"><pre class="language-text"><code>mysql -uroot -p
</code></pre></div><blockquote><p>PS：如果本地IP访问不到，需要重新启动服务，在cmd 进入 <code>bin文件夹</code> 进行启动服务</p></blockquote> <h2 id="卸载"><a href="#卸载" class="header-anchor">#</a> 卸载</h2> <ol><li>管理员运行cmd关闭 MySQL服务，cmd执行指令</li></ol> <div class="language-cmd extra-class"><pre class="language-text"><code>net stop mysql8
</code></pre></div><ol start="2"><li>删除MySQL服务</li></ol> <div class="language-cmd extra-class"><pre class="language-text"><code>sc delete mysql8 
或者 
mysql remove mysql8
</code></pre></div><ol start="3"><li>删除mysqlDB目录文件(安装MySQL时my.ini指定的目录)</li></ol> <h2 id="数据类型"><a href="#数据类型" class="header-anchor">#</a> 数据类型</h2> <h3 id="整型数据"><a href="#整型数据" class="header-anchor">#</a> 整型数据</h3> <table><thead><tr><th>整型数据</th> <th>字节数</th> <th>无符号的取值范围</th> <th>有符号的取值范围</th></tr></thead> <tbody><tr><td>TINYINT</td> <td>1</td> <td>0~225</td> <td>-125~127</td></tr> <tr><td>SMALLINT</td> <td>2</td> <td>0-65535</td> <td>-32768~32768</td></tr> <tr><td>MEDIUMINT</td> <td>3</td> <td>0~16777215</td> <td>···</td></tr> <tr><td>INT</td> <td>4</td> <td>0-4294967295</td> <td>···</td></tr> <tr><td>BIGINT</td> <td>8</td> <td>0~18446744073709551615</td> <td></td></tr></tbody></table> <h3 id="浮点型"><a href="#浮点型" class="header-anchor">#</a> 浮点型</h3> <table><thead><tr><th>浮点型 数据</th> <th>字节数</th> <th>说明</th></tr></thead> <tbody><tr><td>FLOAT[(M,D)]</td> <td>4</td> <td>M指定显示长度，D指定小数位数，浮点</td></tr> <tr><td>DOUBLE[(M,D)]</td> <td>8</td> <td>M指定显示长度，D指定小数位数，浮点</td></tr> <tr><td><strong>定点数型数据</strong></td> <td>-</td> <td>-</td></tr> <tr><td>DECIMAL(()M , 2)</td> <td>M+2</td> <td>定点数，存储 高精度数据</td></tr></tbody></table> <h3 id="日期-时间类型"><a href="#日期-时间类型" class="header-anchor">#</a> 日期 时间类型</h3> <table><thead><tr><th>数据类型</th> <th>字节数</th> <th>取值范围</th> <th>日期格式</th> <th>零值</th></tr></thead> <tbody><tr><td>YEAR</td> <td>1</td> <td>1901~2155</td> <td>yyyy</td> <td>0000</td></tr> <tr><td>DATE</td> <td>4</td> <td>1000-01-01-9999-12-3</td> <td>yyyy-MM-dd</td> <td>0000-00-00</td></tr> <tr><td>TIME</td> <td>3</td> <td>-838:59:59-838:59:59</td> <td>HH:mm:ss</td> <td>00:00:00</td></tr> <tr><td>DATETIME</td> <td>8</td> <td>11</td> <td>yyyy-MM-dd HH:mm:ss</td> <td>0000-00-00 00:00:00</td></tr> <tr><td>TIMESTAMP(时间戳)</td> <td>4</td> <td>1970-01-01 00:00:01~2038-01-19 03:14:07</td> <td>yyyy-MM-dd HH:mm:ss</td> <td>0000-00-00 00:00:00</td></tr></tbody></table> <h3 id="字符串型"><a href="#字符串型" class="header-anchor">#</a> 字符串型</h3> <table><thead><tr><th>字符串类型(单位：字节)</th> <th>字节状态</th> <th>优点</th></tr></thead> <tbody><tr><td>CHAR((int)Max)</td> <td>固定</td> <td>查询快</td></tr> <tr><td>VARCHAR((int)Max)</td> <td>动态</td> <td>省空间</td></tr></tbody></table> <h3 id="二进制数据类型"><a href="#二进制数据类型" class="header-anchor">#</a> 二进制数据类型</h3> <table><thead><tr><th>二进制数据类型(单位：长度)</th> <th>长度状态</th></tr></thead> <tbody><tr><td>BINARY((int)Max)</td> <td>固定</td></tr> <tr><td>VARBINARY((int)Max)</td> <td>动态</td></tr></tbody></table> <p><em>BINARY类型的长度是固定的，如果长度不足最大长度,后面用“0”对齐，直到指定长度。</em></p> <h3 id="大文本数据类型"><a href="#大文本数据类型" class="header-anchor">#</a> 大文本数据类型</h3> <table><thead><tr><th>大文本数据类型</th> <th>存储范围(单位：字节)</th></tr></thead> <tbody><tr><td>TINYTEXT</td> <td>0~255字节</td></tr> <tr><td>TEXT</td> <td>0~65535字节</td></tr> <tr><td>MEDIUMTEXT</td> <td>0~16777215字节</td></tr> <tr><td>LONGTEXT</td> <td>0~4294967295字节</td></tr></tbody></table> <h3 id="大数据二进制类型"><a href="#大数据二进制类型" class="header-anchor">#</a> 大数据二进制类型</h3> <table><thead><tr><th>特殊二进制类型</th> <th>存储范围(单位：字节)</th></tr></thead> <tbody><tr><td>TINYBLOB</td> <td>0~255字节</td></tr> <tr><td>BLOB</td> <td>0-65535字节</td></tr> <tr><td>MEDIUMBLOB</td> <td>0~16777215字节</td></tr> <tr><td>LONGBLOB</td> <td>0-4294967295字节</td></tr></tbody></table> <h3 id="枚举型"><a href="#枚举型" class="header-anchor">#</a> 枚举型</h3> <p>ENUM枚举型，单选项</p> <div class="language-mysql extra-class"><pre class="language-text"><code>ENUM('值1','值2'···'值n')
</code></pre></div><h3 id="多选项"><a href="#多选项" class="header-anchor">#</a> 多选项</h3> <div class="language-mysql extra-class"><pre class="language-text"><code>SET('值1','值2'···'值n')
</code></pre></div><h2 id="ddl-库操作"><a href="#ddl-库操作" class="header-anchor">#</a> DDL 库操作</h2> <p>DDL (Data Definition Language)：数据定义语言，操作增删改查的操作</p> <p>**操作关键字 : ** <code>CREATE</code> , <code>DROP</code> , <code>ALTER</code> , <code>SHOW</code> , <code>USE</code></p> <h3 id="创建数据库"><a href="#创建数据库" class="header-anchor">#</a> 创建数据库</h3> <table><thead><tr><th>SQL语句</th> <th>说明</th></tr></thead> <tbody><tr><td>==CREATE DATABASE 库名;==</td> <td>创建库</td></tr> <tr><td>==CREATE DATABASE IF NOT EXISTS 库名;==</td> <td>判断不存在，则创建</td></tr> <tr><td>==CREATE DATABASE 库名 CHARACTER SET 编码方式;==</td> <td>指定编码创建</td></tr> <tr><td>==CREATE DATABASE 库名 CHARACTER SET 编码方式 COLLATE 排序规则;==</td> <td>指定编码和排序规则创建</td></tr></tbody></table> <blockquote><p><strong>CREATE DATABASE</strong> ：创建数据库
<strong>IF NOT EXISTS</strong> ：检查是否已存在的状态
<strong>CHARACTER SET</strong>：设置编码方式
<strong>COLLATE</strong> ：排序规则</p></blockquote> <h3 id="查看数据库"><a href="#查看数据库" class="header-anchor">#</a> 查看数据库</h3> <p>查看当前数据库：
==SHOW DATABASES;==</p> <p>查看创建的库：
==SHOW CREATE DATABASE 库名;==</p> <p>查看当前所选的数据库：
==SELECT DATABASE();==</p> <h3 id="修改数据库"><a href="#修改数据库" class="header-anchor">#</a> 修改数据库</h3> <table><thead><tr><th>SQL语句</th> <th>说明</th></tr></thead> <tbody><tr><td>==ALTER DATABASE 库名;==</td> <td>修改库</td></tr> <tr><td>==ALTER DATABASE 库名 CHARACTER SET 编码方式;==</td> <td>指定编码更改</td></tr> <tr><td>==ALTER DATABASE 库名 CHARACTER SET 编码方式 COLLATE 排序规则;==</td> <td>指定编码和排序规则更改</td></tr></tbody></table> <blockquote><p><strong>ALTER DATABASE</strong> ：修改数据库
<strong>IF NOT EXISTS</strong> ：检查是否已存在的状态
<strong>CHARACTER SET</strong> ：设置编码方式
<strong>COLLATE</strong> ：排序规则</p></blockquote> <h3 id="删除数据库"><a href="#删除数据库" class="header-anchor">#</a> 删除数据库</h3> <p>==DROP DATABASE 库名;==</p> <h3 id="选择数据库"><a href="#选择数据库" class="header-anchor">#</a> 选择数据库</h3> <p>==USE 库名;==</p> <h2 id="ddl-表操作"><a href="#ddl-表操作" class="header-anchor">#</a> DDL 表操作</h2> <p>DDL (Data Definition Language):数据定义语言，定义数据库对象:库、表、列等</p> <p>**操作关键字 : ** <code>CREATE</code> , <code>DROP</code> , <code>ALTER</code> , <code>SHOW</code> , <code>USE</code></p> <h3 id="创建表"><a href="#创建表" class="header-anchor">#</a> 创建表</h3> <div class="language-mysql extra-class"><pre class="language-text"><code>CREATE TABLE 表名(
   字段名1 数据类型 [完整性约束条件] [COMMENT '注释内容'],
   字段名2 数据类型 [完整性约束条件] [COMMENT '注释内容'],
   ·······
   字段名n 数据类型 [完整性约束条件] [COMMENT '注释内容'],
   [完整性约束条件](字段1,字段2,·····,字段n)
)[编码集设置];
</code></pre></div><blockquote><p>**编码集设置 : **
CHARACTER SET 字符集名 [校对规则]
**校对规则 : **
COLLATE 校对名</p></blockquote> <p><strong>快速创建拷贝表</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>CREATE TABLE 表名 AS SELECT * FROM 拷贝表
</code></pre></div><p>PS : AS 后面 是拷贝制定查询的数据</p> <h3 id="查看表"><a href="#查看表" class="header-anchor">#</a> 查看表</h3> <p>查看指定表字段结构
==DESC 表名;==</p> <p>查看当前数据库所有表
==SHOW TABLES;==</p> <p>查看表的详细结构
==SHOW CREATE TABLE 表名;==</p> <h3 id="修改表"><a href="#修改表" class="header-anchor">#</a> 修改表</h3> <p><strong>修改表名</strong></p> <p>==RENAME TABLE 表名 TO 新表名;==
==ALTER TABLE 表名 RENAME 新表名;==</p> <p><strong>增加字段</strong></p> <p>==ALTER TABLE 表名 ADD 字段名 数据类型;==</p> <p><strong>字段 修改 与 顺序</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>ALTER TABLE 表名 MODIFY 字段名 数据类型 [更改字段循序 | 完整性约束条件] [COMMENT '内容'];
</code></pre></div><blockquote><p>更改字段循序 :
FIRST | AFTER 字段名2</p> <p><strong>FIRST</strong>：指定字段为表的第一个
<strong>AFTER</strong>：指定字段插入字段2的后面</p></blockquote> <p><strong>修改字段名</strong></p> <p>==ALTER TABLE 表名 CHANGE 字段名 新字段名 新字段类型;==</p> <p><strong>修改表字符集</strong></p> <p>==ALTER TABLE 表名 CHARACTER SET 字符集类型;==</p> <p><strong>删除字段</strong></p> <p>==ALTER TABLE 表名 DROP 字段名;==</p> <h3 id="删除表"><a href="#删除表" class="header-anchor">#</a> 删除表</h3> <p>==DROP TABLE 表名;==</p> <h2 id="dml-数据操作"><a href="#dml-数据操作" class="header-anchor">#</a> DML 数据操作</h2> <p>DML (Data Manipulation Language):数据操作语言，定义数据库记录(数据)增删改 的操作</p> <p>**操作关键字 : ** <code>INSERT</code> , <code>UPDATA</code> , <code>DELECT</code></p> <h3 id="插入数据"><a href="#插入数据" class="header-anchor">#</a> 插入数据</h3> <p><strong>一条数据添加</strong>
==INSERT INTO 表名 [(字段名1 [，字段名2. . .])] VALUES(值1 [,值2. . .]);==
<strong>多条数据添加</strong>
==INSERT INTO 表名 [(字段名)] VALUES (字段值1),(字段值2)...;==</p> <p><strong>注意：</strong></p> <ul><li>插入字段与它的数据类型位置是一一对应的</li> <li>数据类型对应的值，字段值是非数值，则两侧必须添加单引号</li> <li>null设置为空</li> <li>数据的大小应在字段的数据类型规定范围内</li> <li>如果要插入所有字段数据时可以省写字段，但必须按表中字段顺序写值</li> <li>尽可能避免字段数据值写入的是 <code>null</code></li></ul> <h3 id="更改数据"><a href="#更改数据" class="header-anchor">#</a> 更改数据</h3> <p><strong>更改单表数据</strong>
==UPDATE 表名 SET 字段名1 = 字段值1 [,字段名2 = 值2..] [WHERE 条件表达式];==
<strong>更改多表数据</strong>
==UPDATE 表名1 , 表名2  SET {修改字段值，可跨表修改} [WHERE 条件表达式];==</p> <p><strong>注意：</strong></p> <ul><li>逻辑运算符有： and(并且)、or(或者)、not(取非)</li> <li>如果更改字段无条件表达式，则指定全部该字段的值一致</li></ul> <h3 id="删除数据"><a href="#删除数据" class="header-anchor">#</a> 删除数据</h3> <p>==DELETE FROM 表名 [WHERE 条件表达式];==
==TRUNCATE TABLE 表名;==
<strong>多表删除</strong>
==DELETE {表名1,表名2...} FROM {表名1,表名2...} [WHERE 条件表达式];==</p> <p><strong>注意：</strong></p> <ul><li>如果无条件表达式，则删除全部数据</li> <li>DELETE删除可找回</li> <li>TRUNCATE删除不可找回，类似格式化数据，执行快</li> <li>不能删除某列的值(可修改数据值置NULL)</li> <li>多表删除 建议WHERE过滤他们字段的关系</li> <li>多表中的每张表需要逗号分隔</li></ul> <h2 id="dcl-安全访问"><a href="#dcl-安全访问" class="header-anchor">#</a> DCL 安全访问</h2> <p>DCL (Data Control Language)︰数据控制语言，用来定义访问权限和安全级别</p> <p><strong>操作关键字：</strong> <code>GRANT</code> , <code>REVOKE</code></p> <h3 id="创建用户"><a href="#创建用户" class="header-anchor">#</a> 创建用户</h3> <p>==CREATE USER '用户名'@'指定ip' IDENTIFIED BY '密码';==
==CREATE USER '用户名'@'%' IDENTIFIED BY '密码';==</p> <p>指定ip / 任意ip 可登录</p> <p>==CREATE USER 'bozhu'@'%' IDENTIFIED BY '123123';==</p> <h3 id="授权用户"><a href="#授权用户" class="header-anchor">#</a> 授权用户</h3> <p>==GRANT 权限1[,权限2...权限n] ON 库名.* TO 用户名@指定ip;==
==GRANT ALL ON <code>*</code>.<code>*</code> TO 用户名@指定ip;==</p> <p>指定权限 / 所有权限 用户授权
(指定权限自行查询)</p> <p>==GRANT ALL PRIVILEGES ON <em>.</em> TO 'bozhu'@'%' IDENTIFIED BY 'bozhu' WITH GRANT OPTION;==</p> <h3 id="查询权限"><a href="#查询权限" class="header-anchor">#</a> 查询权限</h3> <p>==SHOW GRANTS FOR 用户名@指定IP;==
==SHOW GRANTS FOR 用户名@‘%’;==</p> <p>查询指定 / 查询所有 IP的权限情况</p> <h3 id="撤销权限"><a href="#撤销权限" class="header-anchor">#</a> 撤销权限</h3> <p>==REVOKE 权限1[,权限2...权限n] ON 库名.* FROM 用户名@指定IP;==</p> <h3 id="删除用户"><a href="#删除用户" class="header-anchor">#</a> 删除用户</h3> <p>==DROP USER 用户名@指定IP==</p> <h3 id="权限刷新"><a href="#权限刷新" class="header-anchor">#</a> 权限刷新</h3> <p>==flush privileges;==</p> <blockquote><p>修改后需要刷新生效权限</p></blockquote> <h2 id="dql-数据查询"><a href="#dql-数据查询" class="header-anchor">#</a> DQL 数据查询</h2> <p>DQL(Data Query Language)：数据查询语言，用来查询记录(数据)查询
数据库执行DQL语句不会对数据进行改变，而是让数据库发送结果集给客户端
查询返回的结果集是一张虚拟表</p> <p><strong>操作关键字：</strong> <code>SELECT</code></p> <p><strong>SELECT的语法结构：</strong></p> <div class="language-MYSQL extra-class"><pre class="language-text"><code>SELECT (* | {字段名1 [别名][,字段名2[别名]····,字段名n[别名]]} ) FROM 表名 [可选参数];
</code></pre></div><div class="language-mysql extra-class"><pre class="language-text"><code>SELECT * FROM 表名;
</code></pre></div><p><strong>参数：</strong></p> <ul><li><p>[WHERE 条件表达式];</p></li> <li><p>[GROUP BY 字段名 [HAVING 条件表达式2]] ;</p></li> <li><p>[ORDER BY 字段名 [ASC | DESC]];</p></li> <li><p>[LIMIT [OFFSET] (int)记录数];</p></li> <li><p><strong>别名</strong>：代替字段名</p></li> <li><p>**DISTINCT：**过滤表字段中重复的值(数据)，如果指定是多个字段，而且指定的字段值相同，则过滤重复的值！！！</p></li> <li><p>**WHERE：**指定查询条件</p></li> <li><p>**GROUP BY：**将查询结果按指定字段进行分组</p> <ul><li>**HAVING：**对分组后的结果进行过滤</li></ul></li> <li><p>**ORDER BY：**将查询结果按指定字段进行排序，排列方式有参数ASC(升序)、DESC(降序)控制，默认为ASC(升序)</p></li> <li><p>**LIMIT：**限制查询结果的数量，后面有可有两个参数</p> <ul><li>**OFFSET：**表示偏移量，如果偏移量为0则从第一条开始,。不指定参数1，其默认值为0。</li> <li>**记录数：**表示返回查询记录的条数</li></ul></li></ul> <h3 id="普通查询"><a href="#普通查询" class="header-anchor">#</a> 普通查询</h3> <h4 id="条件查询-where"><a href="#条件查询-where" class="header-anchor">#</a> 条件查询 (WHERE)</h4> <div class="language-mysql extra-class"><pre class="language-text"><code>··· WHERE (条件表达式);

# 查询 age大于等于25 
SELECT * FROM stu WHERE age&gt;=25;
# 查询 age大于等于25 指定显示 sname
SELECT sname FROM stu WHERE age&gt;=25;
# 查询 指定gender值非male
SELECT * FROM stu WHERE gender!='male';
SELECT * FROM stu WHERE gender&lt;&gt;'male';
SELECT * FROM stu WHERE NOT gender='male';
</code></pre></div><h4 id="指定查询-in"><a href="#指定查询-in" class="header-anchor">#</a> 指定查询 (IN)</h4> <p>查指定字段</p> <div class="language-mysql extra-class"><pre class="language-text"><code>··· WHERE 字段名 [NOT] IN (值1，值2，···);

# 查询 指定sid
SELECT * FROM stu WHERE sid IN ('S_1011' , 'S_1004');
# 查询 指定sid 
SELECT * FROM stu WHERE sid NOT IN ('S_1011' , 'S_1004');
</code></pre></div><h4 id="范围查询-between-and"><a href="#范围查询-between-and" class="header-anchor">#</a> 范围查询 (BETWEEN  AND)</h4> <p>查指定字段的范围值</p> <div class="language-mysql extra-class"><pre class="language-text"><code>··· WHERE 字段名 [NOT] BETWEEN (int)值1 AND (int)值2;

# 查询 指定age 12 - 28的范围
SELECT * FROM stu WHERE age BETWEEN 12 AND 28;
# 查询 指定age 非12 - 28的范围
SELECT * FROM stu WHERE age NOT BETWEEN 12 AND 28;
</code></pre></div><p>查询字段名的值1和值2的范围，前提2值必须大于1值</p> <h4 id="空值查询-null"><a href="#空值查询-null" class="header-anchor">#</a> 空值查询 (NULL)</h4> <p>查字段NULL值</p> <div class="language-mysql extra-class"><pre class="language-text"><code>··· WHERE 字段名 IS [NOT] NULL;

# 查询 age为空的
SELECT * FROM stu WHERE age IS NULL;
# 查询 gender不为空的
SELECT * FROM stu WHERE gender IS NOT NULL;
</code></pre></div><h4 id="过滤查询-distinct"><a href="#过滤查询-distinct" class="header-anchor">#</a> 过滤查询 (DISTINCT )</h4> <p>过滤重复字段</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT DISTINCT * | {字段1,字段2...字段n} FROM 表名 [···];

# 查询表中不重复的字段
SELECT DISTINCT * FROM stu;
</code></pre></div><h4 id="模糊查询-like"><a href="#模糊查询-like" class="header-anchor">#</a> 模糊查询 (LIKE)</h4> <p>寻找匹配的字符串</p> <div class="language-mysql extra-class"><pre class="language-text"><code>··· WHERE 字段名 [NOT] LIKE '匹配字符串%_';

# 查询 sname 前缀有字符 l 
SELECT * FROM stu WHERE sname LIKE 'l%';
# 查询 sname 第5个字符为 S 
SELECT * FROM stu WHERE sname LIKE '_____S%';
</code></pre></div><p><strong>注意：</strong></p> <blockquote><p><code>%</code> 任意0 - n个字符
<code>_</code> 一个字符，通配符(未知数)
<code>\</code> 进行转义
<code>\%</code> 为 <code>%</code></p></blockquote> <h4 id="多条件查询-and"><a href="#多条件查询-and" class="header-anchor">#</a> 多条件查询  (AND)</h4> <p>(交集)连接两个或者多个查询条件</p> <div class="language-mysql extra-class"><pre class="language-text"><code>··· WHERE 条件表达式1 [AND 条件表达式2 [··· AND 条件表达式n]];

#查询 age&gt;16 &amp;&amp; age&lt;28
SELECT * FROM stu WHERE age&gt;16 AND age&lt;28;
#查询 age&gt;16 &amp;&amp; age&lt;28 且不能有 25
SELECT * FROM stu WHERE age&gt;16 AND age&lt;28 AND age != 25;
</code></pre></div><h4 id="多条件查询-or"><a href="#多条件查询-or" class="header-anchor">#</a> 多条件查询 (OR)</h4> <p>(并集)记录满足任意一个条件即被查出</p> <div class="language-mysql extra-class"><pre class="language-text"><code>··· WHERE 条件表达式1 [OR 条件表达式2 [··· OR 条件表达式n]];

# 查询 age&lt;16 || age&gt;28
SELECT * FROM stu WHERE age&lt;16 OR age&gt;28;
# 查询 age&lt;16 || age&gt;28 且不能有 5
SELECT * FROM stu WHERE  age != 5 AND age&lt;16 OR age&gt;28;
</code></pre></div><p><strong>OR和AND一起用的情况：</strong>
AND的优先级高于OR，因此当两者在一起使用时，应该先运算AND两边的条件表达式，再运算OR两边的条件表达式</p> <h3 id="高级查询"><a href="#高级查询" class="header-anchor">#</a> 高级查询</h3> <h4 id="聚合函数"><a href="#聚合函数" class="header-anchor">#</a> 聚合函数</h4> <h5 id="记数函数-count"><a href="#记数函数-count" class="header-anchor">#</a> 记数函数 (COUNT)</h5> <p>统计不为null的记录条数</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT COUNT((*) | (字段名)) 
FROM 表名 [···];

# 查询 emp2表 总记录数
SELECT COUNT(*) FROM emp2 ;
# 查询 emp2表 comm记录数
SELECT COUNT(comm) FROM emp2 ;
</code></pre></div><h5 id="求和函数-sum"><a href="#求和函数-sum" class="header-anchor">#</a> 求和函数 (SUM)</h5> <p>求出表中某个字段所有值的总和</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT SUM(字段名1)[,SUM(字段名2)...,SUM(字段名n)] 
FROM 表名 [···];

# 查询 emp2表 sal字段总和 
SELECT SUM(sal) FROM emp2;
# 查询 emp2表 sal+comm字段 总和(IFNULL(comm , 0) 如果字段值为NULL 则至为0)
SELECT SUM(sal+ IFNULL(comm , 0) ) FROM emp2;
</code></pre></div><h5 id="平均值函数-avg"><a href="#平均值函数-avg" class="header-anchor">#</a> 平均值函数 (AVG)</h5> <p>求出某个字段所有值的平均值</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT AVG(字段名1)[,AVG(字段名2)...,AVG(字段名n)] 
FROM 表名 [···];

# 查询 emp2表 sal字段平均值
SELECT AVG(sal) FROM emp2;
</code></pre></div><h5 id="最大值函数-max"><a href="#最大值函数-max" class="header-anchor">#</a> 最大值函数 (MAX)</h5> <p>用于求出某个字段的最大值，语法格式:</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT MAX(字段名1)[,MAX(字段名2)...,MAX(字段名n)] 
FROM 表名 [···];

# 查询 emp2表 mgr字段最大值
SELECT MAX(mgr) FROM emp2;
</code></pre></div><h5 id="最小值函数-min"><a href="#最小值函数-min" class="header-anchor">#</a> 最小值函数 (MIN)</h5> <p>用于求出某个字段的最小值，语法格式:</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT MIN(字段名1)[,MIN(字段名2)...,MIN(字段名n)] 
FROM 表名 [···];

# 查询 emp2表 mgr字段最小值
SELECT MIN(mgr) FROM emp2;
</code></pre></div><h4 id="顺序查询-order-by"><a href="#顺序查询-order-by" class="header-anchor">#</a> 顺序查询 (ORDER BY)</h4> <p>对查询结果进行排序，语法格式:</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT * | {字段1,字段2...字段n} FROM 表名 
ORDER BY 字段名1 [ASC | DESC] [,字段名2 [ASC| DESC]...,字段名n [ASC | DESC]];

# 查询 排序 emp2 表的 mgr(降序)
SELECT * FROM emp2 ORDER BY mgr DESC;
# 查询 排序 emp2表 的 先排序mar ，相同值的情况排序sal (默认升序)
SELECT * FROM emp2 ORDER BY mgr , sal;
</code></pre></div><p><strong>ORDER BY</strong>：指定字段进行排序
<strong>SELECT</strong>：指定查询的字段
<strong>ASC</strong>升序(默认)、<strong>DESC</strong>降序</p> <p><strong>注意</strong>：指定字段升序排列时，某条字段值为NULL,则这条记录会在第一条显示，因NULL值被认为是最小值</p> <h4 id="分组查询-group-by"><a href="#分组查询-group-by" class="header-anchor">#</a> 分组查询 (GROUP BY)</h4> <p>对字段值进行分组查询</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT 字段名1 | [···] FROM 表名
GROUP BY 字段名1,字段2,···[HAVING 条件表达式 | ···];

# 查询 emp2表 以daptno字段分组 进行sal求和 
SELECT deptno , SUM(sal) FROM emp2 GROUP BY deptno;
# 查询 emp2表 以daptno字段分组 每个dapthon分组的记录数 并排序
SELECT deptno , COUNT(*) FROM emp2 GROUP BY deptno ORDER BY deptno;
# 查询 emp2表 以daptno字段分组 deptno值为30 过滤
SELECT deptno , SUM(sal) FROM emp2 GROUP BY deptno HAVING deptno != 30;
# 查询 emp2表 以daptno字段分组 mgr值小于7800 过滤
SELECT deptno , COUNT(*) FROM emp2 WHERE mgr&gt;7800 GROUP BY deptno;
</code></pre></div><p><strong>注意：</strong></p> <ol><li>GROUP BY后面的字段 是指定字段进行分组</li> <li>聚合函数一起使用</li> <li>查询过滤使用 <code>HAVING</code> 并非 <code>WHERE</code></li> <li>HAVING不能单独出现，只能存在GROUP BY后面</li> <li>非指定字段分组不能显示字段
如：(指定字段分组是deptno字段，但不能显示empno字段)
SELECT empno , SUM(sal) FROM emp2 GROUP BY deptno;</li> <li>指定分组的字段可进行排序</li></ol> <p><strong>WHERE和HAVING区别</strong></p> <p><strong>WHERE语句</strong>：分组前进行过滤,不能使用聚合函数
<strong>HAVING语句</strong>：分组后进行过滤，可使用聚合函数</p> <h4 id="限制查询-limit"><a href="#限制查询-limit" class="header-anchor">#</a> 限制查询 (LIMIT)</h4> <p>限制查询结果的数量</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT 字段名1[,字段名2,...字段n] FROM 表名 
LIMIT [(int)偏移量，](int)显示数;

# 查询 emp2表 sal最小5个
SELECT * FROM emp2 ORDER BY sal LIMIT 0	 , 5;
# 查询 emp2表 sal最大5个
SELECT * FROM emp2 ORDER BY sal DESC LIMIT 0 , 5;
</code></pre></div><p><strong>批量分页查询的情况</strong></p> <p>如果有大量数据比如：10页，每页有10条 ，共有100条！
第一页0，第二页10，第三页20····第九页90</p> <p><strong>pagelndex</strong> 页码数、<strong>pagesize</strong> 每页显示的条数</p> <p>==LIMIT (pageindex-1)*pagesize , pagesize;==</p> <h3 id="别名"><a href="#别名" class="header-anchor">#</a> 别名</h3> <p>在查询数据时，可以为表和字段取别名，这个别名可以代替其指定的表和字段。</p> <h4 id="表别名"><a href="#表别名" class="header-anchor">#</a> 表别名</h4> <p>可以为表取一个别名,用这个别名来代替表的名称。别名格式:</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT (* | 字段) FROM 表名 别名 [...];
</code></pre></div><p>AS:用于指定表名的别名,它可以省略不写。</p> <h4 id="字段别名"><a href="#字段别名" class="header-anchor">#</a> 字段别名</h4> <p>为字段取一个别名,用这个别名来代替表的名称。别名格式:</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT (* | 字段名1 [别名][,字段名2[别名]····,字段名n[别名]]) FROM 表名 [...];
# 或者：
SELECT (* | 字段名1 [AS 别名][,字段名2[AS 别名]····,字段名n[AS 别名]]) FROM 表名 [...];
</code></pre></div><h3 id="多表关系"><a href="#多表关系" class="header-anchor">#</a> 多表关系</h3> <p><strong>多对一</strong>
在多对一的表关系中，应将外键建在多的一方</p> <p><strong>多对多</strong>
为了实现数据表多对多的关系，需要定义<strong>第三方中间表</strong>来保存两个关系表的外键</p> <p><strong>一对一</strong>
一对一的对应关系中，<strong>需要分清主从关系</strong>，通常在从表中建立外键</p> <p>表创建及测试调用例子 复制导入 sql脚本导入</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;

-- ----------------------------
-- Table structure for category
-- ----------------------------
DROP TABLE IF EXISTS `category`;
CREATE TABLE `category`  (
  `cid` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `cname` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  PRIMARY KEY (`cid`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of category
-- ----------------------------
INSERT INTO `category` VALUES ('c001', '电器');
INSERT INTO `category` VALUES ('c002', '服饰');
INSERT INTO `category` VALUES ('c003', '化妆品');
INSERT INTO `category` VALUES ('c004', '书籍');

-- ----------------------------
-- Table structure for class
-- ----------------------------
DROP TABLE IF EXISTS `class`;
CREATE TABLE `class`  (
  `classid` int(0) NOT NULL AUTO_INCREMENT,
  `classname` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  PRIMARY KEY (`classid`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 5 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of class
-- ----------------------------
INSERT INTO `class` VALUES (1, '红龙班');
INSERT INTO `class` VALUES (2, '卫冕班');
INSERT INTO `class` VALUES (3, '神州班');
INSERT INTO `class` VALUES (4, '航天班');

-- ----------------------------
-- Table structure for orderitem
-- ----------------------------
DROP TABLE IF EXISTS `orderitem`;
CREATE TABLE `orderitem`  (
  `oid` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `pid` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of orderitem
-- ----------------------------

-- ----------------------------
-- Table structure for orders
-- ----------------------------
DROP TABLE IF EXISTS `orders`;
CREATE TABLE `orders`  (
  `oid` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `totalprice` double NULL DEFAULT NULL,
  `uid` int(0) NULL DEFAULT NULL,
  PRIMARY KEY (`oid`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of orders
-- ----------------------------

-- ----------------------------
-- Table structure for products
-- ----------------------------
DROP TABLE IF EXISTS `products`;
CREATE TABLE `products`  (
  `pid` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `price` double NULL DEFAULT NULL,
  `category_id` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  PRIMARY KEY (`pid`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of products
-- ----------------------------
INSERT INTO `products` VALUES ('p001', '联想', 5000, 'c001');
INSERT INTO `products` VALUES ('p002', '海尔', 3000, 'c001');
INSERT INTO `products` VALUES ('p003', '雷神', 5000, 'c001');
INSERT INTO `products` VALUES ('p004', 'JACKJONES', 800, 'c002');
INSERT INTO `products` VALUES ('p005', '真维斯', 200, 'c002');
INSERT INTO `products` VALUES ('p006', '花花公子', 440, 'c002');
INSERT INTO `products` VALUES ('p007', '劲霸', 2000, 'c002');
INSERT INTO `products` VALUES ('p008', '香奈儿', 800, 'c003');
INSERT INTO `products` VALUES ('p009', '相宜本草', 200, 'c003');
INSERT INTO `products` VALUES ('p010', '梅明子', 200, NULL);

-- ----------------------------
-- Table structure for scores
-- ----------------------------
DROP TABLE IF EXISTS `scores`;
CREATE TABLE `scores`  (
  `sid` int(0) NOT NULL AUTO_INCREMENT,
  `score` int(0) NULL DEFAULT NULL,
  `subjectid` int(0) NULL DEFAULT NULL,
  `studentid` int(0) NULL DEFAULT NULL,
  PRIMARY KEY (`sid`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 13 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of scores
-- ----------------------------
INSERT INTO `scores` VALUES (1, 43, 1, 1);
INSERT INTO `scores` VALUES (2, 100, 2, 1);
INSERT INTO `scores` VALUES (3, 54, 3, 1);
INSERT INTO `scores` VALUES (4, 34, 1, 2);
INSERT INTO `scores` VALUES (5, 52, 2, 2);
INSERT INTO `scores` VALUES (6, 32, 3, 2);
INSERT INTO `scores` VALUES (7, 41, 1, 3);
INSERT INTO `scores` VALUES (8, 86, 3, 3);
INSERT INTO `scores` VALUES (9, 98, 2, 3);
INSERT INTO `scores` VALUES (10, 78, 3, 4);
INSERT INTO `scores` VALUES (11, 76, 2, 4);
INSERT INTO `scores` VALUES (12, 54, 1, 4);

-- ----------------------------
-- Table structure for student
-- ----------------------------
DROP TABLE IF EXISTS `student`;
CREATE TABLE `student`  (
  `studentid` int(0) NOT NULL AUTO_INCREMENT,
  `studentname` varchar(10) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `password` varchar(10) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `sex` char(1) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `classid` int(0) NULL DEFAULT NULL,
  `test` int(0) NULL DEFAULT NULL,
  PRIMARY KEY (`studentid`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 10 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of student
-- ----------------------------
INSERT INTO `student` VALUES (1, '黑猫', '111111', '女', 1, 10);
INSERT INTO `student` VALUES (2, '大鲸', '2222', '男', 3, 20);
INSERT INTO `student` VALUES (3, '白兔', '3333', '女', 3, 30);
INSERT INTO `student` VALUES (4, '柏竹', '4444', '男', NULL, 40);
INSERT INTO `student` VALUES (5, '棕熊', '5555', '男', 5, 50);
INSERT INTO `student` VALUES (6, '智乃', '6666', '女', 3, 60);
INSERT INTO `student` VALUES (7, '蕾姆', '7777', '女', 2, 70);
INSERT INTO `student` VALUES (8, '艾米', '8888', '女', 1, 80);
INSERT INTO `student` VALUES (9, '纱雾', '9999', '女', 2, 90);

-- ----------------------------
-- Table structure for subject
-- ----------------------------
DROP TABLE IF EXISTS `subject`;
CREATE TABLE `subject`  (
  `subjectid` int(0) NOT NULL AUTO_INCREMENT,
  `subjectname` varchar(10) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  PRIMARY KEY (`subjectid`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 5 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of subject
-- ----------------------------
INSERT INTO `subject` VALUES (1, 'Java');
INSERT INTO `subject` VALUES (2, 'MySQL');
INSERT INTO `subject` VALUES (3, 'HTML');

-- ----------------------------
-- Table structure for users
-- ----------------------------
DROP TABLE IF EXISTS `users`;
CREATE TABLE `users`  (
  `userid` int(0) NULL DEFAULT NULL,
  `username` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `upass` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of users
-- ----------------------------

SET FOREIGN_KEY_CHECKS = 1;
</code></pre></div><h4 id="连接查询-cross-join"><a href="#连接查询-cross-join" class="header-anchor">#</a> 连接查询(CROSS JOIN)</h4> <p>交叉连接又称 笛卡尔积 ，返回结果的是 <strong>被连接的两个表中所有字段行乘积</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT {* | 查询字段} FROM 表1 CROSS JOIN 表2 [WHERE 条件表达式];
# 或者(简写)
SELECT {* | 查询字段} FROM 表1,表2 [WHERE 条件表达式];

# 将学生与班级交叉查询
SELECT * FROM student CROSS JOIN class;
</code></pre></div><h4 id="自然连接-natural-join"><a href="#自然连接-natural-join" class="header-anchor">#</a> 自然连接(NATURAL JOIN)</h4> <p>特殊的等值连接，前提两表字段属性必须相同，且字段名也要相同，无须添加连接条件，得出的结果是消除重复的字段</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT {* | 查询字段} FROM 表1 NATURAL JOIN 表2;

# 查询学生所在的班级
SELECT * FROM student NATURAL JOIN class;
</code></pre></div><h4 id="合并结果集-union"><a href="#合并结果集-union" class="header-anchor">#</a> 合并结果集 (UNION)</h4> <p>连接查询的过程中，通过添加过滤条件来限制查询结果，使查询结果更加精确(ALL去除重复的记录)</p> <p>应用场景：</p> <ul><li>查询列数类型一致可合并！！！</li> <li>查询两表相同列数类型进行合并结果</li></ul> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT {* | 查询字段} FROM 表1 UNION [ALL]
SELECT {* | 查询字段} FROM 表2;

# 合并两表数据
SELECT studentid,studentname FROM student UNION 
SELECT subjectid,subjectname FROM subject;
</code></pre></div><p><strong>注意：</strong> 合并前提必须将两表的列数和类型一致</p> <h4 id="内连接-inner-join"><a href="#内连接-inner-join" class="header-anchor">#</a> 内连接 (INNER JOIN)</h4> <p>内连接使用 比较运算符，对两表中指定字段值进行比较，列出与连接条件匹配的数据行 ，字段值符合匹配的进行连接，组合成新的记录(无视不匹配的字段)</p> <div class="language-mysql extra-class"><pre class="language-text"><code># 
SELECT  {* | 查询字段}  FROM  表1  INNER  JOIN  表2  ON  {表1.关系字段 = 表2.关系字段 | WHERE 条件表达式} ;
# 或者 SQL92写法
SELECT {* | 查询字段}  FROM  表1,表2  WHERE  表1.关系字段 = 表2.关系字段;
# 或者 SQL99写法
SELECT {* | 查询字段} FROM 表1 JOIN 表2 ON 表1.关系字段 = 表2.关系字段 WHERE 约束;

# 查询 与班关联的学生(已经分配班级的学生)
SELECT * FROM student JOIN class ON student.classid = class.classid;

# 查询花子所有成绩
SELECT subjectname,score 
FROM
	scores , subject , student 
WHERE
	scores.subjectid = subject.subjectid 
	AND scores.studentid = student.studentid 
	AND student.studentname = '花儿';

# 查询 所有科目的平均值
SELECT subjectname , AVG( score ) 
FROM
	scores JOIN subject 
	ON scores.subjectid = subject.subjectid 
GROUP BY
	subjectname;
</code></pre></div><h4 id="外连接-outer-join"><a href="#外连接-outer-join" class="header-anchor">#</a> 外连接 (OUTER JOIN)</h4> <p>外连接 弥补了内连接查询不匹配的条件，查出不满足条件的可能
外连接包括： <strong>左连接</strong> / <strong>右连接</strong></p> <p><strong>左连接</strong>
指定左表的所有记录，所有满足连接条件的记录。如果左表的某条记录在右表中不存在，则在右表中显示为空值</p> <p>主表 为左边，从表 为右边</p> <p><strong>右连接</strong>
右连接与左连接正好相反</p> <p>主表 为右边，从表 为左边</p> <div class="language-mysql extra-class"><pre class="language-text"><code># 可将 {LEFT|RIGHT} OUTER JOIN 进行缩写为 {LEFT|RIGHT} JOIN
SELECT {*|查询字段} FROM 主表 {LEFT|RIGHT} JOIN 从表 ON 主表.字段 = 从表.字段;
# 左外连接
SELECT {*|查询字段} FROM 主表 LEFT JOIN 从表 ON 主表.字段 = 从表.字段;
# 右外连接
SELECT {*|查询字段} FROM 主表 RIGHT JOIN 从表 ON 主表.字段 = 从表.字段;

# 左外查询
SELECT * FROM
	student LEFT JOIN class 
	ON student.classid = class.classid;
# 右外查询
SELECT * FROM
	student RIGHT JOIN class 
	ON student.classid = class.classid;
</code></pre></div><p><strong>注意：</strong> 主表会显示所有字段，空值或不匹配条件的字段均可查询！！！</p> <h4 id="子查询"><a href="#子查询" class="header-anchor">#</a> 子查询</h4> <p>子查询是指一个查询语句 嵌套在另一个 查询语句内部的查询
在执行查询语句时，首先会执行子查询中的语句，然后将返回的结果作为外层查询的过滤条件，子查询必须返回是一个字段数据</p> <h5 id="where中子查询"><a href="#where中子查询" class="header-anchor">#</a> where中子查询</h5> <p>常用于聚合函数的子查询 比较 约束（子查询只能单条结果）</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT * FROM 表 WHERE ...(子查询)

# 查询和 智乃 同班的学生
SELECT studentname FROM student WHERE classid = (
	SELECT classid FROM student WHERE studentname = &quot;智乃&quot;
);
</code></pre></div><h5 id="from中子查询"><a href="#from中子查询" class="header-anchor">#</a> from中子查询</h5> <p>将子查询的临时表当做一个表进行应用 （子查询能多条结果）</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT * FROM (子查询) 别名 WHERE ...

# 查出每个同学所有科目的平均分数
SELECT studentname,c.avg FROM (
	SELECT sid,avg(score) avg FROM scores GROUP BY sid
)c JOIN student s ON c.sid = s.studentid
</code></pre></div><p>PS : 使用临时表需要手动指定表名</p> <h5 id="select中子查询"><a href="#select中子查询" class="header-anchor">#</a> select中子查询</h5> <p>将结果进行展示，在 两表有字段关联约束进行查询使用（子查询只能单条结果）</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT (子查询),... FROM 表


</code></pre></div><h5 id="in"><a href="#in" class="header-anchor">#</a> IN</h5> <p>内层查询语句仅仅返回一个数据字段，数据字段中的值将供外层查询语句进行比较操作</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT {* | 查询字段} FROM 表名1 WHERE 字段 [NOT] IN(SELECT 字段 FROM 表名2 WHERE 条件表达式);

# 查询 三班有多少女生
SELECT studentname FROM student WHERE classid IN(
    SELECT classid FROM class WHERE classid = 3
)AND sex = '女';
# 查询 与‘智乃’同一个班的学生
SELECT studentname FROM	student WHERE classid IN( 
    SELECT classid FROM student WHERE studentname = '智乃' 
);
</code></pre></div><p><strong>注意：</strong> IN 后面子查询返回结果要和IN前的字段匹配</p> <h5 id="exists"><a href="#exists" class="header-anchor">#</a> EXISTS</h5> <p>参数可以是任意一个子查询， 这个子查询的作用相当于<strong>测试</strong>，返回 布尔值 , 如果 TRUE 外层查询才会执行</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT  {* | 查询字段}  FROM  表名1  WHERE  [NOT]  EXISTS  (SELECT  字段  FROM  表名2  WHERE  条件表达式);

# 测试 两表关系(匹配显示，不匹配不显示)
SELECT
	studentid,
	studentname 
FROM student WHERE
	EXISTS ( SELECT * FROM class WHERE class.classid = student.classid );
</code></pre></div><h5 id="any"><a href="#any" class="header-anchor">#</a> ANY</h5> <p>满足任意一个条件，子查询返回的字段列表进行比较，将不匹配的过滤</p> <div class="language-MYSQL extra-class"><pre class="language-text"><code>SELECT * FROM 表名 WHERE [NOT] 字段 {比较运算符} ANY(SELECT 字段 FROM 表名);

# 查询 已经分配班级的学生
SELECT classid,studentname FROM student 
WHERE
	classid = ANY(SELECT classid FROM class);
#或 (结果一样)
SELECT classid,studentname FROM student 
WHERE
	classid IN( SELECT classid FROM class);
</code></pre></div><h5 id="all"><a href="#all" class="header-anchor">#</a> ALL</h5> <p>子查询返回的字段列表结果需同时满足所有内层查询条件，否则查询为空</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT * FROM 表名 WHERE [NOT] 字段 {比较运算符} ALL(SELECT 字段 FROM 表名);
 
# 查询 test 高于蕾姆的同学
SELECT studentname,test FROM student 
WHERE 
	test &gt; ALL(SELECT test FROM student WHERE studentname = '蕾姆');	
# 查询 匹配错班级的同学(数据错乱)
SELECT classid,studentname FROM student 
WHERE
	classid &gt; ALL(SELECT classid FROM class);
#或 (结果一样)
SELECT classid,studentname FROM student 
WHERE
	classid NOT IN( SELECT classid FROM class);
</code></pre></div><h5 id="比较运算符"><a href="#比较运算符" class="header-anchor">#</a> 比较运算符</h5> <p>ANY 和 ALL 都用到比较运算符，但还可以使用其他运算符</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT * FROM 表名 WHERE [NOT] 字段 {比较运算符} (SELECT 字段 FROM 表名)
</code></pre></div><h3 id="查新执行顺序"><a href="#查新执行顺序" class="header-anchor">#</a> 查新执行顺序</h3> <p><strong>书写顺序：</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT DISTINCT ... FROM ... JOIN ... ON ... WHERE ... 
	GROUP BY ... HAVING ... ORDER BY ... DESC LIMIT ...
</code></pre></div><p><strong>执行顺序：</strong></p> <ol><li><code>FROM</code></li> <li><code>NO</code></li> <li><code>JOIN</code></li> <li><code>WHERE</code></li> <li><code>GROUP BY</code></li> <li><code>AVG,SUM,...</code> (聚合函数)</li> <li><code>HAVING</code></li> <li><code>SELECT</code></li> <li><code>DISTINCT</code></li> <li><code>ORDER BY</code></li> <li><code>LIMIT</code></li></ol> <h3 id="sql优化"><a href="#sql优化" class="header-anchor">#</a> SQL优化</h3> <ol><li>避免全表扫描，应先考虑 where 及 order by 涉及的列上建立索引</li> <li>避免 where语句 中的字段进行 <code>null值</code> 判断</li> <li>避免 where语句 中使用 <code>!=</code> 或 <code>&lt;</code> / <code>&gt;</code> 操作符</li> <li>避免 where语句 使用 <code>OR</code> 连接条件</li> <li>谨慎使用 <code>IN</code> / <code>NOT IN</code> 进行查询，连续数字可使用 <code>BETWEEN</code> 范围查询</li></ol> <h2 id="完整性"><a href="#完整性" class="header-anchor">#</a> 完整性</h2> <p>保证了数据的有效性和准确性，以防止数据表中插入错误的数据</p> <table><thead><tr><th>约束条件</th> <th>说明</th></tr></thead> <tbody><tr><td><code>PRIMARY KEY</code></td> <td>主键约束，用于唯一标识对应的记录</td></tr> <tr><td><code>FOREIGN KEY</code></td> <td>外键约束</td></tr> <tr><td><code>NOT NULL</code></td> <td>非空约束</td></tr> <tr><td><code>UNIQUE [KEY]</code></td> <td>唯一性约束</td></tr> <tr><td><code>DEFAULT</code></td> <td>默认值约束，用于设置字段的默认值</td></tr> <tr><td><code>AUTO_INCREMENT</code></td> <td>自动增长</td></tr> <tr><td><code>CHECK</code></td> <td>约束取值范围</td></tr> <tr><td><code>UNSIGNED</code></td> <td>无符号约束</td></tr></tbody></table> <p><strong>注意：</strong> 多个约束需要空格分隔</p> <h3 id="实体完整性"><a href="#实体完整性" class="header-anchor">#</a> 实体完整性</h3> <h4 id="单字段主键"><a href="#单字段主键" class="header-anchor">#</a> 单字段主键</h4> <p>每表只有一个主键，唯一性，不能NULL，可创建联合主键
==字段名 数据类型 PRIMARY KEY[(字段名1,字段名2,···字段名n)];==
==ALTER TABLE student ADD PRIMARY KEY[(字段名1,字段名2,···字段名n)]==</p> <h4 id="唯一约束"><a href="#唯一约束" class="header-anchor">#</a> 唯一约束</h4> <p>数据不能重复，只能有一次为空
==字段名 数据类型 UNIQUE;==</p> <h4 id="字段自动增加"><a href="#字段自动增加" class="header-anchor">#</a> 字段自动增加</h4> <p>在数据表中，若想为表中插入的新记录自动生成<strong>唯一的 ID</strong>,可以使用自增约束来实现
==字段名 数据类型 AUTO_INCREMENT;==</p> <h3 id="域完整性"><a href="#域完整性" class="header-anchor">#</a> 域完整性</h3> <h4 id="数据类型-2"><a href="#数据类型-2" class="header-anchor">#</a> 数据类型</h4> <h4 id="非空约束"><a href="#非空约束" class="header-anchor">#</a> 非空约束</h4> <p>字段的值不能为NULL(空)
==字段名 数据类型 NOT NULL;==</p> <h4 id="默认约束"><a href="#默认约束" class="header-anchor">#</a> 默认约束</h4> <p>新添数据时，如果未赋值，则自动插入默认值
==字段名 数据类型 DEFAULT(默认值);==</p> <h4 id="无符号约束"><a href="#无符号约束" class="header-anchor">#</a> 无符号约束</h4> <p>==字段名 数据类型 UNSIGNED;==</p> <h4 id="约束范围"><a href="#约束范围" class="header-anchor">#</a> 约束范围</h4> <p>==字段名 数据类型 CHECK (字段值&gt;0 and 字段值&lt;=100);==</p> <h3 id="引用完整性"><a href="#引用完整性" class="header-anchor">#</a> 引用完整性</h3> <h4 id="外键约束"><a href="#外键约束" class="header-anchor">#</a> 外键约束</h4> <p>外键是指引用另一个表中的一个字段或多个字段。建立、加强两表数据之间的链接</p> <img src="https://image.bozhu12.cc/myblog/MySQL/MySQL01.png"> <p><strong>创建表时 定义外键：</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code># 从表
CREATE TABLE 表名(
   字段名1 数据类型 [完整性约束条件],
   字段名2 数据类型 [完整性约束条件],
   ·······
   FOREIGN KEY (外键字段) REFERENCES 主表( 主表的 主键 / 唯一 字段 )
);
</code></pre></div><p><strong>创建表后 定义外键：</strong>
==ALTER  TABLE 从表 ADD CONSTRAINT [自定义外键名] FOREIGN KEY(从表 外键字段) REFERENCES 主表( 主表的 主键 / 唯一 字段 );==</p> <p><strong>外键查询</strong> （查询表详细 可查询表的外键）</p> <p>==SHOW CREATE TABLE 表名;==</p> <p><strong>外键删除</strong></p> <p>根据逻辑的需求，需要解除两个表之间的关联关系时，就需要删除外键约束
==ALTER TABLE 表名 DROP FOREIGN KEY 外键名;==</p> <p><strong>注意：</strong></p> <ol><li>主表是被外键引用的字段，且该字段有 <strong>主键约束</strong>/<strong>唯一性约束</strong></li> <li>被引用的是 主表，引用 的是 从表，两表是主从关系</li> <li>引入外键后，从表 外键字段 只能插入主表被引用的字段值</li> <li>如果想删除 主表 一条记录，则必须删除完 与主表相同外键值(对象是删除的记录)的从表外键字段记录(删除外键字段值与主表相同的值) ，主表才能进行删除记录，确保数据的完整性</li> <li>建立外键的表必须是InnoDB型不能是临时表。因为MySQL中只有InnoDB型的表才支持外键</li> <li>定义外键名时，不能加引号。如:  'FK_ ID' 或&quot; FK_ID &quot;都是错误的 ，</li> <li>自定义外键名 用于删除外键约束时使用，也可不设置，一般建议“_fk”为结尾</li></ol> <h2 id="索引"><a href="#索引" class="header-anchor">#</a> 索引</h2> <p>索引的目的在于提高查询效率，与我们查字典所用的目录是一个道理</p> <p><strong>优点：</strong></p> <ul><li>提高查询效率</li> <li>降低CPU使用率</li></ul> <p><strong>缺点：</strong></p> <ul><li>索引本身很大，存储在 内存/硬盘 中</li> <li>索引会降低 增删改 的效率</li></ul> <p><strong>索引分类：</strong></p> <ul><li><strong><a href="#%E5%8D%95%E5%88%97%E7%B4%A2%E5%BC%95">单列索引</a></strong></li> <li><strong><a href="#%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95" title="UNIQUE ">唯一索引</a></strong></li> <li>联合索引</li> <li>主键索引</li></ul> <blockquote><p>主键和唯一的区别：主键不能为null，而唯一可以</p></blockquote> <h3 id="索引创建"><a href="#索引创建" class="header-anchor">#</a> 索引创建</h3> <p><strong>建表时创建索引：</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>CREATE TABLE 表名(
	字段名1 数据类型 [完整性约束条件]，
	字段名2 数据类型 [完整性约束条件]，
     ·····
	字段名n 数据类型
[UNIQUE | FULLTEXT | SPATIAL] INDEX | KEY
	[索引名] (字段名1 [长度]) [ASC | DESC])
)[存储引擎];
</code></pre></div><p><strong>UNIQUE</strong>： 可选参数，表示唯一性约束
<strong>FULLTEXT</strong>：可选参数，表示全文约束
<strong>SPATIAL</strong>： 可选参数，表示空间约束
<strong>INDEX</strong> 和 <strong>KEY</strong>：用来表示字段的索引，二者选一即可
<strong>索引名</strong>：可选参数，表示创建的索引的名称
<strong>字段名1</strong>：指定索引对应字段的名称
<strong>长度</strong>：可选参数，用于表示索引的长度
<strong>ASC</strong> 和 <strong>DESC</strong>：可选参数，其中，ASC表示升序排列，DESC表示降序排列</p> <h4 id="单列索引-normal"><a href="#单列索引-normal" class="header-anchor">#</a> 单列索引 (NORMAL)</h4> <p>在表中单个字段上创建索引，它可以是普通索引、唯一索引或者全文素引， 只要保证该索引只对应表中一个字段即可</p> <p><strong>创建代码：</strong></p> <p>==CREATE INDEX 索引名 ON 表名 (字段名1[,字段名2...]);==</p> <p>==ALTER TABLE 表名 ADD INDEX 索引名 (字段名1[,字段名2...]);==</p> <blockquote><p>以上添加代码一定一定要添加括号</p></blockquote> <p><strong>联合索引说明：</strong></p> <p>单列索引多个字段，称为联合索引</p> <p>触发联合索引的条件有：</p> <blockquote><p>假如索引添加形式为：==ALTER TABLE user ADD INDEX test (name,age)==</p></blockquote> <ul><li>**组合约束查询 ** <code>AND</code> (<code>OR</code>查询不会触发索引)
==... WHERE name= '张三' AND age=12==</li> <li><strong>单独约束查询</strong> 左边第一个字段会触发索引（右边的字段不会触发
==WHERE name='张三'==</li></ul> <h4 id="唯一索引-unique"><a href="#唯一索引-unique" class="header-anchor">#</a> 唯一索引 (UNIQUE )</h4> <p>使字段的值必须是唯一的（允许null，但只能允许一个空</p> <p>==CREATE UNIQUE INDEX 索引名 ON 表名 (字段名);==</p> <p>==ALTER TABLE 表名 ADD UNIQUE INDEX 索引名 (字段名);==</p> <h4 id="全文索引-fulltext"><a href="#全文索引-fulltext" class="header-anchor">#</a> 全文索引 (FULLTEXT)</h4> <p>只能创建在CHAR、VARCHAR或TEXT类型的字段上，
该索引只有<strong>MyISAM存储引擎</strong>支持</p> <p>==CREATE FULLTEXT INDEX 索引名 ON 表名 (字段名);==</p> <p>==ALTER TABLE 表名 ADD FULLTEXT INDEX 索引名 (字段名);==
<strong>注意：</strong> 后面需存储引擎(ENGINE =MyISAM)</p> <h4 id="空间索引-spatial"><a href="#空间索引-spatial" class="header-anchor">#</a> 空间索引 (SPATIAL)</h4> <p>只能创建在空间数据类型的字段上。MySQL中的空间数据类型有4种,分别是<strong>LGEOMETRY、POINT、 LINESTRING、POLYGON</strong></p> <p>该索引只有<strong>MyISAM存储引擎</strong>支持</p> <p>==CREATE SPATIAL INDEX 索引名 ON 表名 (字段名);==</p> <p>==ALTER TABLE 表名 ADD SPATIAL INDEX 索引名 (字段名);==</p> <p><strong>注意:</strong> 后面需存储引擎(ENGINE =MyISAM)</p> <h3 id="索引删除"><a href="#索引删除" class="header-anchor">#</a> 索引删除</h3> <p>==ALTER TABLE 表名 DROP INDEX 索引名;==</p> <p>==DROP INDEX 索引名 ON 表名;==</p> <h2 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h2> <h3 id="数学函数"><a href="#数学函数" class="header-anchor">#</a> 数学函数</h3> <table><thead><tr><th>函数名称</th> <th>作用</th></tr></thead> <tbody><tr><td>ABS(x)</td> <td>返回x的绝对值</td></tr> <tr><td>SQRT(x)</td> <td>返回x的非负2次方根</td></tr> <tr><td>MOD(x , y)</td> <td>返回x被y除后的余数</td></tr> <tr><td>CEILING(x) / CEIL(x)</td> <td>返回 不小于x的最大整数 (前提x有小数)</td></tr> <tr><td>FLOOR(x)</td> <td>返回 不大于x的最小整数 (前提x有小数)</td></tr> <tr><td>ROUND(x , y)</td> <td>对 x 四舍五入 操作，小数保留 y位</td></tr> <tr><td>TRUNCATE(x , y)</td> <td>对 x 只舍不入 操作，小数保留 y位</td></tr> <tr><td>SIGN(x)</td> <td>返回 x 符号 ( -1 / 0 / 1 )<br>x为数值，则判断 正或负的值 ；x为其他类型，则返回0</td></tr></tbody></table> <h3 id="字符串函数"><a href="#字符串函数" class="header-anchor">#</a> 字符串函数</h3> <table><thead><tr><th>函数名称</th> <th>作用</th></tr></thead> <tbody><tr><td>LENGTH(str)</td> <td>返回 字符串的长度</td></tr> <tr><td>CONCAT(s1 , s2 , .....)</td> <td>返回 一个/多个字符串 连接的新字符串</td></tr> <tr><td>TRIM(str)</td> <td>删除字符串两侧的空格</td></tr> <tr><td>REPLACE(str , s1 , s2)</td> <td>使用字符串s2替换字符串str中所有的字符串s1</td></tr> <tr><td>SUBSTRING(tr , n , len)</td> <td>返回字符串st的子串，起始位置为n,长度为len</td></tr> <tr><td>REVERSE(str)</td> <td>返回 字符串顺序反转</td></tr> <tr><td>LOCATE(s1 , str)</td> <td>返回 s1 在 str 中的起始位置</td></tr> <tr><td>UPPER(str)</td> <td>将 所有 小写 转换为 大写</td></tr> <tr><td>LOWER(str)</td> <td>将 所有 大写 转换为 小写</td></tr> <tr><td>FORMAT(str,format)</td> <td>将 字符串 进行数据格式化</td></tr></tbody></table> <h3 id="日期与时间的函数"><a href="#日期与时间的函数" class="header-anchor">#</a> 日期与时间的函数</h3> <table><thead><tr><th>函数名称</th> <th>作用</th></tr></thead> <tbody><tr><td>CURDATE()</td> <td>获取 系统当前 日期</td></tr> <tr><td>CURTIME()</td> <td>获取 系统当前 时间</td></tr> <tr><td>SYSDATE()</td> <td>获取 当前系统 日期和时间</td></tr> <tr><td>DATE_ADD(now() , INTERVAL num {时间单位})</td> <td>指定过去或未来时间点(num是对现在的时间进行相加)</td></tr> <tr><td>DATEDIFF(d1 , d2)</td> <td>计算 两时间 间隔的天数(从0000.1.1开始 n 天后的日期)</td></tr> <tr><td>FROM_DAYS(day)</td> <td>计算 时间 得出日期 (从0000.1.1开始 n 天后的日期)</td></tr> <tr><td>YEAR(d)</td> <td>获取 日期年份</td></tr> <tr><td>MONTH(d)</td> <td>获取 日期月份</td></tr> <tr><td>DAY(d)</td> <td>获取 日期 日</td></tr> <tr><td>DATE_FORMAT(date , format)</td> <td>日期格式化 <br>format ：'%m-%d-%Y'</td></tr></tbody></table> <p><a href="https://www.jc2182.com/mysql/mysql-datetime-funcs.html" target="_blank" rel="noopener noreferrer">点击了解更多日期&amp;时间函数了解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="条件判断函数"><a href="#条件判断函数" class="header-anchor">#</a> 条件判断函数</h3> <table><thead><tr><th>函数名称</th> <th>作用</th></tr></thead> <tbody><tr><td>IF(expr , v1 , v2)</td> <td>如果expr表达式为true返回v1,否则返回v2</td></tr> <tr><td>IFNULL(v1 , v2)</td> <td>如果v1不为NULL返回v1,否则返回v2</td></tr> <tr><td>CASE expr WHEN v1 THEN r1 [WHEN v2 THEN r2......] [ELSE m] END</td> <td>如果expr值等于v1、v2等,则返回对应位置THEN后面的结果，否则返回ELSE后的结果m</td></tr></tbody></table> <h3 id="加密函数"><a href="#加密函数" class="header-anchor">#</a> 加密函数</h3> <table><thead><tr><th>函数名称</th> <th>作用</th></tr></thead> <tbody><tr><td>MD5(str)</td> <td>对字符串 str 进行MD5加密</td></tr> <tr><td>ENCODE(str , pwd stu)</td> <td>使用pwd作为密码加密字符串str</td></tr> <tr><td>DECODE(str , pwd str)</td> <td>使用pwd作为密码解密字符串str</td></tr></tbody></table> <h2 id="事务"><a href="#事务" class="header-anchor">#</a> 事务</h2> <p>事务指逻辑上的一组操作，组成这组操作的各个单元，要不全部成功，就全部不成功，<strong>同一个事务的操作具备同步优点</strong></p> <div class="language-mysql extra-class"><pre class="language-text"><code>SET AUTOCOMMIT = 0;
START TRANSACTION; |  BEGIN;
···
····
ROLLBACK;
COMMIT; 
</code></pre></div><p><strong>SET AUTOCOMMIT：</strong> 自动事务提交开关（0关闭；1开启）
<strong>START TRANSACTION | BEGIN：</strong> 开启事务(处于事务中，不会影响数据库数据)
<strong>ROLLBACK：</strong> 回滚事务(取消事务，前提是事务未提交前回滚)
<strong>COMMIT ：</strong> 事务提交(事务生效后会立即影响数据库数据)</p> <h3 id="事务acid特性"><a href="#事务acid特性" class="header-anchor">#</a> 事务ACID特性</h3> <p><strong>原子性(Atomicity)</strong>
指事务是一个不可分割的工作单位，事务中的操作要么执行成功，要么执行失败</p> <p><strong>一致性(Consistency)</strong>
事务前后数据的完整性必须保持一致(数据库的完整性：如果数据库在某个时间点下，所有的数据都符合所有的约束，则称数据库为符合完整性的状态)</p> <p><strong>隔离性(Isolation)</strong>
指多个用户并发访问数据库时，一个用户的事务不能被其它用户的事务所干扰，多个并发事务之间数据要相互隔离</p> <p><strong>持久性(Durability)</strong>
指一个事务一旦被提交，数据库中的数据改变就是永久性的，接下来即使数据库发生故障也不应该对其有任何影响</p> <h3 id="事务安全问题"><a href="#事务安全问题" class="header-anchor">#</a> 事务安全问题</h3> <p><strong>脏读：</strong> 两事务 某一事务读取到另一个事务修改且未提交的数据</p> <p><strong>不可重复读：</strong> 某一事务多次读取同一条记录的过程，读取的结果不相同过程数据有更改，读取到另一个事务已经提交的数据</p> <p><strong>虚读(幻读)：</strong> 某一事务多次查询数据，由于其他事务 新增 或 删除 记录造成多次查询出的记录条数不同</p> <h3 id="事务隔离级别"><a href="#事务隔离级别" class="header-anchor">#</a> 事务隔离级别</h3> <p>防止不同隔离性的问题</p> <table><thead><tr><th>隔离类型</th> <th>脏读</th> <th>不可重复读</th> <th>幻读</th></tr></thead> <tbody><tr><td><strong>未提交</strong> READ  UNCOMMITTED</td> <td>允许</td> <td>允许</td> <td>允许</td></tr> <tr><td><strong>已读提交</strong> READ  COMMITTED</td> <td>禁止</td> <td>允许</td> <td>允许</td></tr> <tr><td><strong>可重复读</strong> REPEATABLE READ</td> <td>禁止</td> <td>禁止</td> <td>可能</td></tr> <tr><td><strong>顺序读</strong> SERIALIZABLE</td> <td>禁止</td> <td>禁止</td> <td>禁止</td></tr></tbody></table> <p>一般默认 <strong>可重复读</strong>、 <strong>已读提交</strong></p> <p><strong>修改隔离级别</strong>
==SET  [SESSION | GLOBAL]  TRANSACTION  ISOLATION   LEVEL 隔离类型;==
<strong>SESSION：</strong> 当前会话
<strong>GLOBAL：</strong>  全局</p> <p><strong>查询隔离级别</strong>
==SELECT @@TX_ISOLATION;==  (MySQL版本8前)
==SELECT @@TRANSACTION_ISOLATION;== (MySQL版本8后)</p> <h4 id="未提交-read-uncommitted"><a href="#未提交-read-uncommitted" class="header-anchor">#</a> 未提交 (READ  UNCOMMITTED)</h4> <p>读未提交，该隔离级别允许脏读取，其隔离级别是最低的</p> <table><thead><tr><th>时间(T)</th> <th>事务A</th> <th>事务B</th></tr></thead> <tbody><tr><td>T1</td> <td>开始事务</td> <td>开始事务</td></tr> <tr><td>T2</td> <td>==</td> <td>查余额(500元)</td></tr> <tr><td>T3</td> <td>==</td> <td>取300元</td></tr> <tr><td>T4</td> <td>查余额(200元)</td> <td>==</td></tr> <tr><td>T5</td> <td>==</td> <td>滚动事务</td></tr> <tr><td>T6</td> <td>存800元</td> <td>==</td></tr> <tr><td>T7</td> <td>提交事务</td> <td>==</td></tr> <tr><td>T8</td> <td></td> <td>取100元</td></tr> <tr><td>T9</td> <td></td> <td>提提交事务</td></tr></tbody></table> <p>最后余额剩1200元。T4 A脏读B修改的数据，T5 B回滚(撤回T5前的所有操作)，最后B只提取100元！</p> <h4 id="已读提交-read-committed"><a href="#已读提交-read-committed" class="header-anchor">#</a> 已读提交 (READ  COMMITTED)</h4> <p>读已提交是不同的事务执行的时候 <strong>只能获取</strong> 到已经提交的数据</p> <table><thead><tr><th>时间(T)</th> <th>事务A</th> <th>事务B</th></tr></thead> <tbody><tr><td>T1</td> <td>开始事务</td> <td>开始事务</td></tr> <tr><td>T2</td> <td>==</td> <td>查余额(500元)</td></tr> <tr><td>T3</td> <td>查余额(500元)</td> <td>==</td></tr> <tr><td>T4</td> <td>==</td> <td>取500元</td></tr> <tr><td>T5</td> <td>查余额(500元)</td> <td>==</td></tr> <tr><td>T6</td> <td>==</td> <td>提交事务</td></tr> <tr><td>T7</td> <td>查余额(0)</td> <td></td></tr> <tr><td>T8</td> <td>提交事务</td> <td></td></tr></tbody></table> <p>A只能读取 事务提交后的数据！！</p> <h4 id="可重复读-repeatable-read"><a href="#可重复读-repeatable-read" class="header-anchor">#</a> 可重复读 (REPEATABLE READ)</h4> <p>保证在事务处理过程中，多次读取同一个数据时，该数据的值和事务开始时刻是一致的</p> <table><thead><tr><th>时间(T)</th> <th>事务A</th> <th>事务B</th></tr></thead> <tbody><tr><td>T1</td> <td>开始事务</td> <td></td></tr> <tr><td>T2</td> <td>查所有数据</td> <td>开始事务</td></tr> <tr><td>T3</td> <td>==</td> <td>插入一条数据</td></tr> <tr><td>T4</td> <td>==</td> <td>提交事务</td></tr> <tr><td>T5</td> <td>查所有数据(和T2一样)</td> <td></td></tr> <tr><td>T6</td> <td>修改范围数据</td> <td></td></tr> <tr><td>T7</td> <td>查所有数据(多了一条数据)</td> <td></td></tr> <tr><td>T8</td> <td>提交事务</td> <td></td></tr></tbody></table> <p>事务A 的 T2 查询数据 与 T5查询数据 是一样的 ，确认数据无误后 对表数据值修改，紧接查询事务多出了一条数据！！（作为这一前提 事务B 插入数据提交事务</p> <blockquote><p>事务B未提交 ，事务A 对数据进行更改，则不会显示，除非 事务B提交</p></blockquote> <h4 id="顺序读-serializable"><a href="#顺序读-serializable" class="header-anchor">#</a> 顺序读 (SERIALIZABLE)</h4> <p>最严格的事务隔离级别。事务以排队形式进行执行。某一事务对数据进行修改必须等另一个 提交 或 回滚 ，才可以进行数据修改！！</p> <h3 id="隔离级别锁的情况"><a href="#隔离级别锁的情况" class="header-anchor">#</a> 隔离级别锁的情况</h3> <p><strong>读未提交(RU)：</strong> 有行级的锁，没有间隙锁。与RC的区别是能够查询到未提交的数据
<strong>读已提交(RC)：</strong> 有行级的锁，没有间隙锁，读不到没有提交的数据
<strong>可重复读(RR)：</strong> 有行级的锁，有间隙锁，每读取的数据都一样，且没有幻读的情况
<strong>序列化(S)：</strong> 有行级锁，也有间隙锁，读表的时候，就已经上锁了</p> <h2 id="锁机制"><a href="#锁机制" class="header-anchor">#</a> 锁机制</h2> <p>高并发场景我们也不难发现 , 就是在 双十一 , 春运抢票 , 等等... 在当中也不难发现 , 在巨大流量冲击下 , 数据很有可能会被击穿导致负数等异常现象 , 因此系统需要运用一些技术手段抵抗这巨大流量冲击 .</p> <p>我们可以通过锁机制来控制数据击穿问题 , 我们分别了解两个锁机制 :</p> <ul><li><strong>悲观锁</strong>
在数据进行操作时 , 会进行先加锁 , 执行完后释放锁 , 供给其他线程使用 , 在一个锁执行的过程 , 其他线程则需要等待获取锁</li> <li><strong>乐观锁</strong>
不会进行加锁 , 而是在更新数据时检查是否被其他线程修改过 , 从而判断是否进行更改</li></ul> <p>**区别 : **</p> <table><thead><tr><th style="text-align:center;"></th> <th>悲观锁</th> <th>乐观锁</th></tr></thead> <tbody><tr><td style="text-align:center;"><strong>操作</strong></td> <td>加锁</td> <td>不加锁</td></tr> <tr><td style="text-align:center;"><strong>检验</strong></td> <td>业务逻辑层</td> <td>SQL操作层</td></tr> <tr><td style="text-align:center;"></td> <td></td> <td></td></tr></tbody></table></div></div>  <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=%E6%95%B0%E6%8D%AE%E5%BA%93" title="标签">#数据库</a><a href="/tags/?tag=MySQL" title="标签">#MySQL</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/03/12, 00:43:49</span></div></div> <div class="page-nav-wapper"><!----> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/other/ceats1/" class="prev">Canal</a></span> <span class="next"><a href="/backend/0ygxqu/">JDBC</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/web/wcs13x/"><div>
            Vue3
            <!----></div></a> <span class="date">11-20</span></dt></dl><dl><dd>02</dd> <dt><a href="/ruoyi-vue-plus/02/"><div>
            Ruoyi-Vue-Plus 工具篇
            <!----></div></a> <span class="date">11-14</span></dt></dl><dl><dd>03</dd> <dt><a href="/ruoyi-vue-plus/03/"><div>
            Ruoyi-Vue-Plus 框架整合篇
            <!----></div></a> <span class="date">11-14</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="Sanscan12" title="联系" target="_blank" class="iconfont icon-weixin"></a><a href="https://github.com/Sanscan12" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/user/home?id=448156561" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2023
    <span> | <a href="https://beian.miit.gov.cn/">桂ICP备2022009417号-1</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.19d69fa3.js" defer></script><script src="/assets/js/2.b26d2d6f.js" defer></script><script src="/assets/js/55.63a70956.js" defer></script>
  </body>
</html>
