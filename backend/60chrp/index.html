<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Activiti | 柏竹</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="https://image.bozhu12.cc/myblog/Essay/favicon.ico">
    <script language="javascript" type="text/javascript" src="/js/pgmanor-self.js"></script>
    <meta name="description" content="学习足迹 , 记录生活!">
    <meta name="Sasncan12" content="柏竹博客, 个人技术博客, 前后端端 , 技术文档">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#bd93f9">
    
    <link rel="preload" href="/assets/css/0.styles.7521ea85.css" as="style"><link rel="preload" href="/assets/js/app.9c51766a.js" as="script"><link rel="preload" href="/assets/js/2.b26d2d6f.js" as="script"><link rel="preload" href="/assets/js/46.e647158b.js" as="script"><link rel="prefetch" href="/assets/js/10.9835140b.js"><link rel="prefetch" href="/assets/js/100.c822671b.js"><link rel="prefetch" href="/assets/js/101.c6ad426c.js"><link rel="prefetch" href="/assets/js/102.133faf8a.js"><link rel="prefetch" href="/assets/js/103.203e5547.js"><link rel="prefetch" href="/assets/js/104.267dd58b.js"><link rel="prefetch" href="/assets/js/105.506b6524.js"><link rel="prefetch" href="/assets/js/106.8ef8825d.js"><link rel="prefetch" href="/assets/js/107.f37bcdb8.js"><link rel="prefetch" href="/assets/js/108.cca3ac74.js"><link rel="prefetch" href="/assets/js/109.304f38d3.js"><link rel="prefetch" href="/assets/js/11.a344c44c.js"><link rel="prefetch" href="/assets/js/110.d4758be4.js"><link rel="prefetch" href="/assets/js/111.972e37f5.js"><link rel="prefetch" href="/assets/js/112.30ef9ed8.js"><link rel="prefetch" href="/assets/js/113.0bd1b6b7.js"><link rel="prefetch" href="/assets/js/114.d104797d.js"><link rel="prefetch" href="/assets/js/115.1e9311ef.js"><link rel="prefetch" href="/assets/js/116.1c814e2a.js"><link rel="prefetch" href="/assets/js/117.bc82fa9c.js"><link rel="prefetch" href="/assets/js/118.e3dd957b.js"><link rel="prefetch" href="/assets/js/119.85f67615.js"><link rel="prefetch" href="/assets/js/12.6c3779eb.js"><link rel="prefetch" href="/assets/js/120.26d4c9f0.js"><link rel="prefetch" href="/assets/js/13.94813285.js"><link rel="prefetch" href="/assets/js/14.7efd7ddb.js"><link rel="prefetch" href="/assets/js/15.f31ac9a7.js"><link rel="prefetch" href="/assets/js/16.4700baf2.js"><link rel="prefetch" href="/assets/js/17.a2c60f5a.js"><link rel="prefetch" href="/assets/js/18.3ae898e5.js"><link rel="prefetch" href="/assets/js/19.c927b9a4.js"><link rel="prefetch" href="/assets/js/20.659a362d.js"><link rel="prefetch" href="/assets/js/21.075e8623.js"><link rel="prefetch" href="/assets/js/22.96d2aead.js"><link rel="prefetch" href="/assets/js/23.d331c5a7.js"><link rel="prefetch" href="/assets/js/24.1d88f10f.js"><link rel="prefetch" href="/assets/js/25.65e92ad2.js"><link rel="prefetch" href="/assets/js/26.468456c3.js"><link rel="prefetch" href="/assets/js/27.677f6f14.js"><link rel="prefetch" href="/assets/js/28.e9a560ea.js"><link rel="prefetch" href="/assets/js/29.1cd2ac7e.js"><link rel="prefetch" href="/assets/js/3.419a68b5.js"><link rel="prefetch" href="/assets/js/30.6f95f7aa.js"><link rel="prefetch" href="/assets/js/31.b4815633.js"><link rel="prefetch" href="/assets/js/32.6ea862c0.js"><link rel="prefetch" href="/assets/js/33.49188621.js"><link rel="prefetch" href="/assets/js/34.7cee60c6.js"><link rel="prefetch" href="/assets/js/35.6d4d549f.js"><link rel="prefetch" href="/assets/js/36.47833f09.js"><link rel="prefetch" href="/assets/js/37.fe7aa186.js"><link rel="prefetch" href="/assets/js/38.c948d014.js"><link rel="prefetch" href="/assets/js/39.07b53ec9.js"><link rel="prefetch" href="/assets/js/4.5017c5ca.js"><link rel="prefetch" href="/assets/js/40.61fb895c.js"><link rel="prefetch" href="/assets/js/41.11ef63c0.js"><link rel="prefetch" href="/assets/js/42.36d70f24.js"><link rel="prefetch" href="/assets/js/43.e21776c9.js"><link rel="prefetch" href="/assets/js/44.ff53bbbb.js"><link rel="prefetch" href="/assets/js/45.a01be469.js"><link rel="prefetch" href="/assets/js/47.6b6c6498.js"><link rel="prefetch" href="/assets/js/48.0500c9f5.js"><link rel="prefetch" href="/assets/js/49.8f5e7bba.js"><link rel="prefetch" href="/assets/js/5.9c242416.js"><link rel="prefetch" href="/assets/js/50.2565e8f1.js"><link rel="prefetch" href="/assets/js/51.f4372e96.js"><link rel="prefetch" href="/assets/js/52.069c7460.js"><link rel="prefetch" href="/assets/js/53.54c91551.js"><link rel="prefetch" href="/assets/js/54.f119c2e9.js"><link rel="prefetch" href="/assets/js/55.fc6080b3.js"><link rel="prefetch" href="/assets/js/56.c3a662a0.js"><link rel="prefetch" href="/assets/js/57.29a8250d.js"><link rel="prefetch" href="/assets/js/58.a761fc70.js"><link rel="prefetch" href="/assets/js/59.06a7e78b.js"><link rel="prefetch" href="/assets/js/6.cd9d56e9.js"><link rel="prefetch" href="/assets/js/60.6f5e0140.js"><link rel="prefetch" href="/assets/js/61.e097a404.js"><link rel="prefetch" href="/assets/js/62.e87b2f43.js"><link rel="prefetch" href="/assets/js/63.0f3e49c9.js"><link rel="prefetch" href="/assets/js/64.de42aef9.js"><link rel="prefetch" href="/assets/js/65.915abd33.js"><link rel="prefetch" href="/assets/js/66.45337f40.js"><link rel="prefetch" href="/assets/js/67.1dfd0248.js"><link rel="prefetch" href="/assets/js/68.87592178.js"><link rel="prefetch" href="/assets/js/69.1622d367.js"><link rel="prefetch" href="/assets/js/7.66c4ded7.js"><link rel="prefetch" href="/assets/js/70.4184d085.js"><link rel="prefetch" href="/assets/js/71.dd32e1cb.js"><link rel="prefetch" href="/assets/js/72.25ed742e.js"><link rel="prefetch" href="/assets/js/73.0bf711be.js"><link rel="prefetch" href="/assets/js/74.3354f9fe.js"><link rel="prefetch" href="/assets/js/75.839cc9c0.js"><link rel="prefetch" href="/assets/js/76.8977bd86.js"><link rel="prefetch" href="/assets/js/77.7c24668d.js"><link rel="prefetch" href="/assets/js/78.70ecf1af.js"><link rel="prefetch" href="/assets/js/79.a2faf8f9.js"><link rel="prefetch" href="/assets/js/8.a8e2447d.js"><link rel="prefetch" href="/assets/js/80.47f412fc.js"><link rel="prefetch" href="/assets/js/81.d165eb42.js"><link rel="prefetch" href="/assets/js/82.da445398.js"><link rel="prefetch" href="/assets/js/83.6894e0b8.js"><link rel="prefetch" href="/assets/js/84.01f8210e.js"><link rel="prefetch" href="/assets/js/85.9c350789.js"><link rel="prefetch" href="/assets/js/86.8883a354.js"><link rel="prefetch" href="/assets/js/87.82fe32f6.js"><link rel="prefetch" href="/assets/js/88.9f7a3e7f.js"><link rel="prefetch" href="/assets/js/89.4983f576.js"><link rel="prefetch" href="/assets/js/9.e5373fa3.js"><link rel="prefetch" href="/assets/js/90.aa0396ba.js"><link rel="prefetch" href="/assets/js/91.b70812dc.js"><link rel="prefetch" href="/assets/js/92.ee96f196.js"><link rel="prefetch" href="/assets/js/93.30e02c1e.js"><link rel="prefetch" href="/assets/js/94.02d7cb41.js"><link rel="prefetch" href="/assets/js/95.d282e882.js"><link rel="prefetch" href="/assets/js/96.174a71be.js"><link rel="prefetch" href="/assets/js/97.b592eb9c.js"><link rel="prefetch" href="/assets/js/98.23af2bdc.js"><link rel="prefetch" href="/assets/js/99.b14180bc.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7521ea85.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://image.bozhu12.cc/myblog/Essay/hendImage01.jpg" alt="柏竹" class="logo"> <span class="site-name can-hide">柏竹</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/backend/" class="nav-link router-link-active">后端</a></div><div class="nav-item"><a href="/web/" class="nav-link">前端</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/other/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/Amway/" class="nav-link">应用推荐</a></li></ul></div></div><div class="nav-item"><a href="/say/say2023/#四月" class="nav-link">说说</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/friendLink/" class="nav-link">友链</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://image.bozhu12.cc/myblog/Essay/favicon.ico"> <div class="blogger-info"><h3>柏竹</h3> <span>奋斗柏竹</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/backend/" class="nav-link router-link-active">后端</a></div><div class="nav-item"><a href="/web/" class="nav-link">前端</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/other/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/Amway/" class="nav-link">应用推荐</a></li></ul></div></div><div class="nav-item"><a href="/say/say2023/#四月" class="nav-link">说说</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/friendLink/" class="nav-link">友链</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaWeb</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>拓展技术</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>框架技术</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/backend/60chrc/" class="sidebar-link">Maven</a></li><li><a href="/backend/60chrp/" aria-current="page" class="active sidebar-link">Activiti</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/backend/60chrp/#简介" class="sidebar-link">简介</a></li><li class="sidebar-sub-header level2"><a href="/backend/60chrp/#首次应用" class="sidebar-link">首次应用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/backend/60chrp/#jar包引入" class="sidebar-link">Jar包引入</a></li><li class="sidebar-sub-header level3"><a href="/backend/60chrp/#生成数据库" class="sidebar-link">生成数据库</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#jdbc生成" class="sidebar-link">JDBC生成</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#spring生成" class="sidebar-link">Spring生成</a></li><li class="sidebar-sub-header level3"><a href="/backend/60chrp/#流程绘制" class="sidebar-link">流程绘制</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#图形符号" class="sidebar-link">图形符号</a></li><li class="sidebar-sub-header level3"><a href="/backend/60chrp/#流程引擎" class="sidebar-link">流程引擎</a></li><li class="sidebar-sub-header level3"><a href="/backend/60chrp/#部署流程" class="sidebar-link">部署流程</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#单文件部署" class="sidebar-link">单文件部署</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#压缩包部署" class="sidebar-link">压缩包部署</a></li><li class="sidebar-sub-header level3"><a href="/backend/60chrp/#启动流程" class="sidebar-link">启动流程</a></li><li class="sidebar-sub-header level3"><a href="/backend/60chrp/#流程业务" class="sidebar-link">流程业务</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#查询部署流程" class="sidebar-link">查询部署流程</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#查看定义流程" class="sidebar-link">查看定义流程</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#个人任务" class="sidebar-link">个人任务</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#流程推进" class="sidebar-link">流程推进</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#流程删除" class="sidebar-link">流程删除</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/backend/60chrp/#activiti-api" class="sidebar-link">Activiti API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/backend/60chrp/#processengine" class="sidebar-link">ProcessEngine</a></li><li class="sidebar-sub-header level3"><a href="/backend/60chrp/#deploymentbuilder" class="sidebar-link">DeploymentBuilder</a></li><li class="sidebar-sub-header level3"><a href="/backend/60chrp/#deploymentquery" class="sidebar-link">DeploymentQuery</a></li><li class="sidebar-sub-header level3"><a href="/backend/60chrp/#processinstance" class="sidebar-link">ProcessInstance</a></li><li class="sidebar-sub-header level3"><a href="/backend/60chrp/#processinstancequery" class="sidebar-link">ProcessInstanceQuery</a></li><li class="sidebar-sub-header level3"><a href="/backend/60chrp/#task" class="sidebar-link">Task</a></li><li class="sidebar-sub-header level3"><a href="/backend/60chrp/#taskquery" class="sidebar-link">TaskQuery</a></li><li class="sidebar-sub-header level3"><a href="/backend/60chrp/#query" class="sidebar-link">Query</a></li><li class="sidebar-sub-header level3"><a href="/backend/60chrp/#service" class="sidebar-link">Service</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#repositoryservice" class="sidebar-link">RepositoryService</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#runtimeservice" class="sidebar-link">RuntimeService</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#taskservice" class="sidebar-link">TaskService</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#historyservice" class="sidebar-link">HistoryService</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/backend/60chrp/#activiti-数据库" class="sidebar-link">Activiti 数据库</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/backend/60chrp/#常用表" class="sidebar-link">常用表</a></li><li class="sidebar-sub-header level3"><a href="/backend/60chrp/#所有表" class="sidebar-link">所有表</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#act-ge-bytearray" class="sidebar-link">actgebytearray</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#act-ge-property" class="sidebar-link">actgeproperty</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#act-hi-actinst" class="sidebar-link">acthiactinst</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#act-hi-attachment" class="sidebar-link">acthiattachment</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#act-hi-comment" class="sidebar-link">acthicomment</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#act-hi-detail" class="sidebar-link">acthidetail</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#act-hi-identitylink" class="sidebar-link">acthiidentitylink</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#act-hi-procinst" class="sidebar-link">acthiprocinst</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#act-hi-taskinst" class="sidebar-link">acthitaskinst</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#act-hi-varinst" class="sidebar-link">acthivarinst</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#act-id-group" class="sidebar-link">actidgroup</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#act-id-info" class="sidebar-link">actidinfo</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#act-id-membership" class="sidebar-link">actidmembership</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#act-id-user" class="sidebar-link">actiduser</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#act-re-deployment" class="sidebar-link">actredeployment</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#act-re-model" class="sidebar-link">actremodel</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#act-re-procdef" class="sidebar-link">actreprocdef</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#act-ru-event-subscr" class="sidebar-link">actruevent_subscr</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#act-ru-execution" class="sidebar-link">actruexecution</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#act-ru-identitylink" class="sidebar-link">actruidentitylink</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#act-ru-job" class="sidebar-link">actrujob</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#act-ru-task" class="sidebar-link">actrutask</a></li><li class="sidebar-sub-header level4"><a href="/backend/60chrp/#act-ru-variable" class="sidebar-link">actruvariable</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/backend/60chrp/#idea应用activiti" class="sidebar-link">IDEA应用Activiti</a></li><li class="sidebar-sub-header level2"><a href="/backend/60chrp/#ssm整合activiti" class="sidebar-link">SSM整合Activiti</a></li></ul></li><li><a href="/backend/40kn38/" class="sidebar-link">Shiro</a></li><li><a href="/backend/40kn39/" class="sidebar-link">SpringBoot</a></li><li><a href="/backend/afbo81/" class="sidebar-link">Dubbo</a></li><li><a href="/backend/afbo8k/" class="sidebar-link">RabbitMQ</a></li><li><a href="/backend/6nss7s/" class="sidebar-link">Netty网络通信</a></li><li><a href="/other/ceats1/" class="sidebar-link">Canal</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringMVC</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringClound</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper bg-style-1"><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/backend/#后端" data-v-06225672>后端</a></li><li data-v-06225672><a href="/backend/#框架技术" data-v-06225672>框架技术</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="javascript:;" data-v-06225672>柏竹</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2020-02-18</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Activiti<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="activiti"><a href="#activiti" class="header-anchor">#</a> Activiti</h1> <p>Activiti5手册：http://shouce.jb51.net/activiti/#download</p> <p>Activiti API：https://www.activiti.org/javadocs/index.html</p> <h2 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h2> <p>Activiti工作流。由多任务人协同完成的一个复杂的业务流的框架</p> <p>它能够对业务流程自动化的管理，而且也是多人共同完成的一个流程任务的业务</p> <p><strong>特点：</strong></p> <ul><li>图形化，把复杂的业务流进行图形化处理</li> <li>数据化，图形化的业务部署到流程数据库中</li> <li>流程表，流程数据库，共有23张表</li> <li>API，提供了一套API，业务对象</li> <li>持久层： MyBatis实现</li></ul> <h2 id="首次应用"><a href="#首次应用" class="header-anchor">#</a> 首次应用</h2> <p>应用的前提首先需要深层数据库，需要数据库进行</p> <p><strong>步骤：</strong></p> <ol><li><strong><a href="#Jar%E5%8C%85%E5%BC%95%E5%85%A5">引入jar包</a></strong></li> <li><strong><a href="#%E7%94%9F%E6%88%90%E6%95%B0%E6%8D%AE%E5%BA%93">生成数据库</a></strong></li> <li><strong><a href="#%E6%B5%81%E7%A8%8B%E7%BB%98%E5%88%B6">流程绘制</a></strong></li> <li><strong><a href="#%E6%B5%81%E7%A8%8B%E5%BC%95%E6%93%8E">创建流程引擎</a></strong></li> <li><strong><a href="#%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B">流程部署</a></strong></li> <li><strong><a href="#%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B">流程启动</a></strong></li> <li><strong><a href="#%E6%B5%81%E7%A8%8B%E4%B8%9A%E5%8A%A1">流程业务</a></strong></li></ol> <h3 id="jar包引入"><a href="#jar包引入" class="header-anchor">#</a> Jar包引入</h3> <p>Jar包下载：https://mvnrepository.com/artifact/org.activiti/activiti-engine</p> <p>Maven引入：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--activiti的核心包--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.activiti<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>activiti-engine<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>6.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.activiti<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>activiti-spring<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>6.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.activiti<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>activiti-bpmn-model<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>6.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.activiti<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>activiti-bpmn-converter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>6.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.activiti<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>activiti-json-converter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>6.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.activiti<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>activiti-bpmn-layout<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>6.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.activiti.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>activiti-cloud-services-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>7-201710-EA<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>aspectj<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aspectjweaver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.5.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.1.40<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.0.7.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.1.6.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.4.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>commons-dbcp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-dbcp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>slf4j-log4j12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.7.21<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>slf4j-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.7.25<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>commons-io<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-io<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.16.18<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="生成数据库"><a href="#生成数据库" class="header-anchor">#</a> 生成数据库</h3> <p>Activiti生成库的方式有两种分别是：</p> <ul><li><strong><a href="#JDBC%E7%94%9F%E6%88%90">Java程序 纯JDBC 生成</a></strong></li> <li><strong><a href="#Spring%E7%94%9F%E6%88%90">Spring生成</a></strong></li></ul> <h4 id="jdbc生成"><a href="#jdbc生成" class="header-anchor">#</a> JDBC生成</h4> <p><strong>步骤：</strong></p> <ol><li><strong>创建 配置文件 引擎对象</strong></li> <li><strong>配置 数据库连接源</strong></li> <li><strong>解决 重复覆盖问题</strong></li> <li><strong>获取 流程引擎对象</strong></li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jdbc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/** 步骤：
     *  1. 创建 配置文件对象
     *  2. 配置 数据库连接源
     *  3. 解决 重复覆盖问题
     *  4. 获取 流程引擎对象
     */</span>

    <span class="token comment">// 1. 流程引擎 配置对象</span>
    <span class="token class-name">ProcessEngineConfiguration</span> config <span class="token operator">=</span> <span class="token class-name">ProcessEngineConfiguration</span><span class="token punctuation">.</span><span class="token function">createStandaloneProcessEngineConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2. 连接库的数据源配置</span>
    config<span class="token punctuation">.</span><span class="token function">setJdbcDriver</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    config<span class="token punctuation">.</span><span class="token function">setJdbcUrl</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://localhost:3306/activiti?serverTimezone=UTC&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    config<span class="token punctuation">.</span><span class="token function">setJdbcUsername</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    config<span class="token punctuation">.</span><span class="token function">setJdbcPassword</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 3. 解决已存在被覆盖问题</span>
    config<span class="token punctuation">.</span><span class="token function">setDatabaseSchemaUpdate</span><span class="token punctuation">(</span><span class="token class-name">ProcessEngineConfiguration</span><span class="token punctuation">.</span><span class="token constant">DB_SCHEMA_UPDATE_TRUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 4. 获取 流程引擎对象</span>
    <span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">buildProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;processEngine = &quot;</span> <span class="token operator">+</span> processEngine<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="spring生成"><a href="#spring生成" class="header-anchor">#</a> Spring生成</h4> <blockquote><p>spring loc 配置启动应用即可，搭建主要在 loc 中托管 配置文件对象！！</p></blockquote> <p><strong>activiti.cfg.xml</strong>配置文件</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span> 
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd
<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>processEngineConfiguration<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 连接数据的配置 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcDriver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.cj.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcUrl<span class="token punctuation">&quot;</span></span>
                  <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://localhost:3306/activiti?serverTimezone=UTC<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcUsername<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcPassword<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!-- 没有表创建表 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>databaseSchemaUpdate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!--
            其余可以在这里进行其他配置
        --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>测试启动</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">spring</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ProcessEngineConfiguration</span> config <span class="token operator">=</span> <span class="token class-name">ProcessEngineConfiguration</span><span class="token punctuation">.</span><span class="token function">createProcessEngineConfigurationFromResource</span><span class="token punctuation">(</span><span class="token string">&quot;activiti.cfg.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    config<span class="token punctuation">.</span><span class="token function">buildProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;config = &quot;</span> <span class="token operator">+</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="流程绘制"><a href="#流程绘制" class="header-anchor">#</a> 流程绘制</h3> <p>BPMN是 activit定义绘制的流程图，它主要用来描述业务流程的基本的符号，一般情况是通过工具进行绘制的一个流程图，流程图的原始文件其实是 XML形式 的文件</p> <p>绘制方式有很多中：（可以自行选择</p> <ul><li><p><strong>eclipse自带的绘制工具</strong></p></li> <li><p><strong><a href="#IDEA%E5%BA%94%E7%94%A8Activiti">idea插件 <code>Activiti BPMN visualize</code></a></strong>
缺陷：不能添加侦听器功能</p></li> <li><p><strong>第三方绘制工具 <code>Camunda</code></strong></p> <p>缺陷：部分标签名不同，导致兼容问题
组件手册：https://docs.camunda.io/docs/components/</p></li></ul> <h4 id="图形符号"><a href="#图形符号" class="header-anchor">#</a> 图形符号</h4> <p><strong>事件Event</strong> （圆形</p> <ul><li><p>Start Event 启动事件</p></li> <li><p>Intermediate Event 中间事件</p></li> <li><p><strong>End Event 结束时间</strong></p></li></ul> <p><strong>活动Activity</strong> （长方形 圆角</p> <ul><li>User Task 用户任务 （用户</li> <li>Service Task 服务任务 （齿轮</li> <li>Sub Process 子流程 （添加</li></ul> <p><strong>网关Gateway</strong></p> <p>。。。。</p> <p><strong>流向</strong></p> <p>。。。。</p> <h3 id="流程引擎"><a href="#流程引擎" class="header-anchor">#</a> 流程引擎</h3> <p><a href="#ProcessEngine">工作流引擎</a> 的创建主要有两种方式：</p> <ul><li><strong>new 硬编码生成</strong></li> <li><strong>loc 容器托管生成</strong></li></ul> <blockquote><p>上面生成数据库的步骤也有！</p></blockquote> <p><strong>new 硬编码生成</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> <span class="token class-name">ProcessEngines</span><span class="token punctuation">.</span><span class="token function">getDefaultProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>loc 容器托管生成</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">ProcessEngineConfiguration</span> processEngineConfiguration <span class="token operator">=</span> <span class="token class-name">ProcessEngineConfiguration</span><span class="token punctuation">.</span><span class="token function">createProcessEngineConfigurationFromResource</span><span class="token punctuation">(</span><span class="token string">&quot;activiti.cfg.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取流程引擎对象:通过 ProcessEngineConfiguration 创建 ProcessEngine</span>
<span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> processEngineConfiguration<span class="token punctuation">.</span><span class="token function">buildProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="部署流程"><a href="#部署流程" class="header-anchor">#</a> 部署流程</h3> <p>流程部署通过 <a href="#RepositoryService">RepositoryService</a>资源管理类 进行部署，部署形式有两种方式：</p> <ul><li><strong><a href="#%E5%8D%95%E6%96%87%E4%BB%B6%E9%83%A8%E7%BD%B2">单文件部署</a></strong>
bpmn文件 和 png文件 逐个处理</li> <li><strong><a href="#%E5%8E%8B%E7%BC%A9%E5%8C%85%E9%83%A8%E7%BD%B2">压缩包流程部署</a></strong>
bpmn文件 和 png文件 zip压缩统一处理</li></ul> <p>部署信息涉及表有：</p> <ul><li><strong>act_re_deployment</strong></li> <li><strong>act_re_procdef</strong></li> <li><strong>act_ge_bytearray</strong></li> <li><strong>act_ge_property</strong></li></ul> <h4 id="单文件部署"><a href="#单文件部署" class="header-anchor">#</a> 单文件部署</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 流程引擎</span>
    <span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> <span class="token class-name">ProcessEngines</span><span class="token punctuation">.</span><span class="token function">getDefaultProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Deployment</span> deploy <span class="token operator">=</span> processEngine<span class="token punctuation">.</span><span class="token function">getRepositoryService</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">createDeployment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">&quot;请假流程&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">addClasspathResource</span><span class="token punctuation">(</span><span class="token string">&quot;diagram/askForLeave.bpmn20.xml&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">addClasspathResource</span><span class="token punctuation">(</span><span class="token string">&quot;image/askForLeave.png&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 输出信息代表成功 （部署的 id/name</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;deploy.getId() = &quot;</span> <span class="token operator">+</span> deploy<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;deploy.getName() = &quot;</span> <span class="token operator">+</span> deploy<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="压缩包部署"><a href="#压缩包部署" class="header-anchor">#</a> 压缩包部署</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deployProcessByZip</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取流程引擎</span>
    <span class="token class-name">ProcessEngine</span> processEngine <span class="token operator">=</span> <span class="token class-name">ProcessEngines</span><span class="token punctuation">.</span><span class="token function">getDefaultProcessEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">RepositoryService</span> repositoryService <span class="token operator">=</span> processEngine<span class="token punctuation">.</span><span class="token function">getRepositoryService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 流程部署</span>
    <span class="token comment">// 解释：通过 类加载器src的根路径下找 bpmn/evection.zip 加载读取为二进制流</span>
    <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;bpmn/evection.zip&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 使用 InputStream 构造 ZipInputStream</span>
    <span class="token class-name">ZipInputStream</span> zipInputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ZipInputStream</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 使用压缩包的流，进行流程的部署</span>
    <span class="token class-name">Deployment</span> deploy <span class="token operator">=</span> repositoryService<span class="token punctuation">.</span><span class="token function">createDeployment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">addZipInputStream</span><span class="token punctuation">(</span>zipInputStream<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 输出信息代表成功 （部署的 id/name</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;deploy.getId() = &quot;</span> <span class="token operator">+</span> deploy<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;deploy.getName() = &quot;</span> <span class="token operator">+</span> deploy<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="启动流程"><a href="#启动流程" class="header-anchor">#</a> 启动流程</h3> <p>流程部署完成以后，通过 <a href="#RuntimeService">RuntimeService</a>流程运行管理类 启动实例，是根据流程定义的 key进行启动</p> <p>该启动的 <code>startProcessInstanceByKey()</code>方法 重载了4个方法：(划分参数说明)</p> <ul><li><code>startProcessInstanceByKey(String key)</code>
根据部署后的key进行启动流程（key在库中的 <code>act_re_procdef.KEY_</code>字段查到</li> <li><code>startProcessInstanceByKey(String key, String businessKey)</code>
根据key进行启动，并且 绑定关联key （用于绑定 任务id/单子id 的关键信息
在库中的 <code>act_hi_procinst.BUSINESS_KEY_</code>字段查到</li> <li><code>startProcessInstanceByKey(String key, Map&lt;String, Object&gt; map)</code>
根据key进行启动，并且 设置流程变量 （在表绘制的时候会根据指定key赋予value值</li> <li><code>startProcessInstanceByKey(String key, String businessKey, Map&lt;String, Object&gt; map)</code>
以上说明的功能已经要点都有（启动key、绑定关联key、设置流程变量）</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">startprocess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 请假流程key</span>
    <span class="token class-name">String</span> key <span class="token operator">=</span> <span class="token string">&quot;askForLeave&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// 请假单id (leave.12)</span>
    <span class="token keyword">int</span> id <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> businessKey <span class="token operator">=</span> <span class="token string">&quot;leave.&quot;</span><span class="token operator">+</span>id<span class="token punctuation">;</span>
    <span class="token comment">// map 传递流程变量</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ProcessInstance</span> pi <span class="token operator">=</span> processEngine<span class="token punctuation">.</span><span class="token function">getRuntimeService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
            <span class="token function">startProcessInstanceByKey</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>businessKey<span class="token punctuation">,</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;pi.getId(): &quot;</span> <span class="token operator">+</span> pi<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;pi.getProcessDefinitionId(): &quot;</span> <span class="token operator">+</span> pi<span class="token punctuation">.</span><span class="token function">getProcessDefinitionId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="流程业务"><a href="#流程业务" class="header-anchor">#</a> 流程业务</h3> <p>流程业务可以根据以下API进行详细操作，以下展示常用的 流程业务操作</p> <h4 id="查询部署流程"><a href="#查询部署流程" class="header-anchor">#</a> 查询部署流程</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">RepositoryService</span> repositoryService<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Deployment</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAllDeployment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> repositoryService<span class="token punctuation">.</span><span class="token function">createDeploymentQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="查看定义流程"><a href="#查看定义流程" class="header-anchor">#</a> 查看定义流程</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">RepositoryService</span> repositoryService<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ProcessDefinition</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAllProcessDefinitions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> repositoryService<span class="token punctuation">.</span><span class="token function">createProcessDefinitionQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="个人任务"><a href="#个人任务" class="header-anchor">#</a> 个人任务</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">TaskService</span> taskService<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Task</span><span class="token punctuation">&gt;</span></span> <span class="token function">findTaskListByAssignee</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> taskService<span class="token punctuation">.</span><span class="token function">createTaskQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">taskAssignee</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="流程推进"><a href="#流程推进" class="header-anchor">#</a> 流程推进</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">TaskService</span> taskService<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">endTask</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token class-name">TaskId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    taskService<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token class-name">TaskId</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="流程删除"><a href="#流程删除" class="header-anchor">#</a> 流程删除</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">RepositoryService</span> repositoryService<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDel</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 参数2：强制删除与该部署的流程 相关的历史/运行信息</span>
    repositoryService<span class="token punctuation">.</span><span class="token function">deleteDeployment</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>更多业务功能，可根据以下的API进行操作</p></blockquote> <h2 id="activiti-api"><a href="#activiti-api" class="header-anchor">#</a> Activiti API</h2> <p>官方API：https://www.activiti.org/javadocs/index.html</p> <h3 id="processengine"><a href="#processengine" class="header-anchor">#</a> ProcessEngine</h3> <p><code>org.activiti.engine.ProcessEngine</code> 流程引擎配置接口</p> <p>提供 工作流操作的所有服务的访问以下都是</p> <table><thead><tr><th>类型</th> <th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td><code>void</code></td> <td><code>close()</code></td> <td>关闭</td></tr> <tr><td><code>String</code></td> <td><code>getName()</code></td> <td>在配置 中的进程引擎名称，没有则默认</td></tr></tbody></table> <h3 id="deploymentbuilder"><a href="#deploymentbuilder" class="header-anchor">#</a> DeploymentBuilder</h3> <p><code>org.activiti.engine.repository.DeploymentBuilder</code> 创建新部署的生成器接口</p> <p>构建器实例可以通过 <a href="#RepositoryService">RepositoryService</a> 获得createDeployment()</p> <p>可以在调用 <code>deploy()</code> 操作之前 将多个 资源/配置 添加到一个部署中。部署后，不能对返回的部署进行任何更改，可以销毁构建器实例 （<a href="#%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B">点击应用实例</a></p> <p><strong>常用方法</strong></p> <table><thead><tr><th>类型</th> <th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td><code>Deployment</code></td> <td><code>deploy()</code></td> <td>部署流程</td></tr> <tr><td><code>DeploymentBuilder</code></td> <td><code>addClasspathResource(String resource)</code></td> <td>添加指定路径资源</td></tr> <tr><td><code>DeploymentBuilder</code></td> <td><code>addInputStream(String resourceName, InputStream inputStream)</code></td> <td>添加流形式的资源</td></tr> <tr><td><code>DeploymentBuilder</code></td> <td><code>addZipInputStream(ZipInputStream zipInputStream)</code></td> <td>添加指定zip资源</td></tr> <tr><td><code>DeploymentBuilder</code></td> <td><code>name(String name)</code></td> <td>为流程指定名称</td></tr> <tr><td><code>DeploymentBuilder</code></td> <td><code>category(String category)</code></td> <td>为流程指定类别</td></tr> <tr><td>更多自行API</td> <td>https://www.activiti.org/javadocs/index.html</td> <td>....</td></tr></tbody></table> <h3 id="deploymentquery"><a href="#deploymentquery" class="header-anchor">#</a> DeploymentQuery</h3> <p><code>org.activiti.engine.repository.DeploymentQuery</code> 部署查询接口</p> <p><strong>常用方法</strong></p> <table><thead><tr><th>类型</th> <th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td><code>DeploymentQuery</code></td> <td><code>deploymentCategory(String category)</code></td> <td>选择部署类型</td></tr> <tr><td><code>DeploymentQuery</code></td> <td><code>deploymentCategoryNotEquals(String categoryNotEquals)</code></td> <td>选择类型取反</td></tr> <tr><td><code>DeploymentQuery</code></td> <td><code>deploymentId(String deploymentId)</code></td> <td>选择部署id</td></tr> <tr><td><code>DeploymentQuery</code></td> <td><code>deploymentName(String name)</code></td> <td>选择部署name</td></tr> <tr><td><code>DeploymentQuery</code></td> <td><code>deploymentNameLike(String nameLike)</code></td> <td>模糊选择部署name</td></tr> <tr><td><code>DeploymentQuery</code></td> <td><code>processDefinitionKey(String key)</code></td> <td>选择流程key</td></tr> <tr><td><code>DeploymentQuery</code></td> <td><code>processDefinitionKeyLike(String keyLike)</code></td> <td>模糊选择流程key</td></tr> <tr><td>更多自行API</td> <td>https://www.activiti.org/javadocs/index.html</td> <td>...</td></tr></tbody></table> <h3 id="processinstance"><a href="#processinstance" class="header-anchor">#</a> ProcessInstance</h3> <p><code>org.activiti.engine.runtime.ProcessInstance</code> 流程实例接口</p> <p><strong>常用方法</strong></p> <table><thead><tr><th>类型</th> <th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td><code>String</code></td> <td><code>getBusinessKey()</code></td> <td>获取业务key</td></tr> <tr><td><code>String</code></td> <td><code>getDeploymentId()</code></td> <td>获取部署id</td></tr> <tr><td><code>String</code></td> <td><code>getDescription()</code></td> <td>获取 流程描述</td></tr> <tr><td><code>String</code></td> <td><code>getName()</code></td> <td>获取 流程name</td></tr> <tr><td><code>String</code></td> <td><code>getProcessDefinitionId()</code></td> <td>获取流程id</td></tr> <tr><td><code>String</code></td> <td><code>getProcessDefinitionKey()</code></td> <td>获取流程key</td></tr> <tr><td><code>String</code></td> <td><code>getProcessDefinitionName()</code></td> <td>获取流程name</td></tr> <tr><td>更多自行API</td> <td>https://www.activiti.org/javadocs/index.html</td> <td>....</td></tr></tbody></table> <h3 id="processinstancequery"><a href="#processinstancequery" class="header-anchor">#</a> ProcessInstanceQuery</h3> <p><code>org.activiti.engine.runtime.ProcessInstanceQuery</code> 流程实例查询接口</p> <p><strong>常用方法</strong></p> <table><thead><tr><th>类型</th> <th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td><code>ProcessInstanceQuery</code></td> <td><code>processInstanceId(String id)</code></td> <td>选择流程实例id</td></tr> <tr><td><code>ProcessInstanceQuery</code></td> <td><code>processInstanceIds(Set&lt;String&gt; ids)</code></td> <td>选择流程实例多个id</td></tr> <tr><td><code>ProcessInstanceQuery</code></td> <td><code>processInstanceBusinessKey(String businessKey)</code></td> <td>选择流程实例的业务id</td></tr> <tr><td>更多自行API</td> <td>https://www.activiti.org/javadocs/index.html</td> <td>....</td></tr></tbody></table> <h3 id="task"><a href="#task" class="header-anchor">#</a> Task</h3> <p><code>org.activiti.engine.task.Task</code> 用户任务接口</p> <p><strong>常用方法</strong></p> <table><thead><tr><th>类型</th> <th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td><code>void</code></td> <td><code>delegate(String userId)</code></td> <td>将任务委托指定id的用户</td></tr> <tr><td><code>DelegationState</code></td> <td><code>getDelegationState()</code></td> <td>获取任务状态(代办/解决)</td></tr> <tr><td><code>boolean</code></td> <td><code>isSuspended()</code></td> <td>任务是否挂起</td></tr> <tr><td><code>void</code></td> <td><code>setAssignee(String assignee)</code></td> <td>设置任务委托人</td></tr> <tr><td><code>void</code></td> <td><code>setCategory(String category)</code></td> <td>设置任务类型</td></tr> <tr><td><code>void</code></td> <td><code>setDelegationState(DelegationState delegationState)</code></td> <td>设置任务状态(代办/解决)</td></tr> <tr><td><code>void</code></td> <td><code>setDescription(String description)</code></td> <td>设置任务描述</td></tr> <tr><td><code>void</code></td> <td><code>setDueDate(Date dueDate)</code></td> <td>设置任务截止时间</td></tr> <tr><td><code>void</code></td> <td><code>setFormKey(String formKey)</code></td> <td>设置任务表单键</td></tr> <tr><td><code>void</code></td> <td><code>setName(String name)</code></td> <td>设置任务名称</td></tr> <tr><td><code>void</code></td> <td><code>setOwner(String owner)</code></td> <td>设置任务负责人id</td></tr> <tr><td><code>void</code></td> <td><code>setPriority(int priority)</code></td> <td>设置任务重要程度</td></tr> <tr><td>更多自行API</td> <td>https://www.activiti.org/javadocs/index.html</td> <td>....</td></tr></tbody></table> <h3 id="taskquery"><a href="#taskquery" class="header-anchor">#</a> TaskQuery</h3> <p><code>org.activiti.engine.task.TaskQuery</code></p> <p><strong>常用方法</strong></p> <table><thead><tr><th>类型</th> <th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td><code>TaskQuery</code></td> <td><code>active()</code></td> <td>选择活动的任务</td></tr> <tr><td><code>TaskQuery</code></td> <td><code>excludeSubtasks()</code></td> <td>选择没有父节点的任务</td></tr> <tr><td><code>TaskQuery</code></td> <td><code>suspended()</code></td> <td>选择被挂起的任务</td></tr> <tr><td><code>TaskQuery</code></td> <td><code>taskDelegationState(DelegationState delegationState)</code></td> <td>选择指定状态的任务</td></tr> <tr><td><code>TaskQuery</code></td> <td><code>taskUnassigned()</code></td> <td>选择没有委托人的任务</td></tr> <tr><td>更多自行API</td> <td>https://www.activiti.org/javadocs/index.html</td> <td>....</td></tr></tbody></table> <h3 id="query"><a href="#query" class="header-anchor">#</a> Query</h3> <p><code>org.activiti.engine.query.Query&lt;T extends Query&lt;?, ?&gt;, U&gt;</code></p> <p>该接口用于在以上业务查询功能</p> <p><strong>常用方法</strong></p> <table><thead><tr><th>类型</th> <th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td><code>T</code></td> <td><code>asc()</code></td> <td>对结果指定属性进行升序排序</td></tr> <tr><td><code>long</code></td> <td><code>count()</code></td> <td>获取结果数</td></tr> <tr><td><code>T</code></td> <td><code>desc()</code></td> <td>对结果指定属性进行降序排序</td></tr> <tr><td><code>List&lt;U&gt;</code></td> <td><code>list()</code></td> <td>查询并获取集合</td></tr> <tr><td><code>List&lt;U&gt;</code></td> <td><code>listPage(int firstResult, int maxResults)</code></td> <td>查询并获取集合（开始位置 , 总量数）</td></tr> <tr><td><code>U</code></td> <td><code>singleResult()</code></td> <td>查询满足提交的结果（一条</td></tr> <tr><td>更多自行API</td> <td>https://www.activiti.org/javadocs/index.html</td> <td>....</td></tr></tbody></table> <h3 id="service"><a href="#service" class="header-anchor">#</a> Service</h3> <p>Activiti提供了许多Service服务接口，用于 用户业务流程的操作和查看</p> <p><strong>service总览</strong></p> <table><thead><tr><th>service名称</th> <th>说明</th></tr></thead> <tbody><tr><td><a href="#RepositoryService">RepositoryService</a></td> <td>资源管理接口</td></tr> <tr><td><a href="#RuntimeService">RuntimeService</a></td> <td>流程运行管理接口</td></tr> <tr><td><a href="#TaskService">TaskService</a></td> <td>任务管理接口</td></tr> <tr><td><a href="#HistoryService">HistoryService</a></td> <td>历史管理接口</td></tr></tbody></table> <h4 id="repositoryservice"><a href="#repositoryservice" class="header-anchor">#</a> RepositoryService</h4> <p><code>org.activiti.engine.RepositoryService</code> 资源管理接口</p> <p>**作用：**管理流程发布包 和 流程定义 的操作</p> <p><strong>常用方法</strong></p> <table><thead><tr><th>类型</th> <th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td><code>DeploymentBuilder</code></td> <td><code>createDeployment()</code></td> <td>部署流程</td></tr> <tr><td><code>DeploymentQuery</code></td> <td><code>createDeploymentQuery()</code></td> <td>查询部署</td></tr> <tr><td><code>List&lt;String&gt;</code></td> <td><code>getDeploymentResourceNames(String deploymentId)</code></td> <td>根据id查资源列表</td></tr> <tr><td><code>List&lt;String&gt;</code></td> <td><code>getDeploymentResourceNames(String deploymentName)</code></td> <td>根据name查资源列表</td></tr> <tr><td><code>void</code></td> <td><code>deleteDeployment(String deploymentId, boolean cascade)</code></td> <td>删除部署资源，运行过程实例是否强制删除</td></tr> <tr><td></td> <td>getResourceAsStream()</td> <td></td></tr> <tr><td>更多自行API</td> <td>https://www.activiti.org/javadocs/index.html</td> <td>....</td></tr></tbody></table> <h4 id="runtimeservice"><a href="#runtimeservice" class="header-anchor">#</a> RuntimeService</h4> <p><code>org.activiti.engine.RuntimeService</code> 流程运行管理接口</p> <p>**作用：**获取关于流程执行的相关信息</p> <p><strong>常用方法</strong></p> <table><thead><tr><th>类型</th> <th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td><code>ProcessInstance</code></td> <td><code>startProcessInstanceByKey()</code></td> <td>启动流程</td></tr> <tr><td><code>ProcessInstanceQuery</code></td> <td><code>createProcessInstanceQuery()</code></td> <td>查询正在运行的流程</td></tr> <tr><td>更多自行API</td> <td>https://www.activiti.org/javadocs/index.html</td> <td>....</td></tr></tbody></table> <h4 id="taskservice"><a href="#taskservice" class="header-anchor">#</a> TaskService</h4> <p><code>org.activiti.engine.TaskService</code> 任务管理接口</p> <p>**作用：**获取与 任务/操作相关 的信息</p> <p><strong>常用方法</strong></p> <table><thead><tr><th>类型</th> <th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td><code>TaskQuery</code></td> <td><code>createTaskQuery()</code></td> <td>创建任务查询对象</td></tr> <tr><td><code>void</code></td> <td><code>complete(String id)</code></td> <td>推进任务</td></tr> <tr><td><code>void</code></td> <td><code>complete(String id, Map&lt;String, Object&gt; variables)</code></td> <td>推进任务，成功后并填充参数</td></tr> <tr><td><code>Comment</code></td> <td><code>addComment(String taskId, String processInstanceId, String message)</code></td> <td>添加批注。指定 任务id、流程实例id、消息</td></tr> <tr><td><code>Comment</code></td> <td><code>addComment(String taskId, String processInstanceId, String type, String message)</code></td> <td>添加批注。指定 任务id、自定义类型、流程实例id、消息</td></tr> <tr><td>更多自行API</td> <td>https://www.activiti.org/javadocs/index.html</td> <td>....</td></tr></tbody></table> <h4 id="historyservice"><a href="#historyservice" class="header-anchor">#</a> HistoryService</h4> <p><code>org.activiti.engine.HistoryService</code> 历史管理接口</p> <p>**作用：**查询历史信息，执行流程时，引擎会保存很多数据（根据配置)</p> <blockquote><p>这与运行时服务不同，因为该运行时信息只包含任何给定时刻的实际运行时状态，并且针对运行时流程执行性能进行了优化。历史信息经过优化，便于查询，并在持久存储中保持永久性</p></blockquote> <p><strong>常用方法</strong></p> <table><thead><tr><th>类型</th> <th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td><code>HistoricProcessInstanceQuery</code></td> <td><code>createHistoricProcessInstanceQuery()</code></td> <td>流程实例查询</td></tr> <tr><td><code>HistoricTaskInstanceQuery</code></td> <td><code>createHistoricTaskInstanceQuery()</code></td> <td>任务实例查询</td></tr> <tr><td><code>HistoricVariableInstanceQuery</code></td> <td><code>createHistoricVariableInstanceQuery()</code></td> <td>变量历史查询</td></tr> <tr><td><code>ProcessInstanceHistoryLogQuery</code></td> <td><code>createProcessInstanceHistoryLogQuery(String processInstanceId)</code></td> <td>流程实例日志查询</td></tr> <tr><td><code>void</code></td> <td><code>deleteHistoricProcessInstance(String processInstanceId)</code></td> <td>删除指定流程实例id历史记录</td></tr> <tr><td><code>void</code></td> <td><code>deleteHistoricTaskInstance(String taskId)</code></td> <td>删除指定任务id历史记录</td></tr> <tr><td>更多自行API</td> <td>https://www.activiti.org/javadocs/index.html</td> <td>....</td></tr></tbody></table> <h2 id="activiti-数据库"><a href="#activiti-数据库" class="header-anchor">#</a> Activiti 数据库</h2> <p>Activiti数据库有23张表，他们大致分类有：</p> <table><thead><tr><th>表名前缀</th> <th>说明</th></tr></thead> <tbody><tr><td>act_re_*</td> <td>流程定义 和 流程资源</td></tr> <tr><td>act_ru_*</td> <td>运行时、流程实例、任务、变量</td></tr> <tr><td>act_hi_*</td> <td>流程历史</td></tr> <tr><td>act_ge_*</td> <td>通用表</td></tr></tbody></table> <h3 id="常用表"><a href="#常用表" class="header-anchor">#</a> 常用表</h3> <table><thead><tr><th>表名</th> <th>说明</th></tr></thead> <tbody><tr><td><a href="#act_ge_bytearray">act_ge_bytearray</a></td> <td>通用流程定义/流程资源</td></tr> <tr><td><a href="#act_re_deployment">act_re_deployment</a></td> <td>部署流程信息</td></tr> <tr><td><a href="#act_re_procdef">act_re_procdef</a></td> <td>已部署的流程定义</td></tr> <tr><td><a href="#act_ru_execution">act_ru_execution</a></td> <td>运行时流程执行实例</td></tr> <tr><td><a href="#act_ru_task">act_ru_task</a></td> <td>运行时任务</td></tr> <tr><td><a href="#act_re_procdef">act_re_procdef</a></td> <td>已部署的流程定义</td></tr> <tr><td><a href="#act_hi_identitylink">act_hi_procinst</a></td> <td>历史的流程实例</td></tr> <tr><td><a href="#act_hi_taskinst">act_hi_taskinst</a></td> <td>历史的任务实例</td></tr></tbody></table> <h3 id="所有表"><a href="#所有表" class="header-anchor">#</a> 所有表</h3> <table><thead><tr><th>表名</th> <th>说明</th></tr></thead> <tbody><tr><td><a href="#act_ge_bytearray">act_ge_bytearray</a></td> <td>通用流程定义/流程资源</td></tr> <tr><td><a href="#act_ge_property">act_ge_property</a></td> <td>系统相关属性</td></tr> <tr><td><a href="#act_hi_actinst">act_hi_actinst</a></td> <td>历史的流程节点</td></tr> <tr><td><a href="#act_hi_attachment">act_hi_attachment</a></td> <td>历史的流程附件</td></tr> <tr><td><a href="#act_hi_comment">act_hi_comment</a></td> <td>历史的说明信息（批注</td></tr> <tr><td><a href="#act_hi_detail">act_hi_detail</a></td> <td>历史的流程运行中的细节信息</td></tr> <tr><td><a href="#act_hi_identitylink">act_hi_identitylink</a></td> <td>历史的流程运行过程中用户关系</td></tr> <tr><td><a href="#act_hi_identitylink">act_hi_procinst</a></td> <td>历史的流程实例</td></tr> <tr><td><a href="#act_hi_taskinst">act_hi_taskinst</a></td> <td>历史的任务实例</td></tr> <tr><td><a href="#act_hi_varinst">act_hi_varinst</a></td> <td>历史的流程运行中的变量信息</td></tr> <tr><td><a href="#act_id_group">act_id_group</a></td> <td>用户组信息表</td></tr> <tr><td><a href="#act_id_info">act_id_info</a></td> <td>用户详细信息表</td></tr> <tr><td><a href="#act_id_membership">act_id_membership</a></td> <td>用户与用户组对应信息表</td></tr> <tr><td><a href="#act_id_user">act_id_user</a></td> <td>用户信息表</td></tr> <tr><td><a href="#act_re_deployment">act_re_deployment</a></td> <td>部署流程信息</td></tr> <tr><td><a href="#act_re_model">act_re_model</a></td> <td>模型信息</td></tr> <tr><td><a href="#act_re_procdef">act_re_procdef</a></td> <td>已部署的流程定义</td></tr> <tr><td><a href="#act_ru_event_subscr">act_ru_event_subscr</a></td> <td>运行时事件</td></tr> <tr><td><a href="#act_ru_execution">act_ru_execution</a></td> <td>运行时流程执行实例</td></tr> <tr><td><a href="#act_ru_identitylink">act_ru_identitylink</a></td> <td>运行时用户关系信息，存储任务节点的参与信息</td></tr> <tr><td><a href="#act_ru_job">act_ru_job</a></td> <td>运行时作业</td></tr> <tr><td><a href="#act_ru_task">act_ru_task</a></td> <td>运行时任务</td></tr> <tr><td><a href="#act_ru_variable">act_ru_variable</a></td> <td>运行时变量表</td></tr></tbody></table> <h4 id="act-ge-bytearray"><a href="#act-ge-bytearray" class="header-anchor">#</a> act_ge_bytearray</h4> <p>二进制数据表，存储通用的流程定义和流程资源</p> <blockquote><p>保存流程定义图片和xml、Serializable(序列化)的变量，即保存所有二进制数据，特别注意类路径部署时候，不要把svn等隐藏文件或者其他与流程无关的文件也一起部署到该表中，会造成一些错误（可能导致流程定义无法删除）</p></blockquote> <table><thead><tr><th style="text-align:left;">字段名称</th> <th style="text-align:left;">字段描述</th> <th style="text-align:left;">数据类型</th> <th style="text-align:left;">主键</th> <th style="text-align:left;">为空</th> <th style="text-align:left;">取值说明</th></tr></thead> <tbody><tr><td style="text-align:left;">ID_</td> <td style="text-align:left;">ID_</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td> <td style="text-align:left;">主键ID</td></tr> <tr><td style="text-align:left;">REV_</td> <td style="text-align:left;">乐观锁</td> <td style="text-align:left;">int</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">Version(版本)</td></tr> <tr><td style="text-align:left;">NAME_</td> <td style="text-align:left;">名称</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">部署的文件名称，如：leave.bpmn.png,leave.bpmn20.xml</td></tr> <tr><td style="text-align:left;">DEPLOYMENT_ID_</td> <td style="text-align:left;">部署ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">部署表ID</td></tr> <tr><td style="text-align:left;">BYTES_</td> <td style="text-align:left;">字节</td> <td style="text-align:left;">varbinary(max)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">部署文件</td></tr> <tr><td style="text-align:left;">GENERATED_</td> <td style="text-align:left;">是否是引擎生成</td> <td style="text-align:left;">tinyint</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">0为用户生成，1为activiti生成</td></tr></tbody></table> <p><strong>索引</strong></p> <table><thead><tr><th>名称</th> <th>字段</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>ACT_FK_BYTEARR_DEPL</td> <td>DEPLOYMENT_ID_</td> <td>DEPLOYMENT_ID_</td> <td>ID部署</td></tr></tbody></table> <h4 id="act-ge-property"><a href="#act-ge-property" class="header-anchor">#</a> act_ge_property</h4> <p>属性数据表，存储整个流程引擎级别的数据</p> <table><thead><tr><th style="text-align:left;">字段名称</th> <th style="text-align:left;">字段描述</th> <th style="text-align:left;">数据类型</th> <th style="text-align:left;">主键</th> <th style="text-align:left;">为空</th> <th style="text-align:left;">取值说明</th></tr></thead> <tbody><tr><td style="text-align:left;">NAME_</td> <td style="text-align:left;">名称</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td> <td style="text-align:left;">schema.versionschema.historynext.dbid</td></tr> <tr><td style="text-align:left;">VALUE_</td> <td style="text-align:left;">值</td> <td style="text-align:left;">nvarchar(300)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">5.<em>create(5.</em>)</td></tr> <tr><td style="text-align:left;">REV_</td> <td style="text-align:left;">乐观锁</td> <td style="text-align:left;">int</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">version</td></tr></tbody></table> <h4 id="act-hi-actinst"><a href="#act-hi-actinst" class="header-anchor">#</a> act_hi_actinst</h4> <p>历史节点表，历史活动信息</p> <blockquote><p>这里记录流程流转过的所有节点，与HI_TASKINST不同的是，taskinst只记录usertask内容</p></blockquote> <table><thead><tr><th style="text-align:left;">字段名称</th> <th style="text-align:left;">字段描述</th> <th style="text-align:left;">数据类型</th> <th style="text-align:left;">主键</th> <th style="text-align:left;">为空</th> <th style="text-align:left;">取值说明</th></tr></thead> <tbody><tr><td style="text-align:left;">ID_</td> <td style="text-align:left;">ID_</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">PROC_DEF_ID_</td> <td style="text-align:left;">流程定义ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">PROC_INST_ID_</td> <td style="text-align:left;">流程实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">EXECUTION_ID_</td> <td style="text-align:left;">执行实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">ACT_ID_</td> <td style="text-align:left;">节点ID</td> <td style="text-align:left;">nvarchar(225)</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td> <td style="text-align:left;">节点定义ID</td></tr> <tr><td style="text-align:left;">TASK_ID_</td> <td style="text-align:left;">任务实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">任务实例ID 其他节点类型实例ID在这里为空</td></tr> <tr><td style="text-align:left;">CALL_PROC_INST_ID_</td> <td style="text-align:left;">调用外部的流程实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">调用外部流程的流程实例ID’</td></tr> <tr><td style="text-align:left;">ACT_NAME_</td> <td style="text-align:left;">节点名称</td> <td style="text-align:left;">nvarchar(225)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">节点定义名称</td></tr> <tr><td style="text-align:left;">ACT_TYPE_</td> <td style="text-align:left;">节点类型</td> <td style="text-align:left;">nvarchar(225)</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td> <td style="text-align:left;">如startEvent、userTask</td></tr> <tr><td style="text-align:left;">ASSIGNEE_</td> <td style="text-align:left;">签收人</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">节点签收人</td></tr> <tr><td style="text-align:left;">START_TIME_</td> <td style="text-align:left;">开始时间</td> <td style="text-align:left;">datetime</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td> <td style="text-align:left;">2013-09-15 11:30:00</td></tr> <tr><td style="text-align:left;">END_TIME_</td> <td style="text-align:left;">结束时间</td> <td style="text-align:left;">datetime</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">2013-09-15 11:30:00</td></tr> <tr><td style="text-align:left;">DURATION_</td> <td style="text-align:left;">耗时</td> <td style="text-align:left;">numeric(19,0)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">毫秒值</td></tr></tbody></table> <p><strong>索引</strong></p> <table><thead><tr><th>名称</th> <th>字段</th> <th>类型</th></tr></thead> <tbody><tr><td>ACT_IDX_HI_ACT_INST_START</td> <td>START_TIME_</td> <td>NORMAL</td></tr> <tr><td>ACT_IDX_HI_ACT_INST_END</td> <td>END_TIME_</td> <td>NORMAL</td></tr> <tr><td>ACT_IDX_HI_ACT_INST_PROCINST</td> <td>PROC_INST_ID_</td> <td>NORMAL</td></tr> <tr><td>ACT_IDX_HI_ACT_INST_EXEC</td> <td>EXECUTION_ID_</td> <td>NORMAL</td></tr></tbody></table> <h4 id="act-hi-attachment"><a href="#act-hi-attachment" class="header-anchor">#</a> act_hi_attachment</h4> <p>历史附件表</p> <table><thead><tr><th style="text-align:left;">字段名称</th> <th style="text-align:left;">字段描述</th> <th style="text-align:left;">数据类型</th> <th style="text-align:left;">主键</th> <th style="text-align:left;">为空</th> <th style="text-align:left;">取值说明</th></tr></thead> <tbody><tr><td style="text-align:left;">ID_</td> <td style="text-align:left;">ID_</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td> <td style="text-align:left;">主键ID</td></tr> <tr><td style="text-align:left;">REV_</td> <td style="text-align:left;">乐观锁</td> <td style="text-align:left;">integer</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">Version</td></tr> <tr><td style="text-align:left;">USER_ID_</td> <td style="text-align:left;">用户ID</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">用户ID</td></tr> <tr><td style="text-align:left;">NAME_</td> <td style="text-align:left;">名称</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">附件名称</td></tr> <tr><td style="text-align:left;">DESCRIPTION_</td> <td style="text-align:left;">描述</td> <td style="text-align:left;">nvarchar(4000)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">描述</td></tr> <tr><td style="text-align:left;">TYPE_</td> <td style="text-align:left;">类型</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">附件类型</td></tr> <tr><td style="text-align:left;">TASK_ID_</td> <td style="text-align:left;">任务实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">节点实例ID</td></tr> <tr><td style="text-align:left;">PROC_INST_ID_</td> <td style="text-align:left;">流程实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">流程实例ID</td></tr> <tr><td style="text-align:left;">URL_</td> <td style="text-align:left;">URL_</td> <td style="text-align:left;">nvarchar(4000)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">附件地址</td></tr> <tr><td style="text-align:left;">CONTENT_ID_</td> <td style="text-align:left;">字节表的ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">ACT_GE_BYTEARRAY的ID</td></tr></tbody></table> <h4 id="act-hi-comment"><a href="#act-hi-comment" class="header-anchor">#</a> act_hi_comment</h4> <table><thead><tr><th style="text-align:left;">字段名称</th> <th style="text-align:left;">字段描述</th> <th style="text-align:left;">数据类型</th> <th style="text-align:left;">主键</th> <th style="text-align:left;">为空</th> <th style="text-align:left;">取值说明</th></tr></thead> <tbody><tr><td style="text-align:left;">ID_</td> <td style="text-align:left;">ID_</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td> <td style="text-align:left;">主键ID</td></tr> <tr><td style="text-align:left;">TYPE_</td> <td style="text-align:left;">类型</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">类型：event（事件）comment（意见）</td></tr> <tr><td style="text-align:left;">TIME_</td> <td style="text-align:left;">时间</td> <td style="text-align:left;">datetime</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td> <td style="text-align:left;">填写时间</td></tr> <tr><td style="text-align:left;">USER_ID_</td> <td style="text-align:left;">用户ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">填写人</td></tr> <tr><td style="text-align:left;">TASK_ID_</td> <td style="text-align:left;">节点任务ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">节点实例ID</td></tr> <tr><td style="text-align:left;">PROC_INST_ID_</td> <td style="text-align:left;">流程实例ID</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">流程实例ID</td></tr> <tr><td style="text-align:left;">ACTION_</td> <td style="text-align:left;">行为类型</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">见备注1</td></tr> <tr><td style="text-align:left;">MESSAGE_</td> <td style="text-align:left;">基本内容</td> <td style="text-align:left;">nvarchar(4000)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">用于存放流程产生的信息，比如审批意见</td></tr> <tr><td style="text-align:left;">FULL_MSG_</td> <td style="text-align:left;">全部内容</td> <td style="text-align:left;">varbinary(max)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">附件地址</td></tr></tbody></table> <h4 id="act-hi-detail"><a href="#act-hi-detail" class="header-anchor">#</a> act_hi_detail</h4> <p>历史详情表</p> <p>流程中产生的变量详细，包括控制流程流转的变量，业务表单中填写的流程需要用到的变量等</p> <table><thead><tr><th style="text-align:left;">字段名称</th> <th style="text-align:left;">字段描述</th> <th style="text-align:left;">数据类型</th> <th style="text-align:left;">主键</th> <th style="text-align:left;">为空</th> <th style="text-align:left;">取值说明</th></tr></thead> <tbody><tr><td style="text-align:left;">ID_</td> <td style="text-align:left;">ID_</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td> <td style="text-align:left;">主键</td></tr> <tr><td style="text-align:left;">TYPE_</td> <td style="text-align:left;">类型</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td> <td style="text-align:left;">见备注2</td></tr> <tr><td style="text-align:left;">PROC_INST_ID_</td> <td style="text-align:left;">流程实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">流程实例ID</td></tr> <tr><td style="text-align:left;">EXECUTION_ID_</td> <td style="text-align:left;">执行实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">执行实例ID</td></tr> <tr><td style="text-align:left;">TASK_ID_</td> <td style="text-align:left;">任务实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">任务实例ID</td></tr> <tr><td style="text-align:left;">ACT_INST_ID_</td> <td style="text-align:left;">节点实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">ACT_HI_ACTINST表的ID</td></tr> <tr><td style="text-align:left;">NAME_</td> <td style="text-align:left;">名称</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td> <td style="text-align:left;">名称</td></tr> <tr><td style="text-align:left;">VAR_TYPE_</td> <td style="text-align:left;">参数类型</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">见备注3</td></tr> <tr><td style="text-align:left;">REV_</td> <td style="text-align:left;">乐观锁</td> <td style="text-align:left;">int</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">Version</td></tr> <tr><td style="text-align:left;">TIME_</td> <td style="text-align:left;">时间戳</td> <td style="text-align:left;">datetime</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td> <td style="text-align:left;">创建时间</td></tr> <tr><td style="text-align:left;">BYTEARRAY_ID_</td> <td style="text-align:left;">字节表ID</td> <td style="text-align:left;">nvarchar</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">ACT_GE_BYTEARRAY表的ID</td></tr> <tr><td style="text-align:left;">DOUBLE_</td> <td style="text-align:left;">DOUBLE_</td> <td style="text-align:left;">double precision</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">存储变量类型为Double</td></tr> <tr><td style="text-align:left;">LONG_</td> <td style="text-align:left;">LONG_</td> <td style="text-align:left;">numeric</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">存储变量类型为long</td></tr> <tr><td style="text-align:left;">TEXT_</td> <td style="text-align:left;">TEXT_</td> <td style="text-align:left;">nvarchar</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">存储变量值类型为String</td></tr> <tr><td style="text-align:left;">TEXT2_</td> <td style="text-align:left;">TEXT2_</td> <td style="text-align:left;">nvarchar</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">此处存储的是JPA持久化对象时，才会有值。此值为对象ID</td></tr></tbody></table> <p><strong>索引</strong></p> <table><thead><tr><th>名称</th> <th>字段</th> <th>类型</th></tr></thead> <tbody><tr><td>ACT_IDX_HI_DETAIL_PROC_INST</td> <td>PROC_INST_ID_</td> <td>NORMAL</td></tr> <tr><td>ACT_IDX_HI_DETAIL_ACT_INST</td> <td>ACT_INST_ID_</td> <td>NORMAL</td></tr> <tr><td>ACT_IDX_HI_DETAIL_TIME</td> <td>TIME_</td> <td>NORMAL</td></tr> <tr><td>ACT_IDX_HI_DETAIL_NAME</td> <td>NAME_</td> <td>NORMAL</td></tr> <tr><td>ACT_IDX_HI_DETAIL_TASK_ID</td> <td>TASK_ID_</td> <td>NORMAL</td></tr></tbody></table> <h4 id="act-hi-identitylink"><a href="#act-hi-identitylink" class="header-anchor">#</a> act_hi_identitylink</h4> <p>历史流程人员表</p> <p>任务参与者数据表。主要存储历史节点参与者的信息</p> <table><thead><tr><th style="text-align:left;">字段名称</th> <th style="text-align:left;">字段描述</th> <th style="text-align:left;">数据类型</th> <th style="text-align:left;">主键</th> <th style="text-align:left;">为空</th> <th style="text-align:left;">取值说明</th></tr></thead> <tbody><tr><td style="text-align:left;">ID_</td> <td style="text-align:left;">ID_</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td> <td style="text-align:left;">ID_</td></tr> <tr><td style="text-align:left;">GROUP_ID_</td> <td style="text-align:left;">组ID</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">组ID</td></tr> <tr><td style="text-align:left;">TYPE_</td> <td style="text-align:left;">类型</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">备注4</td></tr> <tr><td style="text-align:left;">USER_ID_</td> <td style="text-align:left;">用户ID</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">用户ID</td></tr> <tr><td style="text-align:left;">TASK_ID_</td> <td style="text-align:left;">节点实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">节点实例ID</td></tr> <tr><td style="text-align:left;">PROC_INST_ID_</td> <td style="text-align:left;">流程实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">流程实例ID</td></tr></tbody></table> <p><strong>索引</strong></p> <table><thead><tr><th>名称</th> <th>字段</th> <th>类型</th></tr></thead> <tbody><tr><td>ACT_IDX_HI_IDENT_LNK_USER</td> <td>USER_ID_</td> <td>NORMAL</td></tr> <tr><td>ACT_IDX_HI_IDENT_LNK_TASK</td> <td>TASK_ID_</td> <td>NORMAL</td></tr> <tr><td>ACT_IDX_HI_IDENT_LNK_PROCINST</td> <td>PROC_INST_ID_</td> <td>NORMAL</td></tr></tbody></table> <h4 id="act-hi-procinst"><a href="#act-hi-procinst" class="header-anchor">#</a> act_hi_procinst</h4> <p>历史流程实例表</p> <table><thead><tr><th style="text-align:left;">字段名称</th> <th style="text-align:left;">字段描述</th> <th style="text-align:left;">数据类型</th> <th style="text-align:left;">主键</th> <th style="text-align:left;">为空</th> <th style="text-align:left;">取值说明</th></tr></thead> <tbody><tr><td style="text-align:left;">ID_</td> <td style="text-align:left;">ID_</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td> <td style="text-align:left;">主键ID</td></tr> <tr><td style="text-align:left;">PROC_INST_ID_</td> <td style="text-align:left;">流程实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td> <td style="text-align:left;">流程实例ID</td></tr> <tr><td style="text-align:left;">BUSINESS_KEY_</td> <td style="text-align:left;">业务主键</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">业务主键，业务表单的ID</td></tr> <tr><td style="text-align:left;">PROC_DEF_ID_</td> <td style="text-align:left;">流程定义ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td> <td style="text-align:left;">流程定义ID</td></tr> <tr><td style="text-align:left;">START_TIME_</td> <td style="text-align:left;">开始时间</td> <td style="text-align:left;">datetime</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td> <td style="text-align:left;">开始时间</td></tr> <tr><td style="text-align:left;">END_TIME_</td> <td style="text-align:left;">结束时间</td> <td style="text-align:left;">datetime</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">结束时间</td></tr> <tr><td style="text-align:left;">DURATION_</td> <td style="text-align:left;">耗时</td> <td style="text-align:left;">Numeric(19)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">耗时</td></tr> <tr><td style="text-align:left;">START_USER_ID_</td> <td style="text-align:left;">起草人</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">起草人</td></tr> <tr><td style="text-align:left;">START_ACT_ID_</td> <td style="text-align:left;">开始节点ID</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">起草环节ID</td></tr> <tr><td style="text-align:left;">END_ACT_ID_</td> <td style="text-align:left;">结束节点ID</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">结束环节ID</td></tr> <tr><td style="text-align:left;">SUPER_PROCESS_INSTANCE_ID_</td> <td style="text-align:left;">父流程实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">父流程实例ID</td></tr> <tr><td style="text-align:left;">DELETE_REASON_</td> <td style="text-align:left;">删除原因</td> <td style="text-align:left;">nvarchar(4000)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">删除原因</td></tr></tbody></table> <p><strong>索引</strong></p> <table><thead><tr><th>名称</th> <th>字段</th> <th>类型</th></tr></thead> <tbody><tr><td>PROC_INST_ID_</td> <td>PROC_INST_ID_</td> <td>UNIQUE</td></tr> <tr><td>ACT_UNIQ_HI_BUS_KEY</td> <td>PROC_DEF_ID_ , BUSINESS_KEY_</td> <td>UNIQUE</td></tr> <tr><td>ACT_IDX_HI_PRO_INST_END</td> <td>END_TIME_</td> <td>NORMAL</td></tr> <tr><td>ACT_IDX_HI_PRO_I_BUSKEY</td> <td>BUSINESS_KEY_</td> <td>NORMAL</td></tr></tbody></table> <h4 id="act-hi-taskinst"><a href="#act-hi-taskinst" class="header-anchor">#</a> act_hi_taskinst</h4> <p>历史任务实例表</p> <table><thead><tr><th style="text-align:left;">字段名称</th> <th style="text-align:left;">字段描述</th> <th style="text-align:left;">数据类型</th> <th style="text-align:left;">主键</th> <th style="text-align:left;">为空</th> <th style="text-align:left;">取值说明</th></tr></thead> <tbody><tr><td style="text-align:left;">ID_</td> <td style="text-align:left;">ID_</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td> <td style="text-align:left;">主键ID</td></tr> <tr><td style="text-align:left;">PROC_DEF_ID_</td> <td style="text-align:left;">流程定义ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">流程定义ID</td></tr> <tr><td style="text-align:left;">TASK_DEF_KEY_</td> <td style="text-align:left;">节点定义ID</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">节点定义ID</td></tr> <tr><td style="text-align:left;">PROC_INST_ID_</td> <td style="text-align:left;">流程实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">流程实例ID</td></tr> <tr><td style="text-align:left;">EXECUTION_ID_</td> <td style="text-align:left;">执行实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">执行实例ID</td></tr> <tr><td style="text-align:left;">NAME_</td> <td style="text-align:left;">名称</td> <td style="text-align:left;">varchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">名称</td></tr> <tr><td style="text-align:left;">PARENT_TASK_ID_</td> <td style="text-align:left;">父节点实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">父节点实例ID</td></tr> <tr><td style="text-align:left;">DESCRIPTION_</td> <td style="text-align:left;">描述</td> <td style="text-align:left;">nvarchar(400)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">描述</td></tr> <tr><td style="text-align:left;">OWNER_</td> <td style="text-align:left;">实际签收人 任务的拥有者</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">签收人（默认为空，只有在委托时才有值）</td></tr> <tr><td style="text-align:left;">ASSIGNEE_</td> <td style="text-align:left;">签收人或被委托</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">签收人或被委托</td></tr> <tr><td style="text-align:left;">START_TIME_</td> <td style="text-align:left;">开始时间</td> <td style="text-align:left;">datetime</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td> <td style="text-align:left;">开始时间</td></tr> <tr><td style="text-align:left;">CLAIM_TIME_</td> <td style="text-align:left;">提醒时间</td> <td style="text-align:left;">datetime</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">提醒时间</td></tr> <tr><td style="text-align:left;">END_TIME_</td> <td style="text-align:left;">结束时间</td> <td style="text-align:left;">datetime</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">结束时间</td></tr> <tr><td style="text-align:left;">DURATION_</td> <td style="text-align:left;">耗时</td> <td style="text-align:left;">numeric(19)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">耗时</td></tr> <tr><td style="text-align:left;">DELETE_REASON_</td> <td style="text-align:left;">删除原因</td> <td style="text-align:left;">nvarchar(4000)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">删除原因(completed,deleted)</td></tr> <tr><td style="text-align:left;">PRIORITY_</td> <td style="text-align:left;">优先级别</td> <td style="text-align:left;">int</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">优先级别</td></tr> <tr><td style="text-align:left;">DUE_DATE_</td> <td style="text-align:left;">过期时间</td> <td style="text-align:left;">datetime</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">过期时间，表明任务应在多长时间内完成</td></tr> <tr><td style="text-align:left;">FORM_KEY_</td> <td style="text-align:left;">节点定义的formkey</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">desinger节点定义的form_key属性</td></tr></tbody></table> <h4 id="act-hi-varinst"><a href="#act-hi-varinst" class="header-anchor">#</a> act_hi_varinst</h4> <p>历史变量表</p> <table><thead><tr><th style="text-align:left;">字段名称</th> <th style="text-align:left;">字段描述</th> <th style="text-align:left;">数据类型</th> <th style="text-align:left;">主键</th> <th style="text-align:left;">为空</th> <th style="text-align:left;">取值说明</th></tr></thead> <tbody><tr><td style="text-align:left;">ID_</td> <td style="text-align:left;">ID_</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td> <td style="text-align:left;">ID_</td></tr> <tr><td style="text-align:left;">PROC_INST_ID_</td> <td style="text-align:left;">流程实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">流程实例ID</td></tr> <tr><td style="text-align:left;">EXECUTION_ID_</td> <td style="text-align:left;">执行实例ID</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">执行实例ID</td></tr> <tr><td style="text-align:left;">TASK_ID_</td> <td style="text-align:left;">任务实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">任务实例ID</td></tr> <tr><td style="text-align:left;">NAME_</td> <td style="text-align:left;">名称</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td> <td style="text-align:left;">参数名称(英文)</td></tr> <tr><td style="text-align:left;">VAR_TYPE_</td> <td style="text-align:left;">参数类型</td> <td style="text-align:left;">varchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">备注5</td></tr> <tr><td style="text-align:left;">REV_</td> <td style="text-align:left;">乐观锁</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">乐观锁 Version</td></tr> <tr><td style="text-align:left;">BYTEARRAY_ID_</td> <td style="text-align:left;">字节表ID</td> <td style="text-align:left;">nvarchar(400)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">ACT_GE_BYTEARRAY表的主键</td></tr> <tr><td style="text-align:left;">DOUBLE_</td> <td style="text-align:left;">DOUBLE_</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">存储DoubleType类型的数据</td></tr> <tr><td style="text-align:left;">LONG_</td> <td style="text-align:left;">LONG_</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">存储LongType类型的数据</td></tr> <tr><td style="text-align:left;">TEXT_</td> <td style="text-align:left;">TEXT_</td> <td style="text-align:left;">datetime</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">备注6</td></tr> <tr><td style="text-align:left;">TEXT2_</td> <td style="text-align:left;">TEXT2_</td> <td style="text-align:left;">datetime</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">此处存储的是JPA持久化对象时，才会有值。此值为对象ID</td></tr></tbody></table> <p><strong>索引</strong></p> <table><thead><tr><th>名称</th> <th>字段</th> <th>类型</th></tr></thead> <tbody><tr><td>ACT_IDX_HI_PROCVAR_PROC_INST</td> <td>PROC_INST_ID_</td> <td>NORMAL</td></tr> <tr><td>ACT_IDX_HI_PROCVAR_NAME_TYPE</td> <td>NAME_ , VAR_TYPE_</td> <td>NORMAL</td></tr></tbody></table> <h4 id="act-id-group"><a href="#act-id-group" class="header-anchor">#</a> act_id_group</h4> <p>用户组信息表</p> <table><thead><tr><th style="text-align:left;">字段名称</th> <th style="text-align:left;">字段描述</th> <th style="text-align:left;">数据类型</th> <th style="text-align:left;">主键</th> <th style="text-align:left;">为空</th> <th style="text-align:left;">取值说明</th></tr></thead> <tbody><tr><td style="text-align:left;">ID_</td> <td style="text-align:left;">ID_</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td> <td style="text-align:left;">主键ID</td></tr> <tr><td style="text-align:left;">REV_</td> <td style="text-align:left;">乐观锁</td> <td style="text-align:left;">int</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">乐观锁Version</td></tr> <tr><td style="text-align:left;">NAME_</td> <td style="text-align:left;">名称</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">组名称</td></tr> <tr><td style="text-align:left;">TYPE_</td> <td style="text-align:left;">类型</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">类型</td></tr></tbody></table> <h4 id="act-id-info"><a href="#act-id-info" class="header-anchor">#</a> act_id_info</h4> <p>用户扩展信息表</p> <table><thead><tr><th style="text-align:left;">字段名称</th> <th style="text-align:left;">字段描述</th> <th style="text-align:left;">数据类型</th> <th style="text-align:left;">主键</th> <th style="text-align:left;">为空</th> <th style="text-align:left;">取值说明</th></tr></thead> <tbody><tr><td style="text-align:left;">ID_</td> <td style="text-align:left;">ID_</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td> <td style="text-align:left;">主键ID</td></tr> <tr><td style="text-align:left;">REV_</td> <td style="text-align:left;">乐观锁</td> <td style="text-align:left;">int</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">乐观锁Version</td></tr> <tr><td style="text-align:left;">USER_ID_</td> <td style="text-align:left;">用户ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">TYPE_</td> <td style="text-align:left;">类型</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">KEY_</td> <td style="text-align:left;"></td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">VALUE_</td> <td style="text-align:left;"></td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">PASSWORD_</td> <td style="text-align:left;"></td> <td style="text-align:left;">Image</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">PARENT_ID_</td> <td style="text-align:left;"></td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td></tr></tbody></table> <h4 id="act-id-membership"><a href="#act-id-membership" class="header-anchor">#</a> act_id_membership</h4> <p>用户与分组对应信息表</p> <p>用来保存用户的分组信息</p> <table><thead><tr><th style="text-align:left;">字段名称</th> <th style="text-align:left;">字段描述</th> <th style="text-align:left;">数据类型</th> <th style="text-align:left;">主键</th> <th style="text-align:left;">为空</th> <th style="text-align:left;">取值说明</th></tr></thead> <tbody><tr><td style="text-align:left;">USER_ID</td> <td style="text-align:left;">用户ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">GROUP_ID</td> <td style="text-align:left;">用户组ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr></tbody></table> <p><strong>索引</strong></p> <table><thead><tr><th>名称</th> <th>字段</th> <th>类型</th></tr></thead> <tbody><tr><td>ACT_FK_MEMB_GROUP</td> <td>GROUP_ID_</td> <td>NORMAL</td></tr></tbody></table> <h4 id="act-id-user"><a href="#act-id-user" class="header-anchor">#</a> act_id_user</h4> <p>用户信息表</p> <table><thead><tr><th style="text-align:left;">字段名称</th> <th style="text-align:left;">字段描述</th> <th style="text-align:left;">数据类型</th> <th style="text-align:left;">主键</th> <th style="text-align:left;">为空</th> <th style="text-align:left;">取值说明</th></tr></thead> <tbody><tr><td style="text-align:left;">ID_</td> <td style="text-align:left;">ID_</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td> <td style="text-align:left;">主键ID</td></tr> <tr><td style="text-align:left;">REV_</td> <td style="text-align:left;">乐观锁</td> <td style="text-align:left;">int</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">乐观锁Version</td></tr> <tr><td style="text-align:left;">FIRST_</td> <td style="text-align:left;">姓</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">LAST_</td> <td style="text-align:left;">名</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">EMAIL_</td> <td style="text-align:left;">EMAIL_</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">PWD_</td> <td style="text-align:left;">密码</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">PICTURE_ID_</td> <td style="text-align:left;">图片ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td></tr></tbody></table> <h4 id="act-re-deployment"><a href="#act-re-deployment" class="header-anchor">#</a> act_re_deployment</h4> <p>部署信息表</p> <p>部署流程定义时需要被持久化保存下来的信息</p> <table><thead><tr><th style="text-align:left;">字段名称</th> <th style="text-align:left;">字段描述</th> <th style="text-align:left;">数据类型</th> <th style="text-align:left;">主键</th> <th style="text-align:left;">为空</th> <th style="text-align:left;">取值说明</th></tr></thead> <tbody><tr><td style="text-align:left;">ID_</td> <td style="text-align:left;">ID_</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td> <td style="text-align:left;">主键ID</td></tr> <tr><td style="text-align:left;">NAME_</td> <td style="text-align:left;">部署名称</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">部署文件名</td></tr> <tr><td style="text-align:left;">CATEGORY_</td> <td style="text-align:left;">分类</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">类别</td></tr> <tr><td style="text-align:left;">DEPLOY_TIME_</td> <td style="text-align:left;">部署时间</td> <td style="text-align:left;">datetime</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">部署时间</td></tr></tbody></table> <h4 id="act-re-model"><a href="#act-re-model" class="header-anchor">#</a> act_re_model</h4> <p>流程设计模型部署表</p> <p>流程设计器设计流程后，保存数据到该表</p> <table><thead><tr><th style="text-align:left;">字段名称</th> <th style="text-align:left;">字段描述</th> <th style="text-align:left;">数据类型</th> <th style="text-align:left;">主键</th> <th style="text-align:left;">为空</th> <th style="text-align:left;">取值说明</th></tr></thead> <tbody><tr><td style="text-align:left;">ID_</td> <td style="text-align:left;">ID_</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td> <td style="text-align:left;">ID_</td></tr> <tr><td style="text-align:left;">REV_</td> <td style="text-align:left;">乐观锁</td> <td style="text-align:left;">int</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">乐观锁</td></tr> <tr><td style="text-align:left;">NAME_</td> <td style="text-align:left;">名称</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">名称</td></tr> <tr><td style="text-align:left;">KEY_</td> <td style="text-align:left;">KEY_</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">分类</td></tr> <tr><td style="text-align:left;">CATEGORY_</td> <td style="text-align:left;">分类</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">分类</td></tr> <tr><td style="text-align:left;">CREATE_TIME_</td> <td style="text-align:left;">创建时间</td> <td style="text-align:left;">datetime</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">创建时间</td></tr> <tr><td style="text-align:left;">LAST_UPDATE_TIME_</td> <td style="text-align:left;">最新修改时间</td> <td style="text-align:left;">datetime</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">最新修改时间</td></tr> <tr><td style="text-align:left;">VERSION_</td> <td style="text-align:left;">版本</td> <td style="text-align:left;">int</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">版本</td></tr> <tr><td style="text-align:left;">META_INFO_</td> <td style="text-align:left;">META_INFO_</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">以json格式保存流程定义的信息</td></tr> <tr><td style="text-align:left;">DEPLOYMENT_ID_</td> <td style="text-align:left;">部署ID</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">部署ID</td></tr> <tr><td style="text-align:left;">EDITOR_SOURCE_VALUE_ID_</td> <td style="text-align:left;"></td> <td style="text-align:left;">datetime</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">EDITOR_SOURCE_EXTRA_VALUE_ID_</td> <td style="text-align:left;"></td> <td style="text-align:left;">datetime</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td></tr></tbody></table> <p><strong>索引</strong></p> <table><thead><tr><th>名称</th> <th>字段</th> <th>类型</th></tr></thead> <tbody><tr><td>ACT_FK_MODEL_SOURCE</td> <td>EDITOR_SOURCE_VALUE_ID_</td> <td>NORMAL</td></tr> <tr><td>ACT_FK_MODEL_SOURCE_EXTRA</td> <td>EDITOR_SOURCE_EXTRA_VALUE_ID_</td> <td>NORMAL</td></tr> <tr><td>ACT_FK_MODEL_DEPLOYMENT</td> <td>DEPLOYMENT_ID_</td> <td>NORMAL</td></tr></tbody></table> <h4 id="act-re-procdef"><a href="#act-re-procdef" class="header-anchor">#</a> act_re_procdef</h4> <p>流程定义数据表</p> <blockquote><p>业务流程定义数据表。此表和 <a href="#act_re_deployment">act_re_deployment</a> 是多对一的关系，一个部署的bar包里可能包含多个流程定义文件，每个流程定义文件都会有一条记录在 <a href="#act_re_procdef">act_re_procdef</a>表内，每个流程定义的数据，都会对于 <a href="#act_ge_bytearray">act_ge_bytearray</a>表内的一个资源文件和 PNG 图片文件。和 <a href="#act_ge_bytearray">act_ge_bytearray</a>的关联是通过程序用 act_ge_bytearray.NAME 与 act_re_procdef.NAME 完成的，在数据库表结构中没有体现。</p></blockquote> <table><thead><tr><th style="text-align:left;">字段名称</th> <th style="text-align:left;">字段描述</th> <th style="text-align:left;">数据类型</th> <th style="text-align:left;">主键</th> <th style="text-align:left;">为空</th> <th style="text-align:left;">取值说明</th></tr></thead> <tbody><tr><td style="text-align:left;">ID_</td> <td style="text-align:left;">ID_</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td> <td style="text-align:left;">ID_</td></tr> <tr><td style="text-align:left;">REV_</td> <td style="text-align:left;">乐观锁</td> <td style="text-align:left;">int</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">乐观锁</td></tr> <tr><td style="text-align:left;">CATEGORY_</td> <td style="text-align:left;">分类</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">流程定义的Namespace就是类别</td></tr> <tr><td style="text-align:left;">NAME_</td> <td style="text-align:left;">名称</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">名称</td></tr> <tr><td style="text-align:left;">KEY_</td> <td style="text-align:left;">定义的KEY</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td> <td style="text-align:left;">流程定义ID</td></tr> <tr><td style="text-align:left;">VERSION_</td> <td style="text-align:left;">版本</td> <td style="text-align:left;">int</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td> <td style="text-align:left;">版本</td></tr> <tr><td style="text-align:left;">DEPLOYMENT_ID_</td> <td style="text-align:left;">部署表ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">部署表ID</td></tr> <tr><td style="text-align:left;">RESOURCE_NAME_</td> <td style="text-align:left;">bpmn文件名称</td> <td style="text-align:left;">nvarchar(4000)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">流程bpmn文件名称</td></tr> <tr><td style="text-align:left;">DGRM_RESOURCE_NAME_</td> <td style="text-align:left;">png图片名称</td> <td style="text-align:left;">nvarchar(4000)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">流程图片名称</td></tr> <tr><td style="text-align:left;">DESCRIPTION_</td> <td style="text-align:left;">描述</td> <td style="text-align:left;">nvarchar(4000)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">描述</td></tr> <tr><td style="text-align:left;">HAS_START_FORM_KEY_</td> <td style="text-align:left;">是否存在开始节点formKey</td> <td style="text-align:left;">tinyint</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">start节点是否存在formKey 0否 1是</td></tr> <tr><td style="text-align:left;">SUSPENSION_STATE_</td> <td style="text-align:left;">是否挂起</td> <td style="text-align:left;">tinyint</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">1 激活 2挂起</td></tr></tbody></table> <p><strong>索引</strong></p> <table><thead><tr><th>名称</th> <th>字段</th> <th>类型</th></tr></thead> <tbody><tr><td>ACT_UNIQ_PROCDEF</td> <td>KEY_ , VERSION_</td> <td>UNIQUE</td></tr></tbody></table> <h4 id="act-ru-event-subscr"><a href="#act-ru-event-subscr" class="header-anchor">#</a> act_ru_event_subscr</h4> <blockquote><p>事件订阅表（act_ru_event_subscr）</p></blockquote> <p>事件订阅表。此表包含所有当前存在的事件订阅。它包括预期事件的类型，名称和配置，以及有关相应流程实例和执行的信息。</p> <table><thead><tr><th style="text-align:left;">字段名称</th> <th style="text-align:left;">字段描述</th> <th style="text-align:left;">数据类型</th> <th style="text-align:left;">主键</th> <th style="text-align:left;">为空</th> <th style="text-align:left;">取值说明</th></tr></thead> <tbody><tr><td style="text-align:left;">ID_</td> <td style="text-align:left;">事件ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td> <td style="text-align:left;">事件ID</td></tr> <tr><td style="text-align:left;">REV_</td> <td style="text-align:left;">版本</td> <td style="text-align:left;">int</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">乐观锁Version</td></tr> <tr><td style="text-align:left;">EVENT_TYPE_</td> <td style="text-align:left;">事件类型</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td> <td style="text-align:left;">事件类型</td></tr> <tr><td style="text-align:left;">EVENT_NAME_</td> <td style="text-align:left;">事件名称</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">事件名称</td></tr> <tr><td style="text-align:left;">EXECUTION_ID_</td> <td style="text-align:left;">执行实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">执行实例ID</td></tr> <tr><td style="text-align:left;">PROC_INST_ID_</td> <td style="text-align:left;">流程实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">流程实例ID</td></tr> <tr><td style="text-align:left;">ACTIVITY_ID_</td> <td style="text-align:left;">活动实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">活动实例ID</td></tr> <tr><td style="text-align:left;">CONFIGURATION_</td> <td style="text-align:left;">配置</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">配置</td></tr> <tr><td style="text-align:left;">CREATED_</td> <td style="text-align:left;">是否创建</td> <td style="text-align:left;">datetime</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td> <td style="text-align:left;">默认值 当前系统时间戳CURRENT_TIMESTAMP</td></tr></tbody></table> <p><strong>索引</strong></p> <table><thead><tr><th>名称</th> <th>字段</th> <th>类型</th></tr></thead> <tbody><tr><td>ACT_IDX_EVENT_SUBSCR_CONFIG_</td> <td>CONFIGURATION_</td> <td>NORMAL</td></tr> <tr><td>ACT_FK_EVENT_EXEC</td> <td>EXECUTION_ID_</td> <td>NORMAL</td></tr></tbody></table> <h4 id="act-ru-execution"><a href="#act-ru-execution" class="header-anchor">#</a> act_ru_execution</h4> <blockquote><p>运行时流程执行实例表( act_ru_execution )</p></blockquote> <table><thead><tr><th style="text-align:left;">字段名称</th> <th style="text-align:left;">字段描述</th> <th style="text-align:left;">数据类型</th> <th style="text-align:left;">主键</th> <th style="text-align:left;">为空</th> <th style="text-align:left;">取值说明</th></tr></thead> <tbody><tr><td style="text-align:left;">ID_</td> <td style="text-align:left;">ID_</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td> <td style="text-align:left;">ID_</td></tr> <tr><td style="text-align:left;">REV_</td> <td style="text-align:left;">乐观锁</td> <td style="text-align:left;">int</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">乐观锁</td></tr> <tr><td style="text-align:left;">PROC_INST_ID_</td> <td style="text-align:left;">流程实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td> <td style="text-align:left;">流程实例ID</td></tr> <tr><td style="text-align:left;">BUSINESS_KEY_</td> <td style="text-align:left;">业务主键ID</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">业务主键ID</td></tr> <tr><td style="text-align:left;">PARENT_ID_</td> <td style="text-align:left;">父节点实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">父节点实例ID</td></tr> <tr><td style="text-align:left;">PROC_DEF_ID_</td> <td style="text-align:left;">流程定义ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">流程定义ID</td></tr> <tr><td style="text-align:left;">SUPER_EXEC_</td> <td style="text-align:left;">SUPER_EXEC_</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">SUPER_EXEC_</td></tr> <tr><td style="text-align:left;">ACT_ID_</td> <td style="text-align:left;">节点实例ID</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">节点实例ID即ACT_HI_ACTINST中ID</td></tr> <tr><td style="text-align:left;">IS_ACTIVE_</td> <td style="text-align:left;">是否存活</td> <td style="text-align:left;">tinyint</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">是否存活</td></tr> <tr><td style="text-align:left;">IS_CONCURRENT_</td> <td style="text-align:left;">是否并行</td> <td style="text-align:left;">tinyint</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">是否为并行(true/false）</td></tr> <tr><td style="text-align:left;">IS_SCOPE_</td> <td style="text-align:left;">IS_SCOPE_</td> <td style="text-align:left;">tinyint</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">IS_SCOPE_</td></tr> <tr><td style="text-align:left;">IS_EVENT_SCOPE_</td> <td style="text-align:left;">IS_EVENT_SCOPE_</td> <td style="text-align:left;">tinyint</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">IS_EVENT_SCOPE_</td></tr> <tr><td style="text-align:left;">SUSPENSION_STATE_</td> <td style="text-align:left;">是否挂起</td> <td style="text-align:left;">tinyint</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">挂起状态 1激活 2挂起</td></tr> <tr><td style="text-align:left;">CACHED_ENT_STATE_</td> <td style="text-align:left;"></td> <td style="text-align:left;">int</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td></tr></tbody></table> <p><strong>索引</strong></p> <table><thead><tr><th>名称</th> <th>字段</th> <th>类型</th></tr></thead> <tbody><tr><td>ACT_UNIQ_RU_BUS_KEY</td> <td>PROC_DEF_ID_ , BUSINESS_KEY_</td> <td>UNIQUE</td></tr> <tr><td>ACT_IDX_EXEC_BUSKEY</td> <td>BUSINESS_KEY_</td> <td>NORMAL</td></tr> <tr><td>ACT_FK_EXE_PROCINST</td> <td>PROC_INST_ID_</td> <td>NORMAL</td></tr> <tr><td>ACT_FK_EXE_PARENT</td> <td>PARENT_ID_</td> <td>NORMAL</td></tr> <tr><td>ACT_FK_EXE_SUPER</td> <td>SUPER_EXEC_</td> <td>NORMAL</td></tr></tbody></table> <h4 id="act-ru-identitylink"><a href="#act-ru-identitylink" class="header-anchor">#</a> act_ru_identitylink</h4> <blockquote><p>运行时流程人员表( act_ru_identitylink )</p></blockquote> <p>任务参与者数据表。主要存储当前节点参与者的信息。</p> <table><thead><tr><th style="text-align:left;">字段名称</th> <th style="text-align:left;">字段描述</th> <th style="text-align:left;">数据类型</th> <th style="text-align:left;">主键</th> <th style="text-align:left;">为空</th> <th style="text-align:left;">取值说明</th></tr></thead> <tbody><tr><td style="text-align:left;">ID_</td> <td style="text-align:left;">ID_</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td> <td style="text-align:left;">ID_</td></tr> <tr><td style="text-align:left;">REV_</td> <td style="text-align:left;">乐观锁</td> <td style="text-align:left;">int</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">乐观锁</td></tr> <tr><td style="text-align:left;">GROUP_ID_</td> <td style="text-align:left;">组ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">组ID</td></tr> <tr><td style="text-align:left;">TYPE_</td> <td style="text-align:left;">类型</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">备注7</td></tr> <tr><td style="text-align:left;">USER_ID_</td> <td style="text-align:left;">用户ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">用户ID</td></tr> <tr><td style="text-align:left;">TASK_ID_</td> <td style="text-align:left;">节点实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">节点实例ID</td></tr> <tr><td style="text-align:left;">PROC_INST_ID_</td> <td style="text-align:left;">流程实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">流程实例ID</td></tr> <tr><td style="text-align:left;">PROC_DEF_ID_</td> <td style="text-align:left;">流程定义ID</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">流程定义ID</td></tr></tbody></table> <p><strong>索引</strong></p> <table><thead><tr><th>名称</th> <th>字段</th> <th>类型</th></tr></thead> <tbody><tr><td>ACT_IDX_IDENT_LNK_USER</td> <td>USER_ID_</td> <td>NORMAL</td></tr> <tr><td>ACT_IDX_IDENT_LNK_GROUP</td> <td>GROUP_ID_</td> <td>NORMAL</td></tr> <tr><td>ACT_IDX_ATHRZ_PROCEDEF</td> <td>PROC_DEF_ID_</td> <td>NORMAL</td></tr> <tr><td>ACT_FK_TSKASS_TASK</td> <td>TASK_ID_</td> <td>NORMAL</td></tr> <tr><td>ACT_FK_IDL_PROCINST</td> <td>PROC_INST_ID_</td> <td>NORMAL</td></tr></tbody></table> <h4 id="act-ru-job"><a href="#act-ru-job" class="header-anchor">#</a> act_ru_job</h4> <blockquote><p>运行时定时任务数据表( act_ru_job )</p></blockquote> <table><thead><tr><th style="text-align:left;">字段名称</th> <th style="text-align:left;">字段描述</th> <th style="text-align:left;">数据类型</th> <th style="text-align:left;">主键</th> <th style="text-align:left;">为空</th> <th style="text-align:left;">取值说明</th></tr></thead> <tbody><tr><td style="text-align:left;">ID_</td> <td style="text-align:left;">标识</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td> <td style="text-align:left;">标识</td></tr> <tr><td style="text-align:left;">REV_</td> <td style="text-align:left;">版本</td> <td style="text-align:left;">int</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">版本</td></tr> <tr><td style="text-align:left;">TYPE_</td> <td style="text-align:left;">类型</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td> <td style="text-align:left;">类型</td></tr> <tr><td style="text-align:left;">LOCK_EXP_TIME_</td> <td style="text-align:left;">锁定释放时间</td> <td style="text-align:left;">datetime</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">锁定释放时间</td></tr> <tr><td style="text-align:left;">LOCK_OWNER_</td> <td style="text-align:left;">挂起者</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">挂起者</td></tr> <tr><td style="text-align:left;">EXCLUSIVE_</td> <td style="text-align:left;"></td> <td style="text-align:left;">bit</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">EXECUTION_ID_</td> <td style="text-align:left;">执行实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">执行实例ID</td></tr> <tr><td style="text-align:left;">PROCESS_INSTANCE_ID_</td> <td style="text-align:left;">流程实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">流程实例ID</td></tr> <tr><td style="text-align:left;">PROC_DEF_ID_</td> <td style="text-align:left;">流程定义ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">流程定义ID</td></tr> <tr><td style="text-align:left;">RETRIES_</td> <td style="text-align:left;"></td> <td style="text-align:left;">int</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">EXCEPTION_STACK_ID_</td> <td style="text-align:left;">异常信息ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">异常信息ID</td></tr> <tr><td style="text-align:left;">EXCEPTION_MSG_</td> <td style="text-align:left;">异常信息</td> <td style="text-align:left;">nvarchar(4000)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">异常信息</td></tr> <tr><td style="text-align:left;">DUEDATE_</td> <td style="text-align:left;">到期时间</td> <td style="text-align:left;">datetime</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">到期时间</td></tr> <tr><td style="text-align:left;">REPEAT_</td> <td style="text-align:left;">重复</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">重复</td></tr> <tr><td style="text-align:left;">HANDLER_TYPE_</td> <td style="text-align:left;">处理类型</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">处理类型</td></tr> <tr><td style="text-align:left;">HANDLER_CFG_</td> <td style="text-align:left;"></td> <td style="text-align:left;">nvarchar(4000)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">标识</td></tr></tbody></table> <p><strong>索引</strong></p> <table><thead><tr><th>名称</th> <th>字段</th> <th>类型</th></tr></thead> <tbody><tr><td>ACT_FK_JOB_EXCEPTION</td> <td>EXCEPTION_STACK_ID_</td> <td>NORMAL</td></tr></tbody></table> <h4 id="act-ru-task"><a href="#act-ru-task" class="header-anchor">#</a> act_ru_task</h4> <blockquote><p>运行时任务节点表( act_ru_task )</p></blockquote> <table><thead><tr><th style="text-align:left;">字段名称</th> <th style="text-align:left;">字段描述</th> <th style="text-align:left;">数据类型</th> <th style="text-align:left;">主键</th> <th style="text-align:left;">为空</th> <th style="text-align:left;">取值说明</th></tr></thead> <tbody><tr><td style="text-align:left;">ID_</td> <td style="text-align:left;">ID_</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td> <td style="text-align:left;">ID_</td></tr> <tr><td style="text-align:left;">REV_</td> <td style="text-align:left;">乐观锁</td> <td style="text-align:left;">int</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">乐观锁</td></tr> <tr><td style="text-align:left;">EXECUTION_ID_</td> <td style="text-align:left;">执行实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">执行实例ID</td></tr> <tr><td style="text-align:left;">PROC_INST_ID_</td> <td style="text-align:left;">流程实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">流程实例ID</td></tr> <tr><td style="text-align:left;">PROC_DEF_ID_</td> <td style="text-align:left;">流程定义ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">流程定义ID</td></tr> <tr><td style="text-align:left;">NAME_</td> <td style="text-align:left;">节点定义名称</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">节点定义名称</td></tr> <tr><td style="text-align:left;">PARENT_TASK_ID_</td> <td style="text-align:left;">父节点实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">父节点实例ID</td></tr> <tr><td style="text-align:left;">DESCRIPTION_</td> <td style="text-align:left;">节点定义描述</td> <td style="text-align:left;">nvarchar(4000)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">节点定义描述</td></tr> <tr><td style="text-align:left;">TASK_DEF_KEY_</td> <td style="text-align:left;">节点定义的KEY</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">任务定义的ID</td></tr> <tr><td style="text-align:left;">OWNER_</td> <td style="text-align:left;">实际签收人</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">拥有者（一般情况下为空，只有在委托时才有值）</td></tr> <tr><td style="text-align:left;">ASSIGNEE_</td> <td style="text-align:left;">签收人或委托人</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">签收人或委托人</td></tr> <tr><td style="text-align:left;">DELEGATION_</td> <td style="text-align:left;">委托类型</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">备注8</td></tr> <tr><td style="text-align:left;">PRIORITY_</td> <td style="text-align:left;">优先级别</td> <td style="text-align:left;">int</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">优先级别，默认为：50</td></tr> <tr><td style="text-align:left;">CREATE_TIME_</td> <td style="text-align:left;">创建时间</td> <td style="text-align:left;">datetime</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">创建时间</td></tr> <tr><td style="text-align:left;">DUE_DATE_</td> <td style="text-align:left;">过期时间</td> <td style="text-align:left;">datetime</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">耗时</td></tr> <tr><td style="text-align:left;">SUSPENSION_STATE_</td> <td style="text-align:left;">是否挂起</td> <td style="text-align:left;">int</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">1代表激活 2代表挂起</td></tr></tbody></table> <p><strong>索引</strong></p> <table><thead><tr><th>名称</th> <th>字段</th> <th>类型</th></tr></thead> <tbody><tr><td>ACT_IDX_TASK_CREATE</td> <td>CREATE_TIME_</td> <td>NORMAL</td></tr> <tr><td>ACT_FK_TASK_EXE</td> <td>EXECUTION_ID_</td> <td>NORMAL</td></tr> <tr><td>ACT_FK_TASK_PROCINST</td> <td>PROC_INST_ID_</td> <td>NORMAL</td></tr> <tr><td>ACT_FK_TASK_PROCDEF</td> <td>PROC_DEF_ID_</td> <td>NORMAL</td></tr></tbody></table> <h4 id="act-ru-variable"><a href="#act-ru-variable" class="header-anchor">#</a> act_ru_variable</h4> <blockquote><p>运行时流程变量数据表( act_ru_variable )</p></blockquote> <table><thead><tr><th style="text-align:left;">字段名称</th> <th style="text-align:left;">字段描述</th> <th style="text-align:left;">数据类型</th> <th style="text-align:left;">主键</th> <th style="text-align:left;">为空</th> <th style="text-align:left;">取值说明</th></tr></thead> <tbody><tr><td style="text-align:left;">ID_</td> <td style="text-align:left;">ID_</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td> <td style="text-align:left;">主键标识</td></tr> <tr><td style="text-align:left;">REV_</td> <td style="text-align:left;">乐观锁</td> <td style="text-align:left;">int</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">乐观锁</td></tr> <tr><td style="text-align:left;">TYPE_</td> <td style="text-align:left;">类型</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td> <td style="text-align:left;">备注9</td></tr> <tr><td style="text-align:left;">NAME_</td> <td style="text-align:left;">名称</td> <td style="text-align:left;">nvarchar(255)</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td> <td style="text-align:left;">变量名称</td></tr> <tr><td style="text-align:left;">EXECUTION_ID_</td> <td style="text-align:left;">执行实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">执行的ID</td></tr> <tr><td style="text-align:left;">PROC_INST_ID_</td> <td style="text-align:left;">流程实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">流程实例ID</td></tr> <tr><td style="text-align:left;">TASK_ID_</td> <td style="text-align:left;">节点实例ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">节点实例ID(Local）</td></tr> <tr><td style="text-align:left;">BYTEARRAY_ID_</td> <td style="text-align:left;">字节表ID</td> <td style="text-align:left;">nvarchar(64)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">字节表的ID（ACT_GE_BYTEARRAY）</td></tr> <tr><td style="text-align:left;">DOUBLE_</td> <td style="text-align:left;">DOUBLE_</td> <td style="text-align:left;">float</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">存储变量类型为Double</td></tr> <tr><td style="text-align:left;">LONG_</td> <td style="text-align:left;">LONG_</td> <td style="text-align:left;">numeric(19)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">存储变量类型为long</td></tr> <tr><td style="text-align:left;">TEXT_</td> <td style="text-align:left;">TEXT_</td> <td style="text-align:left;">nvarchar(4000)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">存储变量值类型为String 如此处存储持久化对象时，值jpa对象的class</td></tr> <tr><td style="text-align:left;">TEXT2_</td> <td style="text-align:left;">TEXT2_</td> <td style="text-align:left;">nvarchar(4000)</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td> <td style="text-align:left;">此处存储的是JPA持久化对象时，才会有值。此值为对象ID</td></tr></tbody></table> <p><strong>索引</strong></p> <table><thead><tr><th>名称</th> <th>字段</th> <th>类型</th></tr></thead> <tbody><tr><td>ACT_IDX_VARIABLE_TASK_ID</td> <td>TASK_ID_</td> <td>NORMAL</td></tr> <tr><td>ACT_FK_VAR_EXE</td> <td>EXECUTION_ID_</td> <td>NORMAL</td></tr> <tr><td>ACT_FK_VAR_PROCINST</td> <td>PROC_INST_ID_</td> <td>NORMAL</td></tr> <tr><td>ACT_FK_VAR_BYTEARRAY</td> <td>BYTEARRAY_ID_</td> <td>NORMAL</td></tr></tbody></table> <h2 id="idea应用activiti"><a href="#idea应用activiti" class="header-anchor">#</a> IDEA应用Activiti</h2> <p><strong>IDEA安装插件</strong>：<code>Activiti BPMN visualize</code></p> <p><strong>安装第三方：</strong><code>Camunda</code> （Camunda应用：https://zhuanlan.zhihu.com/p/375908620</p> <p>QA：有了<code>Activiti BPMN visualize</code>为什么还要安装呢？</p> <ol><li>idea2021不能兼容常用的actiBPM</li> <li>Activiti BPMN visualize 会找不到加入监听器的功能</li> <li><strong>关于 assignee 失效</strong>
解决办法：将camunda 替换为 activiti，命名空间改为activity的命名空间，
<ol><li>加入xmlns:activiti=“http://activiti.org/bpmn”</li> <li>camunda改为activiti</li></ol></li></ol> <h2 id="ssm整合activiti"><a href="#ssm整合activiti" class="header-anchor">#</a> SSM整合Activiti</h2> <p><strong>步骤：</strong></p> <ol><li><p>引入Activiti配置。在Spring的xml配置中引入
==<import resource="classpath*:activiti-context.xml"></import>==</p></li> <li><p>配置Activiti配置 <code>activiti-context.xml</code></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans 
       http://www.springframework.org/schema/beans/spring-beans.xsd
<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- spring负责创建流程引擎的配置文件 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>processEngineConfiguration<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.activiti.spring.SpringProcessEngineConfiguration<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 数据源 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!-- 配置事务管理器，统一事务 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transactionManager<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!-- 设置建表策略，如果没有表，自动创建表 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>databaseSchemaUpdate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 创建流程引擎对象 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>processEngine<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.activiti.spring.ProcessEngineFactoryBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>processEngineConfiguration<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>processEngineConfiguration<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 由流程引擎对象，提供的方法，创建项目中使用的Activiti工作流的Service --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>repositoryService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">factory-bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>processEngine<span class="token punctuation">&quot;</span></span> <span class="token attr-name">factory-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getRepositoryService<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>runtimeService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">factory-bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>processEngine<span class="token punctuation">&quot;</span></span> <span class="token attr-name">factory-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getRuntimeService<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>taskService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">factory-bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>processEngine<span class="token punctuation">&quot;</span></span> <span class="token attr-name">factory-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getTaskService<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>historyService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">factory-bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>processEngine<span class="token punctuation">&quot;</span></span> <span class="token attr-name">factory-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getHistoryService<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">factory-bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>processEngine<span class="token punctuation">&quot;</span></span> <span class="token attr-name">factory-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getFormService<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p><strong>PS：</strong> Spring配置的上下中有 事务(transManager)、数据库连接源(dataSource)</p></blockquote></li> <li><p>Serivce业务应用。自动注入服务对象即可</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ActivitiServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">ActivitiService</span> <span class="token punctuation">{</span>
	<span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">RepositoryService</span> repositoryService<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">RuntimeService</span> runtimeService<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">TaskService</span> taskService<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">HistoryService</span> historyService<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">FormService</span> formService<span class="token punctuation">;</span>
    
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol></div></div>  <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=%E5%B7%A5%E4%BD%9C%E6%B5%81" title="标签">#工作流</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/03/12, 00:43:49</span></div></div> <div class="page-nav-wapper"><!----> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/backend/60chrc/" class="prev">Maven</a></span> <span class="next"><a href="/backend/40kn38/">Shiro</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/know/sscal3/"><div>
            克服表达
            <!----></div></a> <span class="date">05-02</span></dt></dl><dl><dd>02</dd> <dt><a href="/know/sc32x1/"><div>
            欲望掌控
            <!----></div></a> <span class="date">04-30</span></dt></dl><dl><dd>03</dd> <dt><a href="/web/sass1992/"><div>
            Sass
            <!----></div></a> <span class="date">04-25</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="Sanscan12" title="联系" target="_blank" class="iconfont icon-weixin"></a><a href="https://github.com/Sanscan12" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/user/home?id=448156561" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2023
    <span> | <a href="https://beian.miit.gov.cn/">桂ICP备2022009417号-1</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.9c51766a.js" defer></script><script src="/assets/js/2.b26d2d6f.js" defer></script><script src="/assets/js/46.e647158b.js" defer></script>
  </body>
</html>
