<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java线程 | 柏竹</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="https://image.bozhu12.cc/myblog/Essay/favicon.ico">
    <script language="javascript" type="text/javascript" src="/js/pgmanor-self.js"></script>
    <meta name="description" content="学习足迹 , 记录生活!">
    <meta name="Sasncan12" content="柏竹博客, 个人技术博客, 前后端端 , 技术文档">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#bd93f9">
    
    <link rel="preload" href="/assets/css/0.styles.eab9c879.css" as="style"><link rel="preload" href="/assets/js/app.1d8e50f9.js" as="script"><link rel="preload" href="/assets/js/2.b26d2d6f.js" as="script"><link rel="preload" href="/assets/js/21.070e0d88.js" as="script"><link rel="prefetch" href="/assets/js/10.7dcdd9e8.js"><link rel="prefetch" href="/assets/js/100.f01251ca.js"><link rel="prefetch" href="/assets/js/101.021f6815.js"><link rel="prefetch" href="/assets/js/102.9bd6536a.js"><link rel="prefetch" href="/assets/js/103.8e53482c.js"><link rel="prefetch" href="/assets/js/104.0b37d0f6.js"><link rel="prefetch" href="/assets/js/105.3c2e08cd.js"><link rel="prefetch" href="/assets/js/106.0481b60f.js"><link rel="prefetch" href="/assets/js/107.29711c13.js"><link rel="prefetch" href="/assets/js/108.5c9ba6e2.js"><link rel="prefetch" href="/assets/js/109.fbad765f.js"><link rel="prefetch" href="/assets/js/11.95f8dafb.js"><link rel="prefetch" href="/assets/js/110.6fb151ea.js"><link rel="prefetch" href="/assets/js/12.6345157a.js"><link rel="prefetch" href="/assets/js/13.65b70c7b.js"><link rel="prefetch" href="/assets/js/14.eeb80160.js"><link rel="prefetch" href="/assets/js/15.c7990199.js"><link rel="prefetch" href="/assets/js/16.4700baf2.js"><link rel="prefetch" href="/assets/js/17.87943e48.js"><link rel="prefetch" href="/assets/js/18.870eb21a.js"><link rel="prefetch" href="/assets/js/19.6366e55e.js"><link rel="prefetch" href="/assets/js/20.94fc0002.js"><link rel="prefetch" href="/assets/js/22.96d2aead.js"><link rel="prefetch" href="/assets/js/23.bf12760c.js"><link rel="prefetch" href="/assets/js/24.37216a4d.js"><link rel="prefetch" href="/assets/js/25.65e92ad2.js"><link rel="prefetch" href="/assets/js/26.f0f9a90a.js"><link rel="prefetch" href="/assets/js/27.a4fb420e.js"><link rel="prefetch" href="/assets/js/28.033f3aae.js"><link rel="prefetch" href="/assets/js/29.a3b97ed2.js"><link rel="prefetch" href="/assets/js/3.373c5f10.js"><link rel="prefetch" href="/assets/js/30.6f95f7aa.js"><link rel="prefetch" href="/assets/js/31.e77feaeb.js"><link rel="prefetch" href="/assets/js/32.c15d12ad.js"><link rel="prefetch" href="/assets/js/33.416ff1b1.js"><link rel="prefetch" href="/assets/js/34.3284860c.js"><link rel="prefetch" href="/assets/js/35.371d75ef.js"><link rel="prefetch" href="/assets/js/36.faef4ca4.js"><link rel="prefetch" href="/assets/js/37.5aff573e.js"><link rel="prefetch" href="/assets/js/38.c948d014.js"><link rel="prefetch" href="/assets/js/39.b852b7b3.js"><link rel="prefetch" href="/assets/js/4.5017c5ca.js"><link rel="prefetch" href="/assets/js/40.dba246e4.js"><link rel="prefetch" href="/assets/js/41.0615f8e5.js"><link rel="prefetch" href="/assets/js/42.7580fca5.js"><link rel="prefetch" href="/assets/js/43.84158594.js"><link rel="prefetch" href="/assets/js/44.e1a3d6f8.js"><link rel="prefetch" href="/assets/js/45.65c30883.js"><link rel="prefetch" href="/assets/js/46.d68ddc16.js"><link rel="prefetch" href="/assets/js/47.d0250cc5.js"><link rel="prefetch" href="/assets/js/48.07487f59.js"><link rel="prefetch" href="/assets/js/49.2cbffbb5.js"><link rel="prefetch" href="/assets/js/5.9c242416.js"><link rel="prefetch" href="/assets/js/50.239981d2.js"><link rel="prefetch" href="/assets/js/51.03c52e25.js"><link rel="prefetch" href="/assets/js/52.f7a16b76.js"><link rel="prefetch" href="/assets/js/53.e2f08af8.js"><link rel="prefetch" href="/assets/js/54.285e1abe.js"><link rel="prefetch" href="/assets/js/55.afd87322.js"><link rel="prefetch" href="/assets/js/56.4a2f528c.js"><link rel="prefetch" href="/assets/js/57.a4b5c179.js"><link rel="prefetch" href="/assets/js/58.75a509fd.js"><link rel="prefetch" href="/assets/js/59.65730bdc.js"><link rel="prefetch" href="/assets/js/6.cd9d56e9.js"><link rel="prefetch" href="/assets/js/60.d961b54a.js"><link rel="prefetch" href="/assets/js/61.f1cacef2.js"><link rel="prefetch" href="/assets/js/62.c9e26ea2.js"><link rel="prefetch" href="/assets/js/63.ffb57286.js"><link rel="prefetch" href="/assets/js/64.43177887.js"><link rel="prefetch" href="/assets/js/65.c84821fb.js"><link rel="prefetch" href="/assets/js/66.ba625964.js"><link rel="prefetch" href="/assets/js/67.82813e83.js"><link rel="prefetch" href="/assets/js/68.cef2612b.js"><link rel="prefetch" href="/assets/js/69.fd6ea64a.js"><link rel="prefetch" href="/assets/js/7.66c4ded7.js"><link rel="prefetch" href="/assets/js/70.ccd2f66f.js"><link rel="prefetch" href="/assets/js/71.979fd0e6.js"><link rel="prefetch" href="/assets/js/72.b64040d4.js"><link rel="prefetch" href="/assets/js/73.5929c855.js"><link rel="prefetch" href="/assets/js/74.94ba1f77.js"><link rel="prefetch" href="/assets/js/75.4682dfd2.js"><link rel="prefetch" href="/assets/js/76.60d48e97.js"><link rel="prefetch" href="/assets/js/77.18bd8961.js"><link rel="prefetch" href="/assets/js/78.005339c3.js"><link rel="prefetch" href="/assets/js/79.5ea3a5d3.js"><link rel="prefetch" href="/assets/js/8.a8e2447d.js"><link rel="prefetch" href="/assets/js/80.c1c51503.js"><link rel="prefetch" href="/assets/js/81.2d734be7.js"><link rel="prefetch" href="/assets/js/82.8332e757.js"><link rel="prefetch" href="/assets/js/83.9122d12b.js"><link rel="prefetch" href="/assets/js/84.89d51d7f.js"><link rel="prefetch" href="/assets/js/85.4371e3fd.js"><link rel="prefetch" href="/assets/js/86.84ea3961.js"><link rel="prefetch" href="/assets/js/87.93f79078.js"><link rel="prefetch" href="/assets/js/88.7b938188.js"><link rel="prefetch" href="/assets/js/89.b877be08.js"><link rel="prefetch" href="/assets/js/9.21bb6026.js"><link rel="prefetch" href="/assets/js/90.0a2bfb82.js"><link rel="prefetch" href="/assets/js/91.603c5dc2.js"><link rel="prefetch" href="/assets/js/92.4f9d5e36.js"><link rel="prefetch" href="/assets/js/93.3c48d3c3.js"><link rel="prefetch" href="/assets/js/94.56fa8b7e.js"><link rel="prefetch" href="/assets/js/95.a35b0775.js"><link rel="prefetch" href="/assets/js/96.2821a4e6.js"><link rel="prefetch" href="/assets/js/97.5fa4897c.js"><link rel="prefetch" href="/assets/js/98.86b59071.js"><link rel="prefetch" href="/assets/js/99.94b81c28.js">
    <link rel="stylesheet" href="/assets/css/0.styles.eab9c879.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://image.bozhu12.cc/myblog/Essay/hendImage01.jpg" alt="柏竹" class="logo"> <span class="site-name can-hide">柏竹</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/backend/" class="nav-link router-link-active">后端</a></div><div class="nav-item"><a href="/web/" class="nav-link">前端</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/other/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/Amway/" class="nav-link">应用推荐</a></li></ul></div></div><div class="nav-item"><a href="/say/say2023/" class="nav-link">说说</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/friendLink/" class="nav-link">友链</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://image.bozhu12.cc/myblog/Essay/favicon.ico"> <div class="blogger-info"><h3>柏竹</h3> <span>奋斗柏竹</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/backend/" class="nav-link router-link-active">后端</a></div><div class="nav-item"><a href="/web/" class="nav-link">前端</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/other/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/Amway/" class="nav-link">应用推荐</a></li></ul></div></div><div class="nav-item"><a href="/say/say2023/" class="nav-link">说说</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/friendLink/" class="nav-link">友链</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Java基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/backend/ac1298/" class="sidebar-link">Java认识</a></li><li><a href="/backend/pe1123/" class="sidebar-link">面向对象概述</a></li><li><a href="/backend/m0die6/" class="sidebar-link">Java API</a></li><li><a href="/backend/39ibdm/" class="sidebar-link">Java三大特性</a></li><li><a href="/backend/9sun1b/" class="sidebar-link">Java类的高级特性</a></li><li><a href="/backend/b5ikzm/" class="sidebar-link">Java异常</a></li><li><a href="/backend/g25p48/" class="sidebar-link">Java异常</a></li><li><a href="/backend/x25lyh/" class="sidebar-link">Java集合类</a></li><li><a href="/backend/dampib/" class="sidebar-link">Java I/O</a></li><li><a href="/backend/y0rkxc/" class="sidebar-link">Java反射</a></li><li><a href="/backend/r3608t/" class="sidebar-link">枚举</a></li><li><a href="/backend/v3dlns/" class="sidebar-link">泛型</a></li><li><a href="/backend/zvajuy/" aria-current="page" class="active sidebar-link">Java线程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/backend/zvajuy/#线程与进程" class="sidebar-link">线程与进程</a></li><li class="sidebar-sub-header level2"><a href="/backend/zvajuy/#线程实现" class="sidebar-link">线程实现</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/backend/zvajuy/#thread类" class="sidebar-link">Thread类</a></li><li class="sidebar-sub-header level3"><a href="/backend/zvajuy/#runnable接口" class="sidebar-link">Runnable接口</a></li><li class="sidebar-sub-header level3"><a href="/backend/zvajuy/#callable接口" class="sidebar-link">Callable接口</a></li><li class="sidebar-sub-header level3"><a href="/backend/zvajuy/#线程应用总结" class="sidebar-link">线程应用总结</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/backend/zvajuy/#线程控制" class="sidebar-link">线程控制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/backend/zvajuy/#线程休眠" class="sidebar-link">线程休眠</a></li><li class="sidebar-sub-header level3"><a href="/backend/zvajuy/#线程加入" class="sidebar-link">线程加入</a></li><li class="sidebar-sub-header level3"><a href="/backend/zvajuy/#线程后台" class="sidebar-link">线程后台</a></li><li class="sidebar-sub-header level3"><a href="/backend/zvajuy/#线程唤醒" class="sidebar-link">线程唤醒</a></li><li class="sidebar-sub-header level3"><a href="/backend/zvajuy/#线程礼让" class="sidebar-link">线程礼让</a></li><li class="sidebar-sub-header level3"><a href="/backend/zvajuy/#线程优先级" class="sidebar-link">线程优先级</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/backend/zvajuy/#线程生命周期" class="sidebar-link">线程生命周期</a></li><li class="sidebar-sub-header level2"><a href="/backend/zvajuy/#线程同步" class="sidebar-link">线程同步</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/backend/zvajuy/#synchronized-关键字-隐式锁" class="sidebar-link">synchronized 关键字 隐式锁</a></li><li class="sidebar-sub-header level4"><a href="/backend/zvajuy/#同步块" class="sidebar-link">同步块</a></li><li class="sidebar-sub-header level4"><a href="/backend/zvajuy/#同步方法" class="sidebar-link">同步方法</a></li><li class="sidebar-sub-header level3"><a href="/backend/zvajuy/#lock-接口-显示锁" class="sidebar-link">Lock 接口 显示锁</a></li><li class="sidebar-sub-header level3"><a href="/backend/zvajuy/#同步锁总结" class="sidebar-link">同步锁总结</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/backend/zvajuy/#线程池" class="sidebar-link">线程池</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/backend/zvajuy/#缓存线程池-newcachedthreadpool" class="sidebar-link">缓存线程池 newCachedThreadPool</a></li><li class="sidebar-sub-header level3"><a href="/backend/zvajuy/#定长线程池-newfixedthreadpool" class="sidebar-link">定长线程池 newFixedThreadPool</a></li><li class="sidebar-sub-header level3"><a href="/backend/zvajuy/#单线程线程池-newsinglethreadexecutor" class="sidebar-link">单线程线程池 newSingleThreadExecutor</a></li><li class="sidebar-sub-header level3"><a href="/backend/zvajuy/#定时线程池-newscheduledthreadpool" class="sidebar-link">定时线程池 newScheduledThreadPool</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/backend/zvajuy/#代码索引" class="sidebar-link">代码索引</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level4"><a href="/backend/zvajuy/#file操作" class="sidebar-link">File操作</a></li><li class="sidebar-sub-header level4"><a href="/backend/zvajuy/#runnable操作" class="sidebar-link">Runnable操作</a></li><li class="sidebar-sub-header level4"><a href="/backend/zvajuy/#callable操作" class="sidebar-link">Callable操作</a></li><li class="sidebar-sub-header level4"><a href="/backend/zvajuy/#synchronized安全线程" class="sidebar-link">synchronized安全线程</a></li><li class="sidebar-sub-header level4"><a href="/backend/zvajuy/#synchronized方法安全线程" class="sidebar-link">synchronized方法安全线程</a></li><li class="sidebar-sub-header level4"><a href="/backend/zvajuy/#reentrantlock安全线程" class="sidebar-link">ReentrantLock安全线程</a></li><li class="sidebar-sub-header level4"><a href="/backend/zvajuy/#线程优先级-2" class="sidebar-link">线程优先级</a></li><li class="sidebar-sub-header level4"><a href="/backend/zvajuy/#缓存线程池" class="sidebar-link">缓存线程池</a></li><li class="sidebar-sub-header level4"><a href="/backend/zvajuy/#定长线程池" class="sidebar-link">定长线程池</a></li><li class="sidebar-sub-header level4"><a href="/backend/zvajuy/#单线程线程池" class="sidebar-link">单线程线程池</a></li><li class="sidebar-sub-header level4"><a href="/backend/zvajuy/#周期性任务定长线程池" class="sidebar-link">周期性任务定长线程池</a></li></ul></li></ul></li><li><a href="/backend/pwb68r/" class="sidebar-link">Java网络通信</a></li><li><a href="/backend/tfnnik/" class="sidebar-link">Java事件</a></li><li><a href="/backend/34q8xb/" class="sidebar-link">AWT绘图</a></li><li><a href="/backend/1s9khm/" class="sidebar-link">Java网页访问</a></li><li><a href="/backend/lipl8p/" class="sidebar-link">XML&amp;JSON</a></li><li><a href="/backend/zyaf2n/" class="sidebar-link">Java注解</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaWeb</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>拓展技术</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>框架技术</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringMVC</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringClound</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper bg-style-1"><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/backend/#后端" data-v-06225672>后端</a></li><li data-v-06225672><a href="/backend/#Java基础" data-v-06225672>Java基础</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="javascript:;" data-v-06225672>柏竹</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2020-02-18</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">Java线程<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="java线程"><a href="#java线程" class="header-anchor">#</a> Java线程</h1> <h2 id="线程与进程"><a href="#线程与进程" class="header-anchor">#</a> 线程与进程</h2> <p><strong>线程</strong> 是进程中的执行过程，一个进程包含有多个线程，并发执行</p> <p><strong>进程</strong> 是一个运行的应用程序，每个进程都有自己独立的内存空间</p> <blockquote><p>一个程序运行后至少有一个进程，一个进程里可包含多个线程！</p></blockquote> <p><strong>进程特点：</strong></p> <ul><li><strong>独立性：</strong> 进程是系统中独立存在的实体，他可以拥有自己的独立资源，每个进程都有自己的独立空间，未经进程本身的允许，用户线程不可以直接访问其他线程的地址空间</li> <li><strong>动态性：</strong> 进程与程序的区别在于，程序只是一个静态的指令集合，而进程是一个正在系统中活动的指令集合，即线程加入了时间的概念。进程具有自己的声明周期和不同的状态，这些概念而程序都不具备有</li> <li><strong>并发性：</strong> 多个进程可以在单个处理器上进行并发执行，而且多个线程之间是互不干扰的</li></ul> <blockquote><p><strong>并发相关概念</strong></p> <ul><li><strong>并发：</strong> 同一时刻只能执行一条指令</li> <li><strong>并行：</strong> 同一时刻执行多条不同指令</li> <li><strong>同步：</strong> 执行完上条线程才能执行下条线程（类似接力）</li> <li><strong>异步：</strong> 线程之间互不等待，线程启动即执行</li></ul></blockquote> <h2 id="线程实现"><a href="#线程实现" class="header-anchor">#</a> 线程实现</h2> <p>实现线程线程主要有</p> <ul><li><strong>java.lang.Thread类</strong></li> <li><strong>Runnable接口</strong></li> <li><strong>Callable接口</strong></li></ul> <h3 id="thread类"><a href="#thread类" class="header-anchor">#</a> Thread类</h3> <p>Thread类中实例化的对象代表线程，启动需要Thread实例</p> <p><strong>构造方法</strong></p> <table><thead><tr><th>构造方法</th> <th>说明</th></tr></thead> <tbody><tr><td>Thread()</td> <td>-</td></tr> <tr><td>Thread(String name)</td> <td>指定线程名称</td></tr> <tr><td>Thread(Runnable target)</td> <td></td></tr> <tr><td>Thread(Runnable target , String name)</td> <td></td></tr></tbody></table> <p><strong>常用方法</strong></p> <table><thead><tr><th>修饰符</th> <th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td>Thread</td> <td><code>currentThread()</code></td> <td>返回对当前正在执行的线程对象的引用</td></tr> <tr><td>long</td> <td><code>getId()</code></td> <td>返回线程标识符</td></tr> <tr><td>String</td> <td><code>getName()</code></td> <td>返回线程名称</td></tr> <tr><td>int</td> <td><code>getPriority()</code></td> <td>返回线程的优先级</td></tr> <tr><td>Thread.State</td> <td><code>getState()</code></td> <td>返回线程的状态</td></tr> <tr><td>void</td> <td><code>interrupt()</code></td> <td>中断线程</td></tr> <tr><td>boolean</td> <td><code>isAlive()</code></td> <td>线程是否运行</td></tr> <tr><td>boolean</td> <td><code>isInterrupted()</code></td> <td>线程是否被中断</td></tr> <tr><td>void</td> <td><code>run()</code></td> <td>调用该Runnable对象的run方法</td></tr> <tr><td>void</td> <td><code>start()</code> <code></code></td> <td>线程开始执行run方法</td></tr> <tr><td>void</td> <td><code>sleep(long ms)</code></td> <td>线程以指定的毫秒数暂停(等待)</td></tr> <tr><td>void</td> <td><code>join()</code></td> <td>在线程中加入另一个线程</td></tr> <tr><td>boolean</td> <td><code>interrupted()</code></td> <td>中断线程</td></tr> <tr><td>void</td> <td><code>setPriority(int newPriority)</code></td> <td>设置线程的优先级newPriority的范围(1-10)</td></tr> <tr><td>void</td> <td><code>setDaemon(boolean on)</code></td> <td>是否设置守护线程。守护线程：主线程结束，子线程也跟着结束</td></tr> <tr><td>String</td> <td><code>toString()</code></td> <td>返回线程的字符串表示、线程的名、优先级、线程组</td></tr></tbody></table> <p><a href="#G1">点击代码示例</a><a id="C1" href="#">*</a> (Thread操作)</p> <h3 id="runnable接口"><a href="#runnable接口" class="header-anchor">#</a> Runnable接口</h3> <p>线程一般通过Thread类创建的。但 Runnable接口 也可以实现进程</p> <img src="https://sanscan12.gitee.io/blogimg/Content/Java/Java32.png" style="zoom:67%;"> <p><strong>优点</strong></p> <ul><li>适合多线程同时执行相同的任务</li> <li>可多个相同程序处理统一资源 （资源共享</li> <li>不受 类的单继承约束</li></ul> <p><strong>实现方式</strong></p> <ul><li>==Thread(Runnable target)==</li> <li>==Thread(Runnable target , String name)==</li></ul> <p><a href="#G2">点击代码示例</a><a id="C2" href="#">*</a> (Runnable操作)</p> <h3 id="callable接口"><a href="#callable接口" class="header-anchor">#</a> Callable接口</h3> <p>Runnable接口 比 Callable接口 少了 线程结束无返回值 和 不能抛出异常 ，而 Callable接口 正是弥补这一缺陷！</p> <p><strong>特点：</strong></p> <ul><li>不能共享资源</li> <li>线程执行完毕有返回值</li> <li>线程可抛出异常</li></ul> <p><strong>应用步骤：</strong></p> <ol><li>设计一个类， 实现Callable接口</li> <li>重写 Call() 方法（类似于 Thread中的run）</li> <li>创建实例 FutureTask对象 进行封装 实现Callable的类</li> <li>创建实例 Thread对象 再次封装 FutureTask对象</li> <li>Thread对象 start() 启用线程</li> <li>线程执行结束后 ，FutureTask对象可通过 get() 获取 Call() 方法的返回值</li></ol> <blockquote><p><strong>PS：</strong> FutureTask类 和 Callable接口 都需要泛型 否则应用可能报错 （泛型也意味着返回类型）</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//1. 编写 Callable接口 ， 实现 call抽象方法</span>
<span class="token keyword">class</span> <span class="token class-name">MyCallable</span> <span class="token keyword">implements</span> <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Ovrride</span>
    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">T</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//2. 创建FutureTask对象，并传入第一步编写的Callable类对象</span>
<span class="token class-name">FutureTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> future <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FutureTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>callable<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//3. 通过Thread，启动线程</span>
<span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>future<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//4. 获取返回值，FutureTask对象中的get()方法获取返回值(此方法有堵塞效果)</span>
future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>FutureTask类 说明：用于异步获取执行结果或取消执行任务的作用(线程池的核心)</p> <p><a href="#G3">点击代码示例</a><a id="C3" href="#">*</a> (Runnable操作)</p> <h3 id="线程应用总结"><a href="#线程应用总结" class="header-anchor">#</a> 线程应用总结</h3> <table><thead><tr><th style="text-align:center;"></th> <th style="text-align:center;">Thread</th> <th style="text-align:center;">Runnable</th> <th style="text-align:center;">Callable</th></tr></thead> <tbody><tr><td style="text-align:center;"><strong>类型</strong></td> <td style="text-align:center;">类</td> <td style="text-align:center;">接口</td> <td style="text-align:center;">接口</td></tr> <tr><td style="text-align:center;"><strong>实现</strong></td> <td style="text-align:center;">单继承实现</td> <td style="text-align:center;">可多实现继承</td> <td style="text-align:center;">可多实现继承</td></tr> <tr><td style="text-align:center;"><strong>返回</strong></td> <td style="text-align:center;">无</td> <td style="text-align:center;">无</td> <td style="text-align:center;">有</td></tr> <tr><td style="text-align:center;"><strong>回调</strong></td> <td style="text-align:center;">方法直接调用</td> <td style="text-align:center;">调用Thread的静态方法</td> <td style="text-align:center;">调用Thread的静态方法</td></tr> <tr><td style="text-align:center;"><strong>复杂度</strong></td> <td style="text-align:center;">简单</td> <td style="text-align:center;">简单</td> <td style="text-align:center;">复杂</td></tr> <tr><td style="text-align:center;"><strong>推荐用</strong></td> <td style="text-align:center;">N</td> <td style="text-align:center;">Y</td> <td style="text-align:center;">Y</td></tr></tbody></table> <h2 id="线程控制"><a href="#线程控制" class="header-anchor">#</a> 线程控制</h2> <h3 id="线程休眠"><a href="#线程休眠" class="header-anchor">#</a> 线程休眠</h3> <p><code>sleep(long ms)</code> 方法 停止多少秒。它可能会抛出InterruptedException异常，所以放在try-catch块中。暂停后醒来，不能保证它能立即运行！</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//休眠1s</span>
<span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><h3 id="线程加入"><a href="#线程加入" class="header-anchor">#</a> 线程加入</h3> <p>在多个线程并行的过程中，某个线程被join()方法执行，其他需要等待join线程完成才能结束</p> <table><thead><tr><th>修饰符</th> <th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td>void</td> <td>==join()==</td> <td>等待这个线程死亡</td></tr> <tr><td>void</td> <td>==join(long millis)==</td> <td>等待这个线程死亡，最长时间为<code>millis</code>ms</td></tr> <tr><td>void</td> <td>==join(long millis , int nanos)==</td> <td>等待最多<code>millis</code>ms 加上这个线程死亡的<code>nanos</code>纳秒</td></tr></tbody></table> <blockquote><p>**注意：**线程在被启动后 join()方法 才有效！</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/** Join线程
 * 但在某个过程其他线程在执行流中调用其他线程的join()方法时，调用线程被堵塞，直到join线程执行完为止
 * 等待这个线程死掉,才执行(此方法的调用与调用的行为方式完全相同)
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JoinThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">JoinThread</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">99</span><span class="token punctuation">)</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; : &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">/** 测试原理
     *  创建多个线程，让任意一线程 join加入
     *      1. main线程 和 newThread线程 并行启动，分别循环100次
     *      2. main线程循环到 10 jion线程 加入，并 jion() 执行
     * 结论：
     * 线程完毕顺序：newThread -&gt; join -&gt; main
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">JoinThread</span><span class="token punctuation">(</span><span class="token string">&quot;newThread&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">JoinThread</span> jt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JoinThread</span><span class="token punctuation">(</span><span class="token string">&quot;Join线程&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                jt<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">/**
                 * 优先执行
                 */</span>
                jt<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">99</span><span class="token punctuation">)</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; : &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/** 控制台结果
 *  newThread : 99
 *  Join线程 : 99
 *  main : 99
 */</span>
</code></pre></div><blockquote><p>newThread线程 并非与 main线程 并行启动。join线程 是在 main线程 内设置的因此 main线程 需要等待 join线程 跑完</p></blockquote> <h3 id="线程后台"><a href="#线程后台" class="header-anchor">#</a> 线程后台</h3> <p>后台线程是在所有前台的线程都死亡后，后台线程会自动死亡，后台线程的主要任务是为其他线程提供服务的（如：JVM垃圾回收线程(后台线程)</p> <p>==Thread.setDaemon(true)== 即可将线程设置为后台线程</p> <blockquote><p><strong>注意：</strong>==Thread.setDaemon(true)==方法 必须在线程启动前设置为后台线程。因 后台线程的自动死亡是通过 前台线程死亡所收到的通知，并加以判断是否只剩后台线程，从而执行死亡的指令，在这一过程需要一定时间</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/** 后台线程
 *      说明1：将此线程标记为守护线程或用户线程。当唯一运行的线程都是守护线程时，Java 虚拟机退出。此方法必须在线程启动之前调用。
 *      说明2：当所有前台的线程都死亡后，后台线程会自动死亡
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemonThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span><span class="token punctuation">{</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; : &quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">/** 测试原理
     *  满足条件其他线程都要比后台线程更早结束
     *      主线程main：执行循环 10 次
     *      后台线程dt：执行循环 1000 次
     *
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">DemonThread</span> dt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DemonThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/**
         * 设置为 后台线程
         */</span>
        dt<span class="token punctuation">.</span><span class="token function">setDaemon</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dt<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; : &quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>不难看出 dt线程 后台线程 不能执行到 i = 999 的情况</p></blockquote> <h3 id="线程唤醒"><a href="#线程唤醒" class="header-anchor">#</a> 线程唤醒</h3> <p>线程唤醒的操作，需要搭配 <strong>synchronized + wait + notify</strong> 共同完成的</p> <blockquote><p><strong>注意：</strong></p> <ul><li>方法一般作用于 同步锁，在调用这些方法前提需要搭配 synchronized同步锁使用，以防多线程错乱</li> <li>如果 当前线程在同步锁 的作用下，且被 同步锁 调用了 wait()方法，同步锁将会释放，用于给别的线程获取执行唤醒操作</li> <li>唤醒线程使用的类是 ==java.lang.Object==</li></ul></blockquote> <p><strong>方法说明</strong></p> <ul><li>==wait()== ：使当前线程等待
应用前线程必须有使用有 同步锁。 等待其他线程使用 同步锁 调用 notify()/notifyAll()方法 使其唤醒，然后线程等待直到它重新获取同步锁才恢复执行（被挂起 同步锁 会被释放）</li> <li>==notify()== ：唤醒正在等待的线程
唤醒正在此 同步锁 上等待的单个线程。如果有多个线程正在等待该对象，则选择其中一个被唤醒(选择是任意的)</li> <li>==notifyAll()== ：唤醒正在等待的所有线程
唤醒正在此 同步锁 上等待的所有线程</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WakeThread</span> <span class="token punctuation">{</span>
    
    <span class="token comment">/**
     *  线程唤醒
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
        <span class="token comment">/** 测试原理
         *      创建多个线程，通过不同线程相互交互控制 同步锁的应用
         *      1. 创建三个线程分别为A，B，C，三个线程打印他们自己的执行过程
         *      2. 创建一个对象 充当 同步锁的使用
         *      3. 最先获取 同步锁 A进行 wait() 挂起等待 notify()/notifyAll()唤醒
         */</span>
    
        <span class="token comment">// 同步锁</span>
        <span class="token keyword">final</span> <span class="token class-name">Object</span> synObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token class-name">Runnable</span> t1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;T1 启动&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>synObj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;T1 获取 同步锁&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;T1 wait()时挂起&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">/**
                     * T1 挂起wait() 等待唤醒
                     */</span>
                    synObj<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;T1 被其他线程唤醒后重新获取SynObj对象监视器执行&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;T1 结束&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token class-name">Runnable</span> t2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;T2 启动&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>synObj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;T2 获取 同步锁&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">/**
                 * T2 唤醒该 同步锁 中的一个单线程
                 */</span>
                synObj<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;T2 执行 notify()方法 唤醒&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;T2 结束&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token class-name">Runnable</span> t3 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;T3 启动&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>synObj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;T3 获取 同步锁&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">/**
                 * T3 唤醒该 同步锁 中的所有线程
                 */</span>
                synObj<span class="token punctuation">.</span><span class="token function">notifyAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;T3 执行 notifyAll()方法 唤醒&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;T3 结束&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>t1<span class="token punctuation">,</span><span class="token string">&quot;T1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>t2<span class="token punctuation">,</span><span class="token string">&quot;T2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>t3<span class="token punctuation">,</span><span class="token string">&quot;T3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* 控制台结果
T1 启动
T3 启动
T2 启动
T1 获取 同步锁
T1 wait()时挂起
T2 获取 同步锁
T2 执行 notify()方法 唤醒
T2 结束
T3 获取 同步锁
T3 执行 notifyAll()方法 唤醒
T3 结束
T1 被其他线程唤醒后重新获取SynObj对象监视器执行
T1 结束
*/</span>
</code></pre></div><blockquote><p>T1 被唤醒后并非马上执行，因 T2与T3 争夺 同步锁，因此 1T 获取 同步锁 后才能继续执行</p></blockquote> <h3 id="线程礼让"><a href="#线程礼让" class="header-anchor">#</a> 线程礼让</h3> <p>==yield()==静态方法 它可以让当前正在执行的线程暂停，但它不会堵塞线程该线程，它只是将线程转入就绪状态</p> <blockquote><p><strong>注意：</strong> A线程执行 yield()方法 礼让后 ，以下可能会出现优先级的问题</p> <ul><li>A与B的 优先级 相同 ：A，B线程 依旧会有争夺CPU资源</li> <li>A的优先级更高：A线程可能不但礼让后还抢占CPU资源的</li> <li>B的优先级更高：A线程会老老实实的 礼让 B线程</li></ul></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/** 礼让线程
 *      说明1：向调度程序提示当前线程愿意放弃其当前对处理器的使用。调度程序可以随意忽略此提示。
 *            Yield 是一种启发式尝试，旨在改善线程之间的相对进展，否则会过度使用 CPU。
 *            它的使用应与详细的分析和基准测试相结合，以确保它实际上具有预期的效果。
 *      说明2：将指定线程暂停，不会堵塞线程，重新分配到线程的就绪状态
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">YieldTest</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span><span class="token punctuation">{</span>
    
    <span class="token keyword">public</span> <span class="token class-name">YieldTest</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">50</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; : &quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 使当前线程 礼让</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i<span class="token operator">==</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;礼让&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">/**
         		* 设置 当前线程礼让
         		*/</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token keyword">yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">/** 测试原理
     *    创建两个线程分别让他们执行到特定的时刻进行礼让
     *      1. 创建线程A和线程B ，且A，B线程有循环 50次
     *      2. A，B线程执行到 20 执行 yield() 使当前线程礼让
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">YieldTest</span> yt1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">YieldTest</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">YieldTest</span> yt2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">YieldTest</span><span class="token punctuation">(</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        yt1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        yt2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="线程优先级"><a href="#线程优先级" class="header-anchor">#</a> 线程优先级</h3> <p>每个线程都有自己的优先级，线程的优先级代表着该线程的重要性。多个处于就绪的线程就能体现优先级的作用！</p> <table><thead><tr><th style="text-align:center;">Thread常量</th> <th style="text-align:center;">值</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>MAX_PRIORITY</code></td> <td style="text-align:center;">10</td></tr> <tr><td style="text-align:center;"><code>MIN_PRIORITY</code></td> <td style="text-align:center;">1</td></tr> <tr><td style="text-align:center;"><code>NORM_PRIORITY</code></td> <td style="text-align:center;">5 (默认值)</td></tr></tbody></table> <p>==setPriority(int newPriority)==方法 对线程优先级的调整</p> <blockquote><p>**注意：**线程的优先级范围只能设置 0 - 10 整型范围</p></blockquote> <p><a href="#G7">点击代码示例</a><a id="C7" href="#">*</a> (线程优先级)</p> <h2 id="线程生命周期"><a href="#线程生命周期" class="header-anchor">#</a> 线程生命周期</h2> <p>线程具有生命周期，有7种分别为：出生状态、就绪状态、运行状态、休眠状态、阻塞状态、死亡状态</p> <img src="https://sanscan12.gitee.io/blogimg/Content/Java/Java34.png" style="zoom:67%;"> <p>Windows操作系统中，会为每个线程分配一小段CPU时间片，一旦CPU时间片结束会切换到下一线程</p> <p><strong>周期的说明：</strong></p> <ul><li><strong>出生/创建 状态(New)：</strong>  线程创建后到 线程的start()方法前</li> <li><strong>就绪状态(Runnable)：</strong> 可执行状态，进入线程池等待获取CPU的使用权，获取使用权在进入进入运行状态</li> <li><strong>运行状态(Running)：</strong> 已经获取CPU的使用权，执行run()方法，没有意外 线程则一直运行到结束</li> <li><strong>阻塞状态(Blocked)：</strong> 线程可能处于某种原因放弃/CPU的使用权 (停止运行)，会直到结束进入线程池回到就绪状态，堵塞的情况分为：
<ul><li><strong>等待堵塞：</strong> 线程 IO方法堵塞 ，JVM会把线程放入 等待池中</li> <li><strong>同步堵塞：</strong> 在线程获取 对象同步锁前，该 同步对象的同步锁 被别的线程占用 未释放锁 ，JVM会将线程放入 锁池中</li> <li><strong>其他堵塞：</strong> 线程执行 sleep()/join()方法，或用户 输入/输出，JVM会将线程至为堵塞状态</li></ul></li> <li><strong>死亡状态(Dead)：</strong> 线程方法跑完/线程异常/stop()方法停止=，则进入死亡状态</li></ul> <p><strong>再次进入运行状态：</strong></p> <ul><li>线程调用notify()方法(唤醒线程)</li> <li>线程调用notifyAll()方法(唤醒线程)</li> <li>线程调用interrupt()方法(中断线程)</li> <li>线程的休眠时间结束</li> <li>输入/输出 结束</li></ul> <h2 id="线程同步"><a href="#线程同步" class="header-anchor">#</a> 线程同步</h2> <p>多线程执行程序，会出现线程抢资源的现象，该现象会导致数据脏读！为了防止多线程的冲突，JAVA提供了线程同步的机制来防止资源抢占的问题！</p> <h3 id="synchronized-关键字-隐式锁"><a href="#synchronized-关键字-隐式锁" class="header-anchor">#</a> synchronized 关键字 隐式锁</h3> <p><code>synchronized</code> 关键字采用定时只允许一个线程访问共享资源 (道理跟上排队上厕所一样</p> <ul><li>同步对象 (又称同步监听器) 可以任意</li> <li>不可实例本身对象 (测试创建其他线程对象呢？)</li> <li>同步代码块中的线程跑完才会释放代码块</li></ul> <h4 id="同步块"><a href="#同步块" class="header-anchor">#</a> 同步块</h4> <p>每个对象都有<strong>标志位</strong>，它具有0和1两个值。0代表同步块中在运行其他线程；1代表该线程能被同步块执行，执行中途并将Object对象的标志位设置为0，防止其他线程执行同步块中的代码。(一个线程运行到同步块时首先检查该对象的标志位)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Object 同步锁</span>
<span class="token keyword">synchronized</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    ···
<span class="token punctuation">}</span>
<span class="token comment">//Object：任意对象，仅作为同步锁(相当于一把锁，多人使用的锁)</span>
</code></pre></div><p><a href="#G4">点击代码示例</a><a id="C4" href="#">*</a> (synchronized安全线程)</p> <h4 id="同步方法"><a href="#同步方法" class="header-anchor">#</a> 同步方法</h4> <p>方法 前面修饰 synchronized关键字 形成同步方法
某对象调用同步方法时，该对象的其他同步方法必须等待该同步方法执行完毕后才能被执行。必须将每个能访问共享资源的方法修饰为synchronized，否则会报错！</p> <p><a href="#G5">点击代码示例</a><a id="C5" href="#">*</a> (synchronized方法安全线程)</p> <h3 id="lock-接口-显示锁"><a href="#lock-接口-显示锁" class="header-anchor">#</a> Lock 接口 显示锁</h3> <p><code>ReentrantLock</code> 显示锁</p> <p><code>ReentrantLock</code> 相比 <code>synchronized</code> 更加直观</p> <p><strong>构造方法</strong> <code>ReentrantLock()</code> <code>ReentrantLock(boolean fair)</code></p> <blockquote><p><strong>fair：</strong> 公平锁</p></blockquote> <p><strong>方法</strong></p> <table><thead><tr><th>返回</th> <th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td>int</td> <td><code>getHoldCount()</code></td> <td>查询当前线程对锁的停止数量</td></tr> <tr><td>int</td> <td><code>getQueueLength()</code></td> <td>获取锁的线程数 估数</td></tr> <tr><td>int</td> <td><code>getWaitQueueLength(Condition condition)</code></td> <td>获取与此锁相关条件等待的线程</td></tr> <tr><td>boolean</td> <td><code>hasQueuedThread(Thread thread)</code></td> <td>查询指定线程是否获取锁</td></tr> <tr><td>boolean</td> <td><code>hasQueuedThreads()</code></td> <td>查询是否有线程等待锁</td></tr> <tr><td>boolean</td> <td><code>hasWaiters(Condition condition)</code></td> <td>查询是否有相关条件等待的锁</td></tr> <tr><td>boolean</td> <td><code>isFair()</code></td> <td>是否为锁的公平，启动则true</td></tr> <tr><td>boolean</td> <td><code>isHeldByCurrentThread()</code></td> <td>查询锁是否是当前线程持有</td></tr> <tr><td>boolean</td> <td><code>isLocked()</code></td> <td>查询锁是否有线程持有</td></tr> <tr><td>void</td> <td><code>lock()</code></td> <td>锁定锁(上锁)</td></tr> <tr><td>void</td> <td><code>lockInterruptibly()</code></td> <td>锁定锁</td></tr> <tr><td>String</td> <td><code>toString()</code></td> <td>返回标识锁的字符串内容</td></tr> <tr><td>boolean</td> <td><code>tryLock()</code></td> <td>判断锁是否存在</td></tr> <tr><td>boolean</td> <td><code>tryLock(long timeout, TimeUnit unit)</code></td> <td>判断锁是否存在，指定时间超时返回false</td></tr> <tr><td>void</td> <td><code>unlock()</code></td> <td>释放锁(解锁)</td></tr></tbody></table> <p><a href="#G6">点击代码示例</a><a id="C6" href="#">*</a> (ReentrantLock安全线程)</p> <h3 id="同步锁总结"><a href="#同步锁总结" class="header-anchor">#</a> 同步锁总结</h3> <ol><li><p>同步锁解决方法：同步代码块、同步方法、Lock接口</p></li> <li><p>同步代码块 和 同步方法 ，是隐式 获取/释放 锁</p></li> <li><p>Lock接口 获取/释放 锁是显示的，自行操作</p></li> <li><p>Lock接口 较灵活，可不用在同一 代码块/方法 中 进行 获取/释放 锁</p></li> <li><p>Lock接口 获取锁后 ，一定要释放锁</p></li> <li><p>Lock 默认是非公平锁，释放锁后可以继续抢锁；如果是 公平锁会根据等待时间进行分配锁（等待时间越长获锁几率越高！</p></li></ol> <h2 id="线程池"><a href="#线程池" class="header-anchor">#</a> 线程池</h2> <blockquote><p><strong>ExecutorService接口</strong></p> <p><strong>继承接口</strong>
Executor</p> <p><strong>实现类</strong>
AbstractExecutorService ， ForkJoinPool ， ScheduledThreadPoolExecutor ， ThreadPoolExecutor</p></blockquote> <p>线程的集合称为线程池</p> <p>频繁多线程操作会影响效率。反复的 创建 、关闭 线程会需要大量时间！可减少时间 和 资源的浪费！</p> <p><strong>线程池原理图</strong></p> <img src="https://sanscan12.gitee.io/blogimg/Content/Java/Java56.png"> <h3 id="缓存线程池-newcachedthreadpool"><a href="#缓存线程池-newcachedthreadpool" class="header-anchor">#</a> 缓存线程池 newCachedThreadPool</h3> <p>newCachedThreadPool 缓存线程池，缓存线程时长默认心跳存活60秒</p> <p>当一个线程添加到池中，如果该线程在 60秒内 未被使用，则移出该线程</p> <p><strong>特点：</strong></p> <ul><li>无长度限制</li> <li>自动扩容空间</li></ul> <p><a href="#G8">点击代码示例</a><a id="C8" href="#">*</a> (缓存线程池)</p> <h3 id="定长线程池-newfixedthreadpool"><a href="#定长线程池-newfixedthreadpool" class="header-anchor">#</a> 定长线程池 newFixedThreadPool</h3> <p>newFixedThreadPool 固定大小的线程池，可以指定线程池的大小</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">(</span>nThreads<span class="token punctuation">,</span> nThreads<span class="token punctuation">,</span><span class="token number">0L</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">MILLISECONDS</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">LinkedBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Runnable</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>threadFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>特点：</strong></p> <ul><li>自定 固定 长度</li> <li>无闲线程 空间未满 自动扩容</li> <li>无闲线程 空间已满 等待空闲</li></ul> <p><a href="#G9">点击代码示例</a><a id="C9" href="#">*</a> (定长线程池)</p> <h3 id="单线程线程池-newsinglethreadexecutor"><a href="#单线程线程池-newsinglethreadexecutor" class="header-anchor">#</a> 单线程线程池 newSingleThreadExecutor</h3> <p>newSingleThreadExecutor 单个单线程线程池，只有一个线程的线程池</p> <p><strong>特点：</strong></p> <ul><li>只有一个线程</li> <li>无闲线程 等待</li></ul> <p><a href="#G10">点击代码示例</a><a id="C10" href="#">*</a> (单线程线程池)</p> <h3 id="定时线程池-newscheduledthreadpool"><a href="#定时线程池-newscheduledthreadpool" class="header-anchor">#</a> 定时线程池 newScheduledThreadPool</h3> <p>newScheduledThreadPool 周期性任务定长线程池，</p> <p>该线程池可用于周期性去执行任务，通常用于周期性的同步数据</p> <ul><li>可指定长度</li> <li>无闲线程 空间未满 自动扩容</li> <li>无闲线程 空间已满 等待空闲</li> <li>定时执行、周期执行</li></ul> <p><a href="#G11">点击代码示例</a><a id="C11" href="#">*</a> (周期性任务定长线程池)</p> <h2 id="代码索引"><a href="#代码索引" class="header-anchor">#</a> 代码索引</h2> <h4 id="file操作"><a href="#file操作" class="header-anchor">#</a> File操作</h4> <p>(<a href="#C1">返回</a><a id="G1" href="#">*</a>)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
        <span class="token comment">//实例对象</span>
        <span class="token class-name">Thread</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThreadA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThreadB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">/**其他方法测试*/</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;==========&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;a.getId()：&quot;</span><span class="token operator">+</span>a<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;a.getName()：&quot;</span><span class="token operator">+</span>a<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;a.getPriority()：&quot;</span><span class="token operator">+</span>a<span class="token punctuation">.</span><span class="token function">getPriority</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;a.getState()：&quot;</span><span class="token operator">+</span>a<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;a.isAlive()：&quot;</span><span class="token operator">+</span>a<span class="token punctuation">.</span><span class="token function">isAlive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;a.isInterrupted()：&quot;</span><span class="token operator">+</span>a<span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;a.toString()：&quot;</span><span class="token operator">+</span>a<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;==========&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//执行线程(双线程执行，同时执行)</span>
        <span class="token comment">/**线程A*/</span>
        a<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/**线程B*/</span>
        b<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">/**
         
        以下代码为运行a对象的run()方法再执行b对象run()方法
        a.run();
        b.run();
        
        */</span>
        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyThreadA</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">26</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;A：&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">/**休眠1秒(等待)*/</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyThreadB</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">char</span> i <span class="token operator">=</span> <span class="token char">'a'</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token char">'z'</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;B：&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">/**休眠1秒(等待)*/</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>



<span class="token comment">/**运行结果

==========
a.getId()：13
a.getName()：No.1
a.getPriority()：5
a.getState()：NEW
a.isAlive()：false
a.isInterrupted()：false
a.toString()：Thread[No.1,5,main]
==========
 B：a
 A：0
 B：b
 A：1
 B：c
 A：2
 A：3
 B：d
 B：e
 A：4
 A：5
 B：f
 A：6
 B：g
 A：7
 B：h
 A：8
 B：i
 B：j
 A：9
 A：10
 B：k
 A：11
 B：l
 A：12
 B：m
 B：n
 A：13
 A：14
 B：o
 B：p
 A：15
 B：q
 A：16
 B：r
 A：17
 B：s
 A：18
 A：19
 B：t
 B：u
 A：20
 A：21
 B：v
 A：22
 B：w
 B：x
 A：23
 B：y
 A：24
 A：25
 
 */</span>
</code></pre></div><h4 id="runnable操作"><a href="#runnable操作" class="header-anchor">#</a> Runnable操作</h4> <p>(<a href="#C2">返回</a><a id="G2" href="#">*</a>)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainStartRunnable</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyRunnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">,</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyRunnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">,</span> <span class="token string">&quot;B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> t3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyRunnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">,</span> <span class="token string">&quot;C&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t3<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> 
<span class="token keyword">class</span> <span class="token class-name">MyRunnable</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; : &quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/*

B : 0
A : 0
A : 1
A : 2
A : 3
A : 4
A : 5
A : 6
A : 7
A : 8
A : 9
B : 1
B : 2
B : 3
B : 4
B : 5
B : 6
B : 7
B : 8
B : 9
C : 0
C : 1
C : 2
C : 3
C : 4
C : 5
C : 6
C : 7
C : 8
C : 9


*/</span>
</code></pre></div><h4 id="callable操作"><a href="#callable操作" class="header-anchor">#</a> Callable操作</h4> <p>(<a href="#C3">返回</a><a id="G3" href="#">*</a>)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Callable</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ExecutionException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">FutureTask</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ExecutionException</span><span class="token punctuation">,</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">MyCallable</span> callable <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyCallable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">FutureTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> future <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FutureTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>callable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>future<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;线程返回 : &quot;</span><span class="token operator">+</span>future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;堵塞测试！！！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyCallable</span> <span class="token keyword">implements</span> <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>
        <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        
        <span class="token comment">//返回的方法</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">100</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                num <span class="token operator">+=</span> i<span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; : &quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> num<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/*

Thread-0 : 1
Thread-0 : 2
Thread-0 : 3
····
Thread-0 : 100
线程返回 : 5050

*/</span>
</code></pre></div><h4 id="synchronized安全线程"><a href="#synchronized安全线程" class="header-anchor">#</a> synchronized安全线程</h4> <p>(<a href="#C4">返回</a><a id="G4" href="#">*</a>)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Runnable</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ticket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Ticket</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>
    
        <span class="token keyword">private</span> <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Object</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        
                        <span class="token comment">//如果synchronized套在这里 ， 多线程会错读</span>
                        
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; : &quot;</span><span class="token operator">+</span> <span class="token operator">--</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">try</span> <span class="token punctuation">{</span>
                            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/*

Thread-2 : 9
Thread-2 : 8
Thread-2 : 7
Thread-0 : 6
Thread-1 : 5
Thread-0 : 4
Thread-2 : 3
Thread-0 : 2
Thread-1 : 1
Thread-0 : 0
堵塞测试！！！

 */</span>

</code></pre></div><h4 id="synchronized方法安全线程"><a href="#synchronized方法安全线程" class="header-anchor">#</a> synchronized方法安全线程</h4> <p>(<a href="#C5">返回</a><a id="G5" href="#">*</a>)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo2</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Runnable</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ticket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Ticket</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>
        <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    
        <span class="token keyword">private</span> <span class="token keyword">synchronized</span> <span class="token keyword">boolean</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; : &quot;</span><span class="token operator">+</span> <span class="token operator">--</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>

<span class="token comment">/*

Thread-0 : 9
Thread-0 : 8
Thread-0 : 7
Thread-0 : 6
Thread-0 : 5
Thread-0 : 4
Thread-3 : 3
Thread-3 : 2
Thread-1 : 1
Thread-1 : 0

* */</span>
</code></pre></div><h4 id="reentrantlock安全线程"><a href="#reentrantlock安全线程" class="header-anchor">#</a> ReentrantLock安全线程</h4> <p>(<a href="#C6">返回</a><a id="G6" href="#">*</a>)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>locks<span class="token punctuation">.</span></span><span class="token class-name">ReentrantLock</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo3</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Runnable</span> lockTest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LockTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>lockTest<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>lockTest<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>lockTest<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>lockTest<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">LockTest</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>
    
        <span class="token comment">//显式锁</span>
         <span class="token keyword">static</span> <span class="token class-name">ReentrantLock</span> l <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
        
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    l<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">==</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                l<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            l<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;结束 ： &quot;</span><span class="token operator">+</span>l<span class="token punctuation">.</span><span class="token function">tryLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    
        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>l<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>l<span class="token punctuation">.</span><span class="token function">getHoldCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>l<span class="token punctuation">.</span><span class="token function">getQueueLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    
        <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; : &quot;</span><span class="token operator">+</span> <span class="token operator">--</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/*

Thread-0 : 9
Thread-3 : 8
Thread-2 : 7
Thread-1 : 6
Thread-0 : 5
java.util.concurrent.locks.ReentrantLock@47ee0a89[Locked by thread Thread-0]
1
3
Thread-3 : 4
Thread-2 : 3
Thread-1 : 2
Thread-0 : 1
Thread-3 : 0
结束 ： true
结束 ： false

*/</span>
</code></pre></div><h4 id="线程优先级-2"><a href="#线程优先级-2" class="header-anchor">#</a> 线程优先级</h4> <p>(<a href="#C7">返回</a><a id="G7" href="#">*</a>)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>swing<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PriorityBookTest</span> <span class="token keyword">extends</span> <span class="token class-name">JFrame</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Container</span> c <span class="token operator">=</span> <span class="token function">getContentPane</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">JProgressBar</span>
            jp1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JProgressBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            jp2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JProgressBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            jp3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JProgressBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            jp4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JProgressBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Thread</span>
            threadA <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
            threadB <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
            threadC <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
            threadD <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">PriorityBookTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token string">&quot;线程优先级&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setBounds</span><span class="token punctuation">(</span><span class="token number">300</span> <span class="token punctuation">,</span> <span class="token number">230</span> <span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setLayout</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FlowLayout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setVisible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        threadA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token function">newThread</span><span class="token punctuation">(</span>c <span class="token punctuation">,</span> jp1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        threadB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token function">newThread</span><span class="token punctuation">(</span>c <span class="token punctuation">,</span> jp2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        threadC <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token function">newThread</span><span class="token punctuation">(</span>c <span class="token punctuation">,</span> jp3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        threadD <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token function">newThread</span><span class="token punctuation">(</span>c <span class="token punctuation">,</span> jp4<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setPriority</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span> <span class="token punctuation">,</span> <span class="token number">10</span> <span class="token punctuation">,</span> threadA<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setPriority</span><span class="token punctuation">(</span><span class="token string">&quot;B&quot;</span> <span class="token punctuation">,</span> <span class="token number">7</span> <span class="token punctuation">,</span> threadB<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setPriority</span><span class="token punctuation">(</span><span class="token string">&quot;C&quot;</span> <span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">,</span> threadC<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setPriority</span><span class="token punctuation">(</span><span class="token string">&quot;D&quot;</span> <span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">,</span> threadD<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Thread</span> <span class="token function">newThread</span><span class="token punctuation">(</span><span class="token class-name">Container</span> c <span class="token punctuation">,</span> <span class="token class-name">JProgressBar</span> jp<span class="token punctuation">)</span><span class="token punctuation">{</span>
        c<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>jp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        jp<span class="token punctuation">.</span><span class="token function">setStringPainted</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;=</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    jp<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>count<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> thread<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">setPriority</span><span class="token punctuation">(</span><span class="token class-name">String</span> threadName <span class="token punctuation">,</span> <span class="token keyword">int</span> priority <span class="token punctuation">,</span> <span class="token class-name">Thread</span> t<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//设置进程优先级、名，启动</span>
        t<span class="token punctuation">.</span><span class="token function">setPriority</span><span class="token punctuation">(</span>priority<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>threadName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">PriorityBookTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/*

执行结果 ： 窗体展示 进度条

*/</span>
</code></pre></div><h4 id="缓存线程池"><a href="#缓存线程池" class="header-anchor">#</a> 缓存线程池</h4> <p>(<a href="#C8">返回</a><a id="G8" href="#">*</a>)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ExecutorService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Executors</span></span><span class="token punctuation">;</span>

<span class="token comment">//缓存线程池</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo1</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ExecutorService</span> service <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newCachedThreadPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//执行任务</span>
        service<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                 <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; : 1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        service<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; : 2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        service<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; : 3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    
        service<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; : 4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/*

pool-1-thread-3 : 3
pool-1-thread-2 : 2
pool-1-thread-1 : 1
pool-1-thread-1 : 4

*/</span>
</code></pre></div><h4 id="定长线程池"><a href="#定长线程池" class="header-anchor">#</a> 定长线程池</h4> <p>(<a href="#C9">返回</a><a id="G9" href="#">*</a>)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ExecutorService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Executors</span></span><span class="token punctuation">;</span>

<span class="token comment">//定长线程池</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo2</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ExecutorService</span> exception <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        exception<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; : 1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        exception<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; : 2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        exception<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; : 3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    
        exception<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; : 4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/*

pool-1-thread-1 : 1
pool-1-thread-2 : 2
pool-1-thread-2 : 3
pool-1-thread-1 : 4

*/</span>
</code></pre></div><h4 id="单线程线程池"><a href="#单线程线程池" class="header-anchor">#</a> 单线程线程池</h4> <p>(<a href="#C10">返回</a><a id="G10" href="#">*</a>)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ExecutorService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Executors</span></span><span class="token punctuation">;</span>

<span class="token comment">//单线程线程池</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo3</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ExecutorService</span> service <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newSingleThreadExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        service<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; : 1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        service<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; : 2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        service<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; : 3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/*

pool-1-thread-1 : 1
pool-1-thread-1 : 2
pool-1-thread-1 : 3

*/</span>
</code></pre></div><h4 id="周期性任务定长线程池"><a href="#周期性任务定长线程池" class="header-anchor">#</a> 周期性任务定长线程池</h4> <p>(<a href="#C11">返回</a><a id="G11" href="#">*</a>)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Executors</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ScheduledExecutorService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">TimeUnit</span></span><span class="token punctuation">;</span>

<span class="token comment">//周期性任务定长线程池</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo4</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ScheduledExecutorService</span> service <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newScheduledThreadPool</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token comment">/**定时执行
         * 参数1. 线程
         * 参数2. 延时时长值
         * 参数3. 时长单位
         */</span>
        service<span class="token punctuation">.</span><span class="token function">schedule</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;延时2s ， 执行的程序&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token comment">/**周期执行
         * 参数1. 线程
         * 参数2. 延时时长值
         * 参数3. 周期间隔时长值
         * 参数4. 时长单位
         */</span>
        service<span class="token punctuation">.</span><span class="token function">scheduleAtFixedRate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;延时3s 执行周期间隔2s 的循环程序&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/*

延时2s ， 执行的程序
延时3s 执行周期间隔2s 的循环程序
延时3s 执行周期间隔2s 的循环程序
延时3s 执行周期间隔2s 的循环程序
·····

*/</span>
</code></pre></div></div></div>  <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=Java" title="标签">#Java</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/03/12, 00:43:49</span></div></div> <div class="page-nav-wapper"><!----> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/backend/v3dlns/" class="prev">泛型</a></span> <span class="next"><a href="/backend/pwb68r/">Java网络通信</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/other/newbing/"><div>
            无魔法newbing
            <!----></div></a> <span class="date">03-21</span></dt></dl><dl><dd>02</dd> <dt><a href="/backend/6nss7s/"><div>
            Netty网络通信
            <!----></div></a> <span class="date">03-16</span></dt></dl><dl><dd>03</dd> <dt><a href="/blog/2ccess/"><div>
            Markdown语法拓展
            <span class="title-tag">
              转载
            </span></div></a> <span class="date">03-14</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="Sanscan12" title="联系" target="_blank" class="iconfont icon-weixin"></a><a href="https://github.com/Sasncan12" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/user/home?id=448156561" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2023
    <span> | <a href="https://beian.miit.gov.cn/">桂ICP备2022009417号-1</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.1d8e50f9.js" defer></script><script src="/assets/js/2.b26d2d6f.js" defer></script><script src="/assets/js/21.070e0d88.js" defer></script>
  </body>
</html>
