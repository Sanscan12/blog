(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{337:function(s,a,t){"use strict";t.r(a);var n=t(7),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker"}},[s._v("#")]),s._v(" Docker")]),s._v(" "),a("h2",{attrs:{id:"简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[s._v("#")]),s._v(" 简介")]),s._v(" "),a("p",[s._v("官网：https://www.docker.com/")]),s._v(" "),a("p",[s._v("docker是种容器技术，能够解决环境迁移问题")]),s._v(" "),a("ul",[a("li",[s._v("开源应用容器")]),s._v(" "),a("li",[s._v("基于Go语言实现")]),s._v(" "),a("li",[s._v("轻量级、可移植")]),s._v(" "),a("li",[s._v("沙箱机制隔离")])]),s._v(" "),a("p",[a("strong",[s._v("功能")])]),s._v(" "),a("ul",[a("li",[s._v("解决代码执行的环境兼容问题")]),s._v(" "),a("li",[s._v("软件打包环境直接应用")])]),s._v(" "),a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),a("h3",{attrs:{id:"linux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux"}},[s._v("#")]),s._v(" Linux")]),s._v(" "),a("p",[a("strong",[s._v("安装步骤：")])]),s._v(" "),a("ol",[a("li",[s._v("安装Docker")]),s._v(" "),a("li",[s._v("安装组件软件包")]),s._v(" "),a("li",[s._v("配置阿里云镜像加速（自己的")])]),s._v(" "),a("p",[a("strong",[s._v("示例：")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 1、yum 包更新到最新")]),s._v("\nyum update\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 2、安装需要的软件包， yum-util 提供yum-config-manager功能，另外两个是devicemapper驱动依赖的")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" yum-utils device-mapper-persistent-data lvm2\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 3、 设置yum源")]),s._v("\nyum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 4、 安装docker，出现输入的界面都按 y")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" docker-ce\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 5、 查看docker版本，验证是否验证成功")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h3",{attrs:{id:"镜像加速"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像加速"}},[s._v("#")]),s._v(" 镜像加速")]),s._v(" "),a("p",[s._v("镜像加速JSON文件需要手动配置\n镜像配置：https://developer.aliyun.com/article/110806")]),s._v(" "),a("p",[a("strong",[s._v("阿里云镜像配置")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("登录阿里云 "),a("strong",[s._v("镜像服务模块")]),s._v(" -> "),a("strong",[s._v("镜像加速")]),s._v(" -> 复制操作文档的镜像配置，如：(个人专属镜像加速")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"registry-mirrors"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://xd43lwzc.mirror.aliyuncs.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("进入路径 ==/etc/docker/daemon.json== (没有则创建")])]),s._v(" "),a("li",[a("p",[s._v("编辑 "),a("code",[s._v("daemon.json")]),s._v(" 复制添加以上配置")])]),s._v(" "),a("li",[a("p",[s._v("重启 Docker\n==systemctl restart docker==")])]),s._v(" "),a("li",[a("p",[s._v("检查配置镜像 。查看参数 ==docker info== (存在以下配置说明配置成功")]),s._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Registry Mirrors:\nhttps://xd43lwzc.mirror.aliyuncs.com/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令"}},[s._v("#")]),s._v(" 命令")]),s._v(" "),a("p",[s._v("官方文档：https://docs.docker.com/reference/")]),s._v(" "),a("p",[s._v("一键查看命令：==docker==\n命令查看详细：==docker {命令前缀} --help==")]),s._v(" "),a("h3",{attrs:{id:"进程相关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进程相关"}},[s._v("#")]),s._v(" 进程相关")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("启动docker服务")]),s._v("\n==systemctl start docker==")]),s._v(" "),a("li",[a("strong",[s._v("关闭docker服务")]),s._v("\n==systemctl stop docker==")]),s._v(" "),a("li",[a("strong",[s._v("重启docker服务")]),s._v("\n==systemctl restart docker==")]),s._v(" "),a("li",[a("strong",[s._v("查看docker状态")]),s._v("\n==systemctl status docker==")]),s._v(" "),a("li",[a("strong",[s._v("开机自启docker服务")]),s._v("\n==systemctl enable docker==")])]),s._v(" "),a("h3",{attrs:{id:"镜像相关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像相关"}},[s._v("#")]),s._v(" 镜像相关")]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("查看镜像")]),s._v("（查看本地镜像\n==docker images== 查看所有镜像\n==docker images -q== 查看所有镜像id")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("搜索镜像")]),s._v("\n==docker search redis== 查找redis镜像")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("下载镜像")]),s._v("\n==docker pull redis== 下载最新版本Redis\n==docker pull redis:5.0== 下载5.0版本Redis")]),s._v(" "),a("blockquote",[a("p",[s._v("如果需要了解指定下载的版本：(搜索版本\nhttps://hub.docker.com/")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("删除镜像")]),s._v("\n==docker rmi {镜像id}==  删除指定本地镜像\n==docker rmi "),a("code",[s._v("docker images -q")]),s._v("== 删除所有镜像")])])]),s._v(" "),a("h3",{attrs:{id:"容器相关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器相关"}},[s._v("#")]),s._v(" 容器相关")]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("容器查看")]),s._v("\n==docker ps== 查看所有正在运行容器\n==docker ps -a== 查看所有容器\n==docker ps -aq== 查看所有容器id\n==docker port {name/id}== 查看容器端口")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("查看容器详细")]),s._v("\n==docker inspect {name/id}==")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("容器创建")]),s._v("\n==docker run {参数}==")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("-i")]),s._v("：保持容器运行")]),s._v(" "),a("li",[a("code",[s._v("-t")]),s._v("：为容器分配一个为输入终端")]),s._v(" "),a("li",[a("code",[s._v("-d")]),s._v("：以守护线程模式运行")]),s._v(" "),a("li",[a("code",[s._v("--name")]),s._v("：为容器命名")])]),s._v(" "),a("p",[a("strong",[s._v("创建交互式容器")]),s._v("\n创建自动进入容器，退出自动关闭容器\n==docker run -it --name=c1 redis:5.0 /bin/bash==\n创建 redis:5.0 镜像且名称为c1的容器，并初始化指令至 /bin/bash")]),s._v(" "),a("blockquote",[a("p",[s._v("进入容器终端需要手动退出 "),a("code",[s._v("exit")])])]),s._v(" "),a("p",[a("strong",[s._v("创建守护容器")]),s._v("\n容器后台启动需要手动进入\n==docker run -id --name=c2 mysql /bin/bash==")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("容器进入")]),s._v("\n==docker exec -it {容器 name/id} /bin/bash==")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("容器退出")]),s._v("\n==exit== / 快捷键==Ctrl+Q+P==")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("容器启动")]),s._v("\n==docker start [容器 name/id]==")]),s._v(" "),a("blockquote",[a("p",[s._v("如果是交互式容器，启动后会转变为守护线程")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("容器停止")]),s._v("\n==docker stop {容器 name/id}==")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("容器删除")]),s._v("\n==docker rm {容器 name/id}== 删除指定容器\n==docker rm "),a("code",[s._v("docker ps -aq")]),s._v("== 删除所有容器")]),s._v(" "),a("blockquote",[a("p",[s._v("如果容器处于运行状态，则需要停止容器才能进行删除")])])])]),s._v(" "),a("h2",{attrs:{id:"数据卷"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据卷"}},[s._v("#")]),s._v(" 数据卷")]),s._v(" "),a("p",[s._v("数据源是容器挂载运行的媒介")]),s._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://image.bozhu12.cc/myblog/docker/docker01.png"}}),s._v(" "),a("p",[a("strong",[s._v("数据卷概念：")])]),s._v(" "),a("ul",[a("li",[s._v("数据卷是宿主机中的一个 目录/文件")]),s._v(" "),a("li",[s._v("但容器 目录和数据卷 绑定后，会立马同步")]),s._v(" "),a("li",[s._v("一个数据卷可同时挂载多个容器")]),s._v(" "),a("li",[s._v("一个容器可被多个数据卷挂载")])]),s._v(" "),a("p",[a("strong",[s._v("数据卷作用：")])]),s._v(" "),a("ul",[a("li",[s._v("容器数据 持久化")]),s._v(" "),a("li",[s._v("外部机器和容器通信的媒介")]),s._v(" "),a("li",[s._v("容器之间的数据交互")])]),s._v(" "),a("blockquote",[a("p",[s._v("PS：容器不能直接与外部机器直接通信，需要依赖宿主机通信交互")])]),s._v(" "),a("h3",{attrs:{id:"数据卷配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据卷配置"}},[s._v("#")]),s._v(" 数据卷配置")]),s._v(" "),a("p",[s._v("创建启动容器时 ，可通过 "),a("code",[s._v("-v")]),s._v("参数 设置数据卷")]),s._v(" "),a("p",[s._v("==docker run ... -v {主机目录}:{容器目录} ...==")]),s._v(" "),a("p",[a("strong",[s._v("注意：")])]),s._v(" "),a("ul",[a("li",[s._v("容器目录必须为绝对路径")]),s._v(" "),a("li",[s._v("如果目录不存在，会自动创建")]),s._v(" "),a("li",[s._v("可以挂载多个数据卷")])]),s._v(" "),a("p",[a("strong",[s._v("示例：")]),s._v("\n创建容器 c1 挂载到 宿主机/root/data目录 挂载到 容器/root/data_container目录，并初始化指令 /bin/bash\n==docker run -it --name=c1 -v /root/data:/root/data_container mysql /bin/bash==")]),s._v(" "),a("blockquote",[a("p",[s._v("在容器创建的数据会持久化，即便是 停止/删除 容器 文件仍然会存在")])]),s._v(" "),a("p",[a("strong",[s._v("一个容器挂载多个数据卷")])]),s._v(" "),a("div",{staticClass:"language-dockerfile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[s._v("docker run -it --name=c2 \\\n-v ~/data2:/root/data2 \\\n-v ~/dtaa3:/root/data3 \\\nmysql /bin/bash\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("blockquote",[a("p",[a("code",[s._v("\\")]),s._v("换行作用")])]),s._v(" "),a("p",[a("strong",[s._v("多个容器挂载同一个数据卷")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("c3 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /root/data:/root/data6 mysql /bin/bash\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("c4 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /root/data:/root/data6 mysql /bin/bash\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("blockquote",[a("p",[s._v("两个容器共享一个数据卷数据访问和修改也会跟随更改（仅限于该数据卷内的数据同步")])]),s._v(" "),a("h3",{attrs:{id:"数据卷容器配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据卷容器配置"}},[s._v("#")]),s._v(" 数据卷容器配置")]),s._v(" "),a("p",[s._v("多容器进行数据交互，多个容器挂载在同一数据卷容器，完成数据交互（将容器挂载到同一管理的容器进行同步数据卷")]),s._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://image.bozhu12.cc/myblog/docker/docker02.png"}}),s._v(" "),a("blockquote",[a("p",[s._v("container c3 作为容器同步卷 进行同步 c1 、c2 数据卷")])]),s._v(" "),a("p",[a("strong",[s._v("示例：")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("创建启动c3数据卷容器\n==docker run -it --name=c3 -v /volume mysql /bin/bash==")]),s._v(" "),a("blockquote",[a("p",[s._v("这里没有指定宿主目录，默认生成目录。查询容器详细：（可得知容器宿主目录\n==docker inspect c3== （关注："),a("code",[s._v("Mounts")]),s._v("键集合对象中的 "),a("code",[s._v("Source")]),s._v("键")])])]),s._v(" "),a("li",[a("p",[s._v("启动创建c1、c2容器，使用 "),a("code",[s._v("--volumes-from")]),s._v("参数 设置数据卷")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("c1 --volumes-from c3 mysql /bin/bash\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("c2 --volumes-from c3 mysql /bin/bash\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("进入 "),a("code",[s._v("/volume")]),s._v("目录 测试同步")])])]),s._v(" "),a("blockquote",[a("p",[s._v("使用c3数据卷容器创建 c1、c2，如果c3关闭也不影响c1和c2的数据交互")])]),s._v(" "),a("h2",{attrs:{id:"应用部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#应用部署"}},[s._v("#")]),s._v(" 应用部署")]),s._v(" "),a("p",[s._v("Docker应用部署容器需要了解一下几点：")]),s._v(" "),a("ul",[a("li",[s._v("应用前提都是提前下载镜像再部署应用")]),s._v(" "),a("li",[s._v("容器不能直接与外部机器进行通信")]),s._v(" "),a("li",[s._v("外部机可以和宿主机进行通信；且宿主机也可和容器通信")]),s._v(" "),a("li",[s._v("容器访问外部机需要宿主机调配映射端口与外部机通信")])]),s._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://image.bozhu12.cc/myblog/docker/docker03.png"}}),s._v(" "),a("blockquote",[a("p",[s._v("容器(3306) --- 外部机器(3307)\n宿主机调配端口映射可以间接的通信")])]),s._v(" "),a("p",[s._v("通过官网查找镜像 : https://hub.docker.com/")]),s._v(" "),a("h3",{attrs:{id:"mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql"}},[s._v("#")]),s._v(" MySQL")]),s._v(" "),a("p",[a("strong",[s._v("部署步骤：")])]),s._v(" "),a("ol",[a("li",[a("p",[a("strong",[s._v("创建容器目录")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"在-root目录下创建mysql目录用于存储mysql数据信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-root目录下创建mysql目录用于存储mysql数据信息"}},[s._v("#")]),s._v(" 在/root目录下创建mysql目录用于存储mysql数据信息")]),s._v(" "),a("p",[s._v("mkdir ~/mysql\ncd ~/mysql")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("\n2. **创建容器，并设置 端口/目录 映射**\n\n```sh\ndocker run -id \\\n-p 3307:3306 \\\n--name=c_mysql \\\n-v $PWD/conf:/etc/mysql/conf.d \\\n-v $PWD/logs:/logs \\\n-v $PWD/data:/var/lib/mysql \\\n-e MYSQL_ROOT_PASSWORD=123456 \\\nmysql:5.6\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[a("strong",[s._v("参数说明：")])]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("-p 3307:3306")]),s._v("：将 容器3306端口 对应宿主的 3307端口")]),s._v(" "),a("li",[a("strong",[s._v("-v $PWD/conf:/etc/mysql/conf.d")]),s._v("：主机当前/conf目录下创建数据卷 （pwd当前目录路径")]),s._v(" "),a("li",[s._v("confg配置目录 / logs日志目录 / data数据目录")]),s._v(" "),a("li",[a("strong",[s._v("-e MYSQL_ROOT_PASSWORD=123456")]),s._v("：配置参数，初始化root用户密码")])]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[a("p",[a("strong",[s._v("进入容器操作")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"运行启动容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行启动容器"}},[s._v("#")]),s._v(" 运行启动容器")]),s._v(" "),a("p",[s._v("docker exec -it c_mysql /bin/bash")]),s._v(" "),a("h2",{attrs:{id:"进入mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进入mysql"}},[s._v("#")]),s._v(" 进入mysql")]),s._v(" "),a("p",[s._v("mysql -uroot -p123456")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("\n4. **外部连接测试**\n\n虚拟机IP + 端口3307 即可访问 mysql容器\n\n### Tomcat\n\n**部署步骤：**\n\n1. **创建容器目录**\n\n```sh\n\n## 在/root目录下创建tomcat目录用于存储tomcat数据信息\nmkdir ~/tomcat\ncd ~/tomcat\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[a("p",[a("strong",[s._v("创建容器，并设置 端口/目录 映射")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-id")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("c_tomcat "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":8080 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PWD")]),s._v(":/usr/local/tomcat/webapps "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\ntomcat\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("blockquote",[a("p",[s._v("参数的详细说明可以参考mysql配置")])])]),s._v(" "),a("li",[a("p",[s._v("为容器数据卷 添加页面内容")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /test\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" index.html\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"添加h5页面内容保存即可"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加h5页面内容保存即可"}},[s._v("#")]),s._v(" 添加H5页面内容保存即可")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("\n4. 外部机访问 IP+端口8080\n==IP:8080/test/index.html== / ==IP:8080/test/== (Tomcat默认应用index.html\n\n> 应用Web内容时，只需为容器数据卷添加Web内容信息启动容器即可\n\n### Nginx\n\n1. 安装镜像 `nginx`\n\n2. 创建配置文件 (运行docker挂载的配置)\n\n```sh\n\n## 创建挂载目录\nmkdir -p /home/nginx/conf\nmkdir -p /home/nginx/log\nmkdir -p /home/nginx/html\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[a("p",[s._v("拷贝主要配置到宿主机")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"生成容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成容器"}},[s._v("#")]),s._v(" 生成容器")]),s._v(" "),a("p",[s._v("docker run --name nginx -p 9001:80 -d nginx")]),s._v(" "),a("h2",{attrs:{id:"将容器nginx-conf文件复制到宿主机"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#将容器nginx-conf文件复制到宿主机"}},[s._v("#")]),s._v(" 将容器nginx.conf文件复制到宿主机")]),s._v(" "),a("p",[s._v("docker cp nginx:/etc/nginx/nginx.conf /home/nginx/conf/nginx.conf")]),s._v(" "),a("h2",{attrs:{id:"将容器conf-d文件夹下内容复制到宿主机"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#将容器conf-d文件夹下内容复制到宿主机"}},[s._v("#")]),s._v(" 将容器conf.d文件夹下内容复制到宿主机")]),s._v(" "),a("p",[s._v("docker cp nginx:/etc/nginx/conf.d /home/nginx/conf/conf.d")]),s._v(" "),a("h2",{attrs:{id:"将容器中的html文件夹复制到宿主机"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#将容器中的html文件夹复制到宿主机"}},[s._v("#")]),s._v(" 将容器中的html文件夹复制到宿主机")]),s._v(" "),a("p",[s._v("docker cp nginx:/usr/share/nginx/html /home/nginx/")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("\n4. 运行 Nginx容器\n\n```sh\ndocker run \\\n-p 9002:80 \\\n--name nginx \\\n-v /home/nginx/conf/nginx.conf:/etc/nginx/nginx.conf \\\n-v /home/nginx/conf/conf.d:/etc/nginx/conf.d \\\n-v /home/nginx/log:/var/log/nginx \\\n-v /home/nginx/html:/usr/share/nginx/html \\\n-d nginx:latest\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("ol",{attrs:{start:"5"}},[a("li",[s._v("访问 [IP]:9002 即可")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("命令")]),s._v(" "),a("th",[s._v("说明")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("-name [名称]")]),s._v(" "),a("td",[s._v("命名")])]),s._v(" "),a("tr",[a("td",[s._v("-d")]),s._v(" "),a("td",[s._v("后台运行")])]),s._v(" "),a("tr",[a("td",[s._v("-p [宿主端口]:[容器端口]")]),s._v(" "),a("td",[s._v("端口映射")])]),s._v(" "),a("tr",[a("td",[s._v("-v [宿主路径]:[容器路径]")]),s._v(" "),a("td",[s._v("配置文件挂载")])]),s._v(" "),a("tr",[a("td",[s._v("nginx:latest")]),s._v(" "),a("td",[s._v("本地运行的版本")])]),s._v(" "),a("tr",[a("td",[s._v("\\")]),s._v(" "),a("td",[s._v("shell 命令换行")])])])]),s._v(" "),a("h3",{attrs:{id:"rabbitmq"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rabbitmq"}},[s._v("#")]),s._v(" RabbitMQ")]),s._v(" "),a("p",[s._v("docker官方 : https://hub.docker.com/_/rabbitmq")]),s._v(" "),a("p",[a("strong",[s._v("部署步骤：")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("官网查找RabbitMQ")])]),s._v(" "),a("li",[a("p",[s._v("建议下载含有Web管理页 , 镜像中带有 "),a("code",[s._v("mangement")]),s._v("版本的 , 并拉取下载")])]),s._v(" "),a("li",[a("p",[s._v("启动docker容器")]),s._v(" "),a("div",{staticClass:"language-docker line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-docker"}},[a("code",[s._v("docker run -d --name [容器名称]  \\\n-p 5672:5672  \\\n-p 15672:15672  \\\n-v `pwd`/data:/home/rabbitmq  \\\n--hostname [节点名称]  \\\n-e RABBITMQ_DEFAULT_USER=admin  \\\n-e RABBITMQ_DEFAULT_PASS=admin rabbitmq:[tag标签] \\\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("我个人的应用方式 (端口小修一下)")]),s._v(" "),a("div",{staticClass:"language-docker line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-docker"}},[a("code",[s._v("docker run -d --name rabbitmq03  \\\n-p 5674:5672  \\\n-p 15674:15672  \\\n-v `pwd`/data:/home/rabbitmq  \\\n--hostname node03  \\\n-e RABBITMQ_DEFAULT_USER=admin  \\\n-e RABBITMQ_DEFAULT_PASS=admin  \\\nrabbitmq:3.11.10-management\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("查看界面 ip+15672端口  http://ip:15672/")])])]),s._v(" "),a("p",[a("strong",[s._v("选项说明 :")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("选项")]),s._v(" "),a("th",[s._v("说明")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("-d")]),s._v(" "),a("td",[s._v("后台运行")])]),s._v(" "),a("tr",[a("td",[s._v("--name")]),s._v(" "),a("td",[s._v("指定容器名称")])]),s._v(" "),a("tr",[a("td",[s._v("-p")]),s._v(" "),a("td",[s._v("指定端口 [外部端口]:[容器端口] (5672:连接访问; 15672: Web管理页)")])]),s._v(" "),a("tr",[a("td",[s._v("-v")]),s._v(" "),a("td",[s._v("映射 目录/文件")])]),s._v(" "),a("tr",[a("td",[s._v("--hostname")]),s._v(" "),a("td",[s._v("主机名 (较为重要 集群作为 "),a("strong",[s._v("节点名称")]),s._v(" 使用)")])]),s._v(" "),a("tr",[a("td",[s._v("-e")]),s._v(" "),a("td",[s._v("指定环境变量 (默认账号密码)")])])])]),s._v(" "),a("h3",{attrs:{id:"redis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis"}},[s._v("#")]),s._v(" Redis")]),s._v(" "),a("p",[a("strong",[s._v("部署步骤：")])]),s._v(" "),a("ol",[a("li",[a("p",[a("strong",[s._v("创建容器，设置端口映射")])]),s._v(" "),a("p",[s._v("==docker run -id --name=c_redis -p 6379:6379 redis:5.0==")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("使用外部机器连接redis")]),s._v(" （对应IP+端口即可")])])]),s._v(" "),a("h2",{attrs:{id:"dockerfile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile"}},[s._v("#")]),s._v(" Dockerfile")]),s._v(" "),a("p",[s._v("Dockerfild 是一个用于组合映像的命令的文本文档。可以使用在命令行中调用任何命令。 Docker通过读取"),a("code",[s._v("Dockerfile")]),s._v("中的指令自动生成映像")]),s._v(" "),a("h3",{attrs:{id:"镜像原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像原理"}},[s._v("#")]),s._v(" 镜像原理")]),s._v(" "),a("p",[s._v("镜像原理先从文件管理进行讲述")]),s._v(" "),a("p",[a("strong",[s._v("Liunx文件管理系统")])]),s._v(" "),a("p",[s._v("Linux文件系统由 "),a("strong",[s._v("bootfs")]),s._v(" 和 "),a("strong",[s._v("rootfs")]),s._v(" 组成\nPS：不同发行版本，rootfs也不同，而rootfs基本不变")]),s._v(" "),a("ul",[a("li",[s._v("bootfs：包含Bootloader(引导加载程序) 和 kernel(内核)")]),s._v(" "),a("li",[s._v("rootfs：root文件系统，包含有 /dev，/proc，/bin，/etc等")])]),s._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://image.bozhu12.cc/myblog/docker/docker04.png"}}),s._v(" "),a("p",[a("strong",[s._v("docker镜像文件管理")])]),s._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://image.bozhu12.cc/myblog/docker/docker05.png"}}),s._v(" "),a("p",[a("strong",[s._v("Docker镜像原理")])]),s._v(" "),a("ul",[a("li",[s._v("Docker镜像有特殊的文件系统叠加而成")]),s._v(" "),a("li",[s._v("最低端是 bootfs，并使用宿主机的bootfs，往上则是镜像文件")]),s._v(" "),a("li",[s._v("文件系统的统一，将不同的文件层整合一个文件系统，提供统一的视角，隐藏多层的存在，在用户角度来看只有一个文件系统")]),s._v(" "),a("li",[s._v("另一往下的镜像称为 "),a("strong",[s._v("父镜像")]),s._v("，最底层则为 "),a("strong",[s._v("基础镜像")])]),s._v(" "),a("li",[s._v("当启动容器时，Docker会在最顶层加载读取文件作为容器")])]),s._v(" "),a("blockquote",[a("p",[s._v("总结：Docker镜像的本质是一个分层的文件系统")])]),s._v(" "),a("p",[a("strong",[s._v("注意：")])]),s._v(" "),a("ul",[a("li",[s._v("Docker镜像会在不同层级可能会对父产生依赖")]),s._v(" "),a("li",[s._v("镜像文件不能以本身决定大小，会复用 父镜像/系统 已有数据")])]),s._v(" "),a("h3",{attrs:{id:"镜像制作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像制作"}},[s._v("#")]),s._v(" 镜像制作")]),s._v(" "),a("h4",{attrs:{id:"容器转镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器转镜像"}},[s._v("#")]),s._v(" 容器转镜像")]),s._v(" "),a("p",[s._v("镜像创建可写容器进行生成镜像——>压缩镜像——>应用")]),s._v(" "),a("p",[a("strong",[s._v("步骤命令解释：")])]),s._v(" "),a("div",{staticClass:"language-dockerfile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 生成镜像")]),s._v("\ndocker commit {容器id} {容器名称}:{版本号} \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 压缩文件")]),s._v("\ndocker save -o {压缩文件名称} {镜像名称}:{版本号}\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 加载应用镜像")]),s._v("\ndocker load -i {压缩文件}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("blockquote",[a("p",[s._v("容器转镜像 不包括数据卷数据，只封装容器数据")])]),s._v(" "),a("p",[a("strong",[s._v("步骤示例：")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 数据卷")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" ~/c_tomcat\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/c_tomcat\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 创建tomcat镜像")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-id")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("c_tomcat "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":8080 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PWD")]),s._v(":/usr/local/tomcat/webapps "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\ntomcat\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 进入tomcat镜像")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" c_tomcat /bin/bash\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 创建a.txt b.txt （该文件用于封装镜像给测试人看的")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" a.txt b.txt\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 容器转镜像")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" commit 28b8d4dc9744 lxs_tomcat:1.0\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 压缩镜像")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" save "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" lxs_tomcat.tar lxs_tomcat:1.0\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除 容器/镜像")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" c_tomcat\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" rmi lxs_tomcat:1.0\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 从压缩文件加载镜像")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" load "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" lxs_tomcat.tar\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 产生镜像")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("new_tomcat lxs_tomcat:1.0 /bin/bash\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进入查看内容")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" c_tomcat /bin/bash\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#可以看到a.txt b.txt存在，而webapps/test不存在")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);