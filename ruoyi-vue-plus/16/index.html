<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ruoyi-vue-plus-序列化功能 | 柏竹</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="https://image.bozhu12.cc/myblog/Essay/favicon.ico">
    <script language="javascript" type="text/javascript" src="/js/pgmanor-self.js"></script>
    <script language="javascript" type="text/javascript" src="/js/echarts.min.js"></script>
    <meta name="description" content="学习足迹 , 记录生活!">
    <meta name="Sasncan12" content="柏竹博客, 个人技术博客, 前后端端 , 技术文档">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#bd93f9">
    
    <link rel="preload" href="/assets/css/0.styles.b41e82d5.css" as="style"><link rel="preload" href="/assets/js/app.d9970b58.js" as="script"><link rel="preload" href="/assets/js/2.b26d2d6f.js" as="script"><link rel="preload" href="/assets/js/116.e985fcfc.js" as="script"><link rel="prefetch" href="/assets/js/10.9835140b.js"><link rel="prefetch" href="/assets/js/100.e799b182.js"><link rel="prefetch" href="/assets/js/101.623403a0.js"><link rel="prefetch" href="/assets/js/102.bc3ab65d.js"><link rel="prefetch" href="/assets/js/103.302a4635.js"><link rel="prefetch" href="/assets/js/104.c6257ace.js"><link rel="prefetch" href="/assets/js/105.f35cc49f.js"><link rel="prefetch" href="/assets/js/106.400ec2b2.js"><link rel="prefetch" href="/assets/js/107.03e97ae6.js"><link rel="prefetch" href="/assets/js/108.047f07cd.js"><link rel="prefetch" href="/assets/js/109.b04ead8b.js"><link rel="prefetch" href="/assets/js/11.95f8dafb.js"><link rel="prefetch" href="/assets/js/110.441b156a.js"><link rel="prefetch" href="/assets/js/111.64fc3310.js"><link rel="prefetch" href="/assets/js/112.507dbf5e.js"><link rel="prefetch" href="/assets/js/113.04105445.js"><link rel="prefetch" href="/assets/js/114.bcc90ccb.js"><link rel="prefetch" href="/assets/js/115.aee2110f.js"><link rel="prefetch" href="/assets/js/117.a82b7a02.js"><link rel="prefetch" href="/assets/js/118.3864ee93.js"><link rel="prefetch" href="/assets/js/119.739cc195.js"><link rel="prefetch" href="/assets/js/12.5c7db9f8.js"><link rel="prefetch" href="/assets/js/120.0f8cbc2c.js"><link rel="prefetch" href="/assets/js/121.1e33566a.js"><link rel="prefetch" href="/assets/js/122.5d236ac4.js"><link rel="prefetch" href="/assets/js/123.443ed395.js"><link rel="prefetch" href="/assets/js/124.972578da.js"><link rel="prefetch" href="/assets/js/125.ecde9969.js"><link rel="prefetch" href="/assets/js/126.e87d28dd.js"><link rel="prefetch" href="/assets/js/127.f3b1ebde.js"><link rel="prefetch" href="/assets/js/128.45b39825.js"><link rel="prefetch" href="/assets/js/129.98f67914.js"><link rel="prefetch" href="/assets/js/13.749214b7.js"><link rel="prefetch" href="/assets/js/130.40cb1628.js"><link rel="prefetch" href="/assets/js/131.c5f26790.js"><link rel="prefetch" href="/assets/js/132.118b5d70.js"><link rel="prefetch" href="/assets/js/133.e94f4a93.js"><link rel="prefetch" href="/assets/js/134.69a22950.js"><link rel="prefetch" href="/assets/js/135.97a74579.js"><link rel="prefetch" href="/assets/js/136.3c7b99a9.js"><link rel="prefetch" href="/assets/js/137.048d2980.js"><link rel="prefetch" href="/assets/js/138.d57c05c0.js"><link rel="prefetch" href="/assets/js/139.ea8ce6ff.js"><link rel="prefetch" href="/assets/js/14.7e6d262f.js"><link rel="prefetch" href="/assets/js/140.987fbe40.js"><link rel="prefetch" href="/assets/js/141.9abd3dff.js"><link rel="prefetch" href="/assets/js/142.1fa6f9dc.js"><link rel="prefetch" href="/assets/js/143.9a0eb388.js"><link rel="prefetch" href="/assets/js/144.11967947.js"><link rel="prefetch" href="/assets/js/145.c7ea3574.js"><link rel="prefetch" href="/assets/js/146.11f6e059.js"><link rel="prefetch" href="/assets/js/147.922208c3.js"><link rel="prefetch" href="/assets/js/148.cb24856a.js"><link rel="prefetch" href="/assets/js/149.e2c945a2.js"><link rel="prefetch" href="/assets/js/15.2e4f8cc2.js"><link rel="prefetch" href="/assets/js/150.350f4997.js"><link rel="prefetch" href="/assets/js/151.78694867.js"><link rel="prefetch" href="/assets/js/152.24e7402e.js"><link rel="prefetch" href="/assets/js/153.bada6165.js"><link rel="prefetch" href="/assets/js/154.44296cf7.js"><link rel="prefetch" href="/assets/js/155.c01593f8.js"><link rel="prefetch" href="/assets/js/156.d9e3d1da.js"><link rel="prefetch" href="/assets/js/157.a5bd6128.js"><link rel="prefetch" href="/assets/js/158.6e1cf4e5.js"><link rel="prefetch" href="/assets/js/159.2d87ab7e.js"><link rel="prefetch" href="/assets/js/16.c2cd40e1.js"><link rel="prefetch" href="/assets/js/160.a5eb764e.js"><link rel="prefetch" href="/assets/js/161.d41eafb0.js"><link rel="prefetch" href="/assets/js/17.687de162.js"><link rel="prefetch" href="/assets/js/18.6ec9b542.js"><link rel="prefetch" href="/assets/js/19.c927b9a4.js"><link rel="prefetch" href="/assets/js/20.6802ce4f.js"><link rel="prefetch" href="/assets/js/21.0cdd82a6.js"><link rel="prefetch" href="/assets/js/22.cd5b0f4c.js"><link rel="prefetch" href="/assets/js/23.66f907eb.js"><link rel="prefetch" href="/assets/js/24.4c0b05ee.js"><link rel="prefetch" href="/assets/js/25.65e92ad2.js"><link rel="prefetch" href="/assets/js/26.c3dc5ccc.js"><link rel="prefetch" href="/assets/js/27.45c9e057.js"><link rel="prefetch" href="/assets/js/28.20d6c7ca.js"><link rel="prefetch" href="/assets/js/29.5abdde47.js"><link rel="prefetch" href="/assets/js/3.be234d5b.js"><link rel="prefetch" href="/assets/js/30.9b50083a.js"><link rel="prefetch" href="/assets/js/31.f177c36d.js"><link rel="prefetch" href="/assets/js/32.8212f0bc.js"><link rel="prefetch" href="/assets/js/33.c8bf090d.js"><link rel="prefetch" href="/assets/js/34.01658520.js"><link rel="prefetch" href="/assets/js/35.ee91ee76.js"><link rel="prefetch" href="/assets/js/36.47833f09.js"><link rel="prefetch" href="/assets/js/37.bd3ffb36.js"><link rel="prefetch" href="/assets/js/38.c948d014.js"><link rel="prefetch" href="/assets/js/39.bff8ae75.js"><link rel="prefetch" href="/assets/js/4.5017c5ca.js"><link rel="prefetch" href="/assets/js/40.dba246e4.js"><link rel="prefetch" href="/assets/js/41.11ef63c0.js"><link rel="prefetch" href="/assets/js/42.00e110e9.js"><link rel="prefetch" href="/assets/js/43.e21776c9.js"><link rel="prefetch" href="/assets/js/44.255279ff.js"><link rel="prefetch" href="/assets/js/45.ef371806.js"><link rel="prefetch" href="/assets/js/46.7965bbbe.js"><link rel="prefetch" href="/assets/js/47.33f2d7e7.js"><link rel="prefetch" href="/assets/js/48.c6ad58ff.js"><link rel="prefetch" href="/assets/js/49.bc8d702d.js"><link rel="prefetch" href="/assets/js/5.9c242416.js"><link rel="prefetch" href="/assets/js/50.3c950101.js"><link rel="prefetch" href="/assets/js/51.157514fb.js"><link rel="prefetch" href="/assets/js/52.4badcde4.js"><link rel="prefetch" href="/assets/js/53.a34ff845.js"><link rel="prefetch" href="/assets/js/54.3b99dd22.js"><link rel="prefetch" href="/assets/js/55.4f92ff2a.js"><link rel="prefetch" href="/assets/js/56.4eea5408.js"><link rel="prefetch" href="/assets/js/57.571dec1f.js"><link rel="prefetch" href="/assets/js/58.015dea87.js"><link rel="prefetch" href="/assets/js/59.366f7812.js"><link rel="prefetch" href="/assets/js/6.20f6982a.js"><link rel="prefetch" href="/assets/js/60.8d1b8c5c.js"><link rel="prefetch" href="/assets/js/61.fba48ca4.js"><link rel="prefetch" href="/assets/js/62.9daf74ad.js"><link rel="prefetch" href="/assets/js/63.12e3cce7.js"><link rel="prefetch" href="/assets/js/64.5038c472.js"><link rel="prefetch" href="/assets/js/65.c1ffc5f0.js"><link rel="prefetch" href="/assets/js/66.c8e2718c.js"><link rel="prefetch" href="/assets/js/67.7097ddc6.js"><link rel="prefetch" href="/assets/js/68.b81ad9cb.js"><link rel="prefetch" href="/assets/js/69.5011b50a.js"><link rel="prefetch" href="/assets/js/7.c22f1339.js"><link rel="prefetch" href="/assets/js/70.dc1a7a23.js"><link rel="prefetch" href="/assets/js/71.9c4c3fdf.js"><link rel="prefetch" href="/assets/js/72.75e15070.js"><link rel="prefetch" href="/assets/js/73.239a4507.js"><link rel="prefetch" href="/assets/js/74.ae02de1c.js"><link rel="prefetch" href="/assets/js/75.c649579a.js"><link rel="prefetch" href="/assets/js/76.4cfcab2d.js"><link rel="prefetch" href="/assets/js/77.c5b4cdd8.js"><link rel="prefetch" href="/assets/js/78.4c50028c.js"><link rel="prefetch" href="/assets/js/79.737fdd97.js"><link rel="prefetch" href="/assets/js/8.a8e2447d.js"><link rel="prefetch" href="/assets/js/80.3ee2ea53.js"><link rel="prefetch" href="/assets/js/81.6f36a800.js"><link rel="prefetch" href="/assets/js/82.0b767d6e.js"><link rel="prefetch" href="/assets/js/83.262783ec.js"><link rel="prefetch" href="/assets/js/84.16d2e181.js"><link rel="prefetch" href="/assets/js/85.5ca1bc34.js"><link rel="prefetch" href="/assets/js/86.a8bf2d59.js"><link rel="prefetch" href="/assets/js/87.3e285b84.js"><link rel="prefetch" href="/assets/js/88.78debaed.js"><link rel="prefetch" href="/assets/js/89.d7221e19.js"><link rel="prefetch" href="/assets/js/9.674ab0b1.js"><link rel="prefetch" href="/assets/js/90.6ffd7277.js"><link rel="prefetch" href="/assets/js/91.c84db656.js"><link rel="prefetch" href="/assets/js/92.11e3f66e.js"><link rel="prefetch" href="/assets/js/93.0f3b183b.js"><link rel="prefetch" href="/assets/js/94.ba40a568.js"><link rel="prefetch" href="/assets/js/95.766806b4.js"><link rel="prefetch" href="/assets/js/96.8aef4890.js"><link rel="prefetch" href="/assets/js/97.c40078bd.js"><link rel="prefetch" href="/assets/js/98.b63fa585.js"><link rel="prefetch" href="/assets/js/99.e0705a4f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b41e82d5.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://image.bozhu12.cc/myblog/Essay/hendImage01.jpg" alt="柏竹" class="logo"> <span class="site-name can-hide">柏竹</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/backend/" class="nav-link">后端</a></div><div class="nav-item"><a href="/web/" class="nav-link">前端</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/other/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/Amway/" class="nav-link">应用推荐</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/friendLink/" class="nav-link">友链</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://image.bozhu12.cc/myblog/Essay/favicon.ico"> <div class="blogger-info"><h3>柏竹</h3> <span>奋斗柏竹</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/backend/" class="nav-link">后端</a></div><div class="nav-item"><a href="/web/" class="nav-link">前端</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/other/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/Amway/" class="nav-link">应用推荐</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/friendLink/" class="nav-link">友链</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaWeb</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>拓展技术</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>框架技术</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringMVC</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringBoot</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringClound</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Ruoyi-Vue-Plus</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ruoyi-vue-plus/1/" class="sidebar-link">ruoyi-vue-plus-基础功能</a></li><li><a href="/ruoyi-vue-plus/2/" class="sidebar-link">ruoyi-vue-plus-权限控制</a></li><li><a href="/ruoyi-vue-plus/3/" class="sidebar-link">ruoyi-vue-plus-表格操作</a></li><li><a href="/ruoyi-vue-plus/4/" class="sidebar-link">ruoyi-vue-plus-缓存功能</a></li><li><a href="/ruoyi-vue-plus/5/" class="sidebar-link">ruoyi-vue-plus-日志功能</a></li><li><a href="/ruoyi-vue-plus/6/" class="sidebar-link">ruoyi-vue-plus-线程相关</a></li><li><a href="/ruoyi-vue-plus/7/" class="sidebar-link">ruoyi-vue-plus-OSS功能</a></li><li><a href="/ruoyi-vue-plus/8/" class="sidebar-link">ruoyi-vue-plus-代码生成功能</a></li><li><a href="/ruoyi-vue-plus/9/" class="sidebar-link">ruoyi-vue-plus-多数据源</a></li><li><a href="/ruoyi-vue-plus/10/" class="sidebar-link">ruoyi-vue-plus-任务调度</a></li><li><a href="/ruoyi-vue-plus/11/" class="sidebar-link">ruoyi-vue-plus-监控功能</a></li><li><a href="/ruoyi-vue-plus/12/" class="sidebar-link">ruoyi-vue-plus-国际化</a></li><li><a href="/ruoyi-vue-plus/13/" class="sidebar-link">ruoyi-vue-plus-XSS功能</a></li><li><a href="/ruoyi-vue-plus/14/" class="sidebar-link">ruoyi-vue-plus-防重幂&amp;限流 功能</a></li><li><a href="/ruoyi-vue-plus/15/" class="sidebar-link">ruoyi-vue-plus-推送功能</a></li><li><a href="/ruoyi-vue-plus/16/" aria-current="page" class="active sidebar-link">ruoyi-vue-plus-序列化功能</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/ruoyi-vue-plus/16/#序列化功能" class="sidebar-link">序列化功能</a></li><li class="sidebar-sub-header level2"><a href="/ruoyi-vue-plus/16/#翻译功能" class="sidebar-link">翻译功能</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/ruoyi-vue-plus/16/#应用" class="sidebar-link">应用</a></li><li class="sidebar-sub-header level4"><a href="/ruoyi-vue-plus/16/#映射翻译" class="sidebar-link">映射翻译</a></li><li class="sidebar-sub-header level4"><a href="/ruoyi-vue-plus/16/#直接翻译" class="sidebar-link">直接翻译</a></li><li class="sidebar-sub-header level4"><a href="/ruoyi-vue-plus/16/#字典翻译" class="sidebar-link">字典翻译</a></li><li class="sidebar-sub-header level4"><a href="/ruoyi-vue-plus/16/#自定义翻译" class="sidebar-link">自定义翻译</a></li><li class="sidebar-sub-header level4"><a href="/ruoyi-vue-plus/16/#contorller层应用" class="sidebar-link">Contorller层应用</a></li><li class="sidebar-sub-header level3"><a href="/ruoyi-vue-plus/16/#实现原理" class="sidebar-link">实现原理</a></li><li class="sidebar-sub-header level3"><a href="/ruoyi-vue-plus/16/#源码" class="sidebar-link">源码</a></li><li class="sidebar-sub-header level4"><a href="/ruoyi-vue-plus/16/#核心源码" class="sidebar-link">核心源码</a></li><li class="sidebar-sub-header level4"><a href="/ruoyi-vue-plus/16/#翻译代码" class="sidebar-link">翻译代码</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/ruoyi-vue-plus/16/#数据脱敏功能" class="sidebar-link">数据脱敏功能</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/ruoyi-vue-plus/16/#应用-2" class="sidebar-link">应用</a></li><li class="sidebar-sub-header level4"><a href="/ruoyi-vue-plus/16/#controller层应用" class="sidebar-link">Controller层应用</a></li><li class="sidebar-sub-header level4"><a href="/ruoyi-vue-plus/16/#自定义脱敏" class="sidebar-link">自定义脱敏</a></li><li class="sidebar-sub-header level3"><a href="/ruoyi-vue-plus/16/#实现原理-2" class="sidebar-link">实现原理</a></li><li class="sidebar-sub-header level3"><a href="/ruoyi-vue-plus/16/#源码-2" class="sidebar-link">源码</a></li></ul></li></ul></li><li><a href="/ruoyi-vue-plus/17/" class="sidebar-link">ruoyi-vue-plus-数据加密</a></li><li><a href="/ruoyi-vue-plus/18/" class="sidebar-link">ruoyi-vue-plus-单元测试</a></li><li><a href="/ruoyi-vue-plus/96/" class="sidebar-link">ruoyi-vue-plus-前端篇</a></li><li><a href="/ruoyi-vue-plus/97/" class="sidebar-link">ruoyi-vue-plus-工具篇</a></li><li><a href="/ruoyi-vue-plus/98/" class="sidebar-link">ruoyi-vue-plus-框架篇</a></li><li><a href="/ruoyi-vue-plus/99/" class="sidebar-link">ruoyi-vue-plus-问题解决</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper bg-style-1"><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/backend/#后端" data-v-06225672>后端</a></li><li data-v-06225672><a href="/backend/#Ruoyi-Vue-Plus" data-v-06225672>Ruoyi-Vue-Plus</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="javascript:;" data-v-06225672>柏竹</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2024-04-15</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">ruoyi-vue-plus-序列化功能<!----></h1>  <div class="theme-vdoing-content content__default"><h2 id="序列化功能"><a href="#序列化功能" class="header-anchor">#</a> 序列化功能</h2> <p>ruoyi-vue-plus 采用序列化处理对象 , 通过 注解 + jackson序列化处理器层面 进行动态处理属性 . ruoyi-vue-plus采用序列化处理功能 :</p> <ul><li><p><a href="#%E7%BF%BB%E8%AF%91%E5%8A%9F%E8%83%BD">翻译功能</a></p></li> <li><p><a href="#%E6%95%B0%E6%8D%AE%E8%84%B1%E6%95%8F%E5%8A%9F%E8%83%BD">数据脱敏功能</a></p></li></ul> <h2 id="翻译功能"><a href="#翻译功能" class="header-anchor">#</a> 翻译功能</h2> <p>ruoyi-vue-plus 翻译功能 是根据对象中的某一个明确的属性值翻译成预期的值 , 只需在对象属性中添加翻译的注解即可实现</p> <p><strong>翻译方式 :</strong></p> <ul><li>映射翻译 (根据另一个字段翻译保存)</li> <li>直接翻译 (根据字段值替换. 属性类型也会替换)</li> <li>字典翻译 (根据other条件, 自定义使用)</li></ul> <h3 id="应用"><a href="#应用" class="header-anchor">#</a> 应用</h3> <p>以下应用基于 <a href="#%E7%BF%BB%E8%AF%91%E4%BB%A3%E7%A0%81">源码翻译实现类</a> 实现</p> <p><strong>ruoyi-vue-plus翻译功能应用文档 :</strong> <a href="https://plus-doc.dromara.org/#/ruoyi-vue-plus/framework/extend/translation" target="_blank" rel="noopener noreferrer">https://plus-doc.dromara.org/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="映射翻译"><a href="#映射翻译" class="header-anchor">#</a> 映射翻译</h4> <p><strong>注解必填</strong></p> <ul><li><code>type</code> : 翻译处理器key</li> <li><code>mapper</code> : 映射属性名 (按userId翻译填充username)</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestUser</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Long</span> userId<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Translation</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">TransConstant</span><span class="token punctuation">.</span><span class="token constant">USER_ID_TO_NAME</span><span class="token punctuation">,</span> mapper <span class="token operator">=</span> <span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="直接翻译"><a href="#直接翻译" class="header-anchor">#</a> 直接翻译</h4> <p>只需填写 翻译处理器key , 应用本身的值进行翻译填充 (能够无视类型填充)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestUser</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
    
    <span class="token annotation punctuation">@Translation</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">TransConstant</span><span class="token punctuation">.</span><span class="token constant">OSS_ID_TO_URL</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> ossids<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="字典翻译"><a href="#字典翻译" class="header-anchor">#</a> 字典翻译</h4> <p><strong>注解必填</strong></p> <ul><li><code>type</code> : 翻译处理器key</li> <li><code>other</code> : 字典映射key</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestUser</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
    
    <span class="token annotation punctuation">@Translation</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">TransConstant</span><span class="token punctuation">.</span><span class="token constant">DICT_TYPE_TO_LABEL</span><span class="token punctuation">,</span> other <span class="token operator">=</span> <span class="token string">&quot;sys_user_sex&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> sex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="自定义翻译"><a href="#自定义翻译" class="header-anchor">#</a> 自定义翻译</h4> <p>创建翻译器实现类</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@TranslationType</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">TransConstant</span><span class="token punctuation">.</span><span class="token constant">DIY_KEY</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DiyTranslationImpl</span> <span class="token keyword">implements</span> <span class="token class-name">TranslationInterface</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token comment">// 业务实现类</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">XxxService</span> xxxService<span class="token punctuation">;</span>

    <span class="token comment">/**
     * 翻译处理过程
     * @param key 映射属性的值 / 属性本身的值
     * @param other 拓展处理标识
     * @return 处理结果的值 (任意类型)
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">translation</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> other<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 处理过程...</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>实现类赋予常量key</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TransConstant</span> <span class="token punctuation">{</span>

    <span class="token comment">// .... </span>
   
    <span class="token class-name">String</span> <span class="token constant">DIY_KEY</span> <span class="token operator">=</span> <span class="token string">&quot;diy_key&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>对象属性 引入 <code>@Translation</code>注解</p> <h4 id="contorller层应用"><a href="#contorller层应用" class="header-anchor">#</a> Contorller层应用</h4> <details class="custom-block details"><summary>点击展开</summary> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Resource</span>
<span class="token keyword">public</span> <span class="token class-name">ObjectMapper</span> objectMapper<span class="token punctuation">;</span>

<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/test&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{</span>
    <span class="token class-name">TestUser</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TestUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setUserId</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setDeptIds</span><span class="token punctuation">(</span><span class="token string">&quot;100&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setSex</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 编程式模拟序列化过程 , 采用翻译采用的是 Jackson序列化
     */</span>
    <span class="token comment">// 序列化</span>
    <span class="token class-name">String</span> json <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;json = &quot;</span> <span class="token operator">+</span> json<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Data</span>
<span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">TestUser</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> userId<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Translation</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">TransConstant</span><span class="token punctuation">.</span><span class="token constant">USER_ID_TO_NAME</span><span class="token punctuation">,</span> mapper <span class="token operator">=</span> <span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>


    <span class="token annotation punctuation">@Translation</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">TransConstant</span><span class="token punctuation">.</span><span class="token constant">OSS_ID_TO_URL</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> ossids<span class="token punctuation">;</span>


    <span class="token annotation punctuation">@Translation</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">TransConstant</span><span class="token punctuation">.</span><span class="token constant">DEPT_ID_TO_NAME</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> deptIds<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Translation</span><span class="token punctuation">(</span>type <span class="token operator">=</span><span class="token class-name">TransConstant</span><span class="token punctuation">.</span><span class="token constant">DICT_TYPE_TO_LABEL</span><span class="token punctuation">,</span> other <span class="token operator">=</span> <span class="token string">&quot;sys_user_sex&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> sex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></details> <h3 id="实现原理"><a href="#实现原理" class="header-anchor">#</a> 实现原理</h3> <p><strong>实现方案 :</strong> jackson序列化 , 在属性修饰符处理程序分配 自己的Null值处理器 (默认情况下的序列化不会对null值进行处理)</p> <p><strong>翻译序列化处理过程 :</strong></p> <ol><li><p><strong>启动初始化时 (TranslationConfig#init())</strong></p> <ol><li>循环所有翻译转化的实现类Bean (1-3)</li> <li>判断反射判断是否实现有 <code>TranslationInterface</code>转化接口</li> <li>Map存储 , 实现有则进行对其对象存储 , key为注解中的配置</li> <li>存储所有Baen的Map放到翻译处理器类的常量中</li> <li>设置序列化器 , 设置为 <code>TranslationBeanSerializerModifier</code>类 自己的处理器</li></ol></li> <li><p><strong>首次序列化应用时 (TranslationBeanSerializerModifier#changeProperties())</strong></p> <ol><li><p>回调获取注解信息 (TranslationHandler#createContextual()) . 对每个 <code>@JsonSerialize(using = TranslationHandler.class)</code>注解 的属性进行获取注解信息</p></li> <li><p><code>@Translation</code>注解判断 . 遍历序列化对象的所有属性 判断是否引用有 <code>@JsonSerialize(using = TranslationHandler.class)</code></p> <p><em>PS : <code>@Translation</code>注解引用有 <code>@JsonSerialize(using = TranslationHandler.class)</code>注解</em></p></li> <li><p>Null值序列化器 . 对象属性使用有注解 , 那么对该 对象属性进行 设置Null序列化器处理(<code>TranslationHandler</code>类处理)</p></li></ol></li> <li><p><strong>序列化处理时 (TranslationHandler#serialize())</strong></p> <ol><li>Map集中根据上下文key获取翻译处理的Bean</li> <li>判空 翻译处理Bean , 空则直接返回 , 否则 翻译处理</li> <li>映射翻译处理 , 根据注解<code>mapper</code>属性控制 , 通过对象的属性名反射Get对应属性值并设到 value 中</li> <li>判空处理 , 如果 value 为null , 那么直接设置null , 跳出翻译处理 (意味着该属性无任何翻译处理 . 该属性无默认值、无映射属性)</li> <li>直接&amp;字典 翻译处理 , 翻译处理Bean 翻译处理 (参数中的other是按字典key处理)</li></ol></li></ol> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>翻译转化实现类 必须要 TranslationType注解 和 TranslationInterface接口 一同使用</p></div> <h3 id="源码"><a href="#源码" class="header-anchor">#</a> 源码</h3> <p>对象定义时对对象进行翻译处理</p> <p><strong>核心</strong></p> <table><thead><tr><th>类&amp;注解</th> <th>说明</th></tr></thead> <tbody><tr><td><a href="#translationconfig">TranslationConfig</a></td> <td>翻译功能配置类</td></tr> <tr><td><a href="#translationtype">TranslationType</a></td> <td>翻译类型注解</td></tr> <tr><td><a href="#translationInterface%3CT%3E">TranslationInterface&lt;T&gt;</a></td> <td>翻译实现类接口</td></tr> <tr><td><a href="#translationhandler">TranslationHandler</a></td> <td>翻译处理器</td></tr> <tr><td><a href="#translationbeanserializermodifier">TranslationBeanSerializerModifier</a></td> <td>Bean序列化配置修改类</td></tr></tbody></table> <p><strong>翻译处理类</strong></p> <table><thead><tr><th>类</th> <th>说明</th></tr></thead> <tbody><tr><td><a href="#deptnametranslationimpl">DeptNameTranslationImpl</a></td> <td>部门翻译</td></tr> <tr><td><a href="#dicttypetranslationimpl">DictTypeTranslationImpl</a></td> <td>字典翻译</td></tr> <tr><td><a href="#ossurltranslationimpl">OssUrlTranslationImpl</a></td> <td>OSS翻译</td></tr> <tr><td><a href="#usernametranslationimpl">UserNameTranslationImpl</a></td> <td>用户名翻译</td></tr></tbody></table> <h4 id="核心源码"><a href="#核心源码" class="header-anchor">#</a> 核心源码</h4> <p><strong><code>TranslationConfig</code>翻译模块配置类</strong></p> <details class="custom-block details"><summary>点击展开</summary> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@AutoConfiguration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TranslationConfig</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TranslationInterface</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">ObjectMapper</span> objectMapper<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@PostConstruct</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">TranslationInterface</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">TranslationInterface</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> trans <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>trans<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">TranslationType</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">TranslationType</span> annotation <span class="token operator">=</span> trans<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">TranslationType</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>annotation<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> trans<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                log<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>trans<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; 翻译实现类未标注 TranslationType 注解!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">TranslationHandler</span><span class="token punctuation">.</span><span class="token constant">TRANSLATION_MAPPER</span><span class="token punctuation">.</span><span class="token function">putAll</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 设置 Bean 序列化修改器</span>
        objectMapper<span class="token punctuation">.</span><span class="token function">setSerializerFactory</span><span class="token punctuation">(</span>
            objectMapper<span class="token punctuation">.</span><span class="token function">getSerializerFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withSerializerModifier</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TranslationBeanSerializerModifier</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div></details> <p><strong><code>TranslationType</code>翻译类型注解</strong></p> <details class="custom-block details"><summary>点击展开</summary> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Inherited</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">TranslationType</span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     * 类型
     */</span>
    <span class="token class-name">String</span> <span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div></details> <p><strong><code>TranslationInterface&lt;T&gt;</code>翻译接口</strong></p> <details class="custom-block details"><summary>点击展开</summary> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TranslationInterface</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     * 翻译
     *
     * @param key   需要被翻译的键(不为空)
     * @param other 其他参数
     * @return 返回键对应的值
     */</span>
    <span class="token class-name">T</span> <span class="token function">translation</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> other<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></details> <p><strong><code>TranslationHandler</code>翻译处理器</strong></p> <details class="custom-block details"><summary>点击展开</summary> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TranslationHandler</span> <span class="token keyword">extends</span> <span class="token class-name">JsonSerializer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">ContextualSerializer</span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     * 全局翻译实现类映射器
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">TranslationInterface</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token constant">TRANSLATION_MAPPER</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Translation</span> translation<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">serialize</span><span class="token punctuation">(</span><span class="token class-name">Object</span> value<span class="token punctuation">,</span> <span class="token class-name">JsonGenerator</span> gen<span class="token punctuation">,</span> <span class="token class-name">SerializerProvider</span> serializers<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">TranslationInterface</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> trans <span class="token operator">=</span> <span class="token constant">TRANSLATION_MAPPER</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>translation<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">ObjectUtil</span><span class="token punctuation">.</span><span class="token function">isNotNull</span><span class="token punctuation">(</span>trans<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 如果映射字段不为空 则取映射字段的值</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotBlank</span><span class="token punctuation">(</span>translation<span class="token punctuation">.</span><span class="token function">mapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                value <span class="token operator">=</span> <span class="token class-name">ReflectUtils</span><span class="token punctuation">.</span><span class="token function">invokeGetter</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">getCurrentValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> translation<span class="token punctuation">.</span><span class="token function">mapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 如果为 null 直接写出</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">ObjectUtil</span><span class="token punctuation">.</span><span class="token function">isNull</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                gen<span class="token punctuation">.</span><span class="token function">writeNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">Object</span> result <span class="token operator">=</span> trans<span class="token punctuation">.</span><span class="token function">translation</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> translation<span class="token punctuation">.</span><span class="token function">other</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gen<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            gen<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">JsonSerializer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">createContextual</span><span class="token punctuation">(</span><span class="token class-name">SerializerProvider</span> prov<span class="token punctuation">,</span> <span class="token class-name">BeanProperty</span> property<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonMappingException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Translation</span> translation <span class="token operator">=</span> property<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">Translation</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">nonNull</span><span class="token punctuation">(</span>translation<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>translation <span class="token operator">=</span> translation<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> prov<span class="token punctuation">.</span><span class="token function">findValueSerializer</span><span class="token punctuation">(</span>property<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> property<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></details> <p><strong><code>TranslationBeanSerializerModifier</code>序列化修改器</strong></p> <p>null值 属性序列化处理器</p> <details class="custom-block details"><summary>点击展开</summary> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TranslationBeanSerializerModifier</span> <span class="token keyword">extends</span> <span class="token class-name">BeanSerializerModifier</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BeanPropertyWriter</span><span class="token punctuation">&gt;</span></span> <span class="token function">changeProperties</span><span class="token punctuation">(</span><span class="token class-name">SerializationConfig</span> config<span class="token punctuation">,</span> <span class="token class-name">BeanDescription</span> beanDesc<span class="token punctuation">,</span>
                                                     <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BeanPropertyWriter</span><span class="token punctuation">&gt;</span></span> beanProperties<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">BeanPropertyWriter</span> writer <span class="token operator">:</span> beanProperties<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 如果序列化器为 TranslationHandler 的话 将 Null 值也交给他处理</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>writer<span class="token punctuation">.</span><span class="token function">getSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">instanceof</span> <span class="token class-name">TranslationHandler</span> serializer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                writer<span class="token punctuation">.</span><span class="token function">assignNullSerializer</span><span class="token punctuation">(</span>serializer<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> beanProperties<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div></details> <h4 id="翻译代码"><a href="#翻译代码" class="header-anchor">#</a> 翻译代码</h4> <p><strong><code>DeptNameTranslationImpl</code>部门翻译实现类</strong></p> <details class="custom-block details"><summary>点击展开</summary> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@TranslationType</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">TransConstant</span><span class="token punctuation">.</span><span class="token constant">DEPT_ID_TO_NAME</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptNameTranslationImpl</span> <span class="token keyword">implements</span> <span class="token class-name">TranslationInterface</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">DeptService</span> deptService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">translation</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> other<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token keyword">instanceof</span> <span class="token class-name">String</span> ids<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> deptService<span class="token punctuation">.</span><span class="token function">selectDeptNameByIds</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token keyword">instanceof</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> deptService<span class="token punctuation">.</span><span class="token function">selectDeptNameByIds</span><span class="token punctuation">(</span>id<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></details> <p><strong><code>DictTypeTranslationImpl</code>字典翻译实现</strong></p> <details class="custom-block details"><summary>点击展开</summary> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@TranslationType</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">TransConstant</span><span class="token punctuation">.</span><span class="token constant">DICT_TYPE_TO_LABEL</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DictTypeTranslationImpl</span> <span class="token keyword">implements</span> <span class="token class-name">TranslationInterface</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">DictService</span> dictService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">translation</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> other<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token keyword">instanceof</span> <span class="token class-name">String</span> dictValue <span class="token operator">&amp;&amp;</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotBlank</span><span class="token punctuation">(</span>other<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> dictService<span class="token punctuation">.</span><span class="token function">getDictLabel</span><span class="token punctuation">(</span>other<span class="token punctuation">,</span> dictValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></details> <p><strong><code>OssUrlTranslationImpl</code>OSS翻译实现</strong></p> <details class="custom-block details"><summary>点击展开</summary> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@TranslationType</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">TransConstant</span><span class="token punctuation">.</span><span class="token constant">OSS_ID_TO_URL</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OssUrlTranslationImpl</span> <span class="token keyword">implements</span> <span class="token class-name">TranslationInterface</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">OssService</span> ossService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">translation</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> other<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token keyword">instanceof</span> <span class="token class-name">String</span> ids<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> ossService<span class="token punctuation">.</span><span class="token function">selectUrlByIds</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token keyword">instanceof</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> ossService<span class="token punctuation">.</span><span class="token function">selectUrlByIds</span><span class="token punctuation">(</span>id<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></details> <p><strong><code>UserNameTranslationImpl</code>用户名翻译实现</strong></p> <details class="custom-block details"><summary>点击展开</summary> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@TranslationType</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">TransConstant</span><span class="token punctuation">.</span><span class="token constant">USER_ID_TO_NAME</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserNameTranslationImpl</span> <span class="token keyword">implements</span> <span class="token class-name">TranslationInterface</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">translation</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> other<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token keyword">instanceof</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">selectUserNameById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></details> <h2 id="数据脱敏功能"><a href="#数据脱敏功能" class="header-anchor">#</a> 数据脱敏功能</h2> <p>脱敏功能是将 敏感的隐私信息进行加工处理 , 转化为能够公开的信息 . ruoyi-vue-plus框架 采用 <code>Jackson</code>序列化 + <code>Sensitive</code>注解 + Hutool工具 实现脱敏工作</p> <p><strong>Hutool文档 :</strong> <a href="https://hutool.cn/docs/#/core/%E5%B7%A5%E5%85%B7%E7%B1%BB/%E4%BF%A1%E6%81%AF%E8%84%B1%E6%95%8F%E5%B7%A5%E5%85%B7-DesensitizedUtil" target="_blank" rel="noopener noreferrer">https://hutool.cn/docs/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>ruoyi-vue-plus数据脱敏应用文档 :</strong><a href="https://plus-doc.dromara.org/#/ruoyi-vue-plus/framework/extend/sensitive" target="_blank" rel="noopener noreferrer">https://plus-doc.dromara.org/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="应用-2"><a href="#应用-2" class="header-anchor">#</a> 应用</h3> <p>在对象的属性中添加 <code>SensitiveStrategy</code>注解 , 注解的参数写上脱敏类型即可实现</p> <h4 id="controller层应用"><a href="#controller层应用" class="header-anchor">#</a> Controller层应用</h4> <details class="custom-block details"><summary>点击展开</summary> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * 测试数据脱敏
 */</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/test&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{</span>
    <span class="token class-name">TestSensitive</span> testSensitive <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TestSensitive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    testSensitive<span class="token punctuation">.</span><span class="token function">setIdCard</span><span class="token punctuation">(</span><span class="token string">&quot;210397198608215431&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    testSensitive<span class="token punctuation">.</span><span class="token function">setPhone</span><span class="token punctuation">(</span><span class="token string">&quot;17640125371&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    testSensitive<span class="token punctuation">.</span><span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token string">&quot;北京市朝阳区某某四合院1203室&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    testSensitive<span class="token punctuation">.</span><span class="token function">setEmail</span><span class="token punctuation">(</span><span class="token string">&quot;17640125371@163.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    testSensitive<span class="token punctuation">.</span><span class="token function">setBankCard</span><span class="token punctuation">(</span><span class="token string">&quot;6226456952351452853&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 手动序列化处理 . 采用 jackson序列化处理</span>
    <span class="token class-name">ObjectMapper</span> objectMapper <span class="token operator">=</span> <span class="token class-name">SpringUtils</span><span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">ObjectMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> json <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>testSensitive<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;json = &quot;</span> <span class="token operator">+</span> json<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/* 脱敏结果
json = {
    &quot;idCard&quot;: &quot;210***********5431&quot;,
    &quot;phone&quot;: &quot;176****5371&quot;,
    &quot;address&quot;: &quot;北京市朝阳区某某********&quot;,
    &quot;email&quot;: &quot;1**********@163.com&quot;,
    &quot;bankCard&quot;: &quot;6226 **** **** **** 853&quot;
}
*/</span>

<span class="token comment">// 实体类</span>
<span class="token annotation punctuation">@Data</span>
<span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">TestSensitive</span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     * 身份证
     */</span>
    <span class="token annotation punctuation">@Sensitive</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">SensitiveStrategy</span><span class="token punctuation">.</span><span class="token constant">ID_CARD</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> idCard<span class="token punctuation">;</span>

    <span class="token comment">/**
     * 电话
     */</span>
    <span class="token annotation punctuation">@Sensitive</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">SensitiveStrategy</span><span class="token punctuation">.</span><span class="token constant">PHONE</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> phone<span class="token punctuation">;</span>

    <span class="token comment">/**
     * 地址
     */</span>
    <span class="token annotation punctuation">@Sensitive</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">SensitiveStrategy</span><span class="token punctuation">.</span><span class="token constant">ADDRESS</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>

    <span class="token comment">/**
     * 邮箱
     */</span>
    <span class="token annotation punctuation">@Sensitive</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">SensitiveStrategy</span><span class="token punctuation">.</span><span class="token constant">EMAIL</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>

    <span class="token comment">/**
     * 银行卡
     */</span>
    <span class="token annotation punctuation">@Sensitive</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">SensitiveStrategy</span><span class="token punctuation">.</span><span class="token constant">BANK_CARD</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> bankCard<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div></details> <h4 id="自定义脱敏"><a href="#自定义脱敏" class="header-anchor">#</a> 自定义脱敏</h4> <p>脱敏仅保留头和位其他全部脱敏 , 脱敏 : <strong>181220323 =&gt; <code>1*****3</code></strong></p> <p><strong><code>SensitiveStrategy</code>类</strong></p> <p>追加脱敏方案 . 追加后在属性添加注解与 <code>DIY_DESENSITIZATION</code>类型标识即可</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * 自定义脱敏
 */</span>
<span class="token function">DIY_DESENSITIZATION</span><span class="token punctuation">(</span>str <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> len <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">&gt;=</span> <span class="token number">2</span><span class="token punctuation">)</span> str <span class="token operator">=</span> <span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> str<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="实现原理-2"><a href="#实现原理-2" class="header-anchor">#</a> 实现原理</h3> <p><strong>数据脱敏处理过程 :</strong></p> <ol><li><strong>首次序列化应用时 (SensitiveJsonSerializer#createContextual())</strong> <ol><li>回调获取注解信息 . 获取每个 <code>@JsonSerialize(using = SensitiveJsonSerializer.class)</code>注解 有关的属性</li> <li>判断有效 . 判断 <code>Sensitive</code>注解是否存在 且 注解指定的类型为脱敏类型</li> <li>设值 . 该注解是有效时设置该注解值为上下文处理 , 否则使用默认序列化</li></ol></li> <li><strong>序列化处理时 (SensitiveJsonSerializer#serialize())</strong> <ol><li>获取脱敏服务 . SensitiveService类 的Bean (目前服务仅有判断管理员脱敏处理)</li> <li>判断是否脱敏 . 脱敏服务存在且不是管理员 , 进行脱敏处理 , 否则跳过脱敏处理</li></ol></li></ol> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>脱敏服务仅做了管理员处理 , 其他业务自行增加</p></div> <h3 id="源码-2"><a href="#源码-2" class="header-anchor">#</a> 源码</h3> <table><thead><tr><th style="text-align:left;">类&amp;注解</th> <th style="text-align:left;">说明</th></tr></thead> <tbody><tr><td style="text-align:left;"><a href="#SensitiveJsonSerializer">SensitiveJsonSerializer</a></td> <td style="text-align:left;">脱敏序列化处理</td></tr> <tr><td style="text-align:left;"><a href="#SensitiveStrategy">SensitiveStrategy</a></td> <td style="text-align:left;">脱敏标识注解</td></tr> <tr><td style="text-align:left;"><a href="#SensitiveService">SensitiveService</a></td> <td style="text-align:left;">脱敏业务接口</td></tr> <tr><td style="text-align:left;"><a href="#SysSensitiveServiceImpl">SysSensitiveServiceImpl</a></td> <td style="text-align:left;">脱敏业务实现类</td></tr></tbody></table> <p><strong><code>SensitiveJsonSerializer</code>脱敏序列化处理</strong></p> <details class="custom-block details"><summary>点击展开</summary> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SensitiveJsonSerializer</span> <span class="token keyword">extends</span> <span class="token class-name">JsonSerializer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">ContextualSerializer</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">SensitiveStrategy</span> strategy<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">serialize</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">,</span> <span class="token class-name">JsonGenerator</span> gen<span class="token punctuation">,</span> <span class="token class-name">SerializerProvider</span> serializers<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">SensitiveService</span> sensitiveService <span class="token operator">=</span> <span class="token class-name">SpringUtils</span><span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">SensitiveService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">ObjectUtil</span><span class="token punctuation">.</span><span class="token function">isNotNull</span><span class="token punctuation">(</span>sensitiveService<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> sensitiveService<span class="token punctuation">.</span><span class="token function">isSensitive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                gen<span class="token punctuation">.</span><span class="token function">writeString</span><span class="token punctuation">(</span>strategy<span class="token punctuation">.</span><span class="token function">desensitizer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token comment">// 管理员跳过脱敏</span>
                gen<span class="token punctuation">.</span><span class="token function">writeString</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">BeansException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;脱敏实现不存在, 采用默认处理 =&gt; {}&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gen<span class="token punctuation">.</span><span class="token function">writeString</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">JsonSerializer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">createContextual</span><span class="token punctuation">(</span><span class="token class-name">SerializerProvider</span> prov<span class="token punctuation">,</span> <span class="token class-name">BeanProperty</span> property<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonMappingException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Sensitive</span> annotation <span class="token operator">=</span> property<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">Sensitive</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">nonNull</span><span class="token punctuation">(</span>annotation<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> property<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRawClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 根据注解赋予指定脱敏策略</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>strategy <span class="token operator">=</span> annotation<span class="token punctuation">.</span><span class="token function">strategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> prov<span class="token punctuation">.</span><span class="token function">findValueSerializer</span><span class="token punctuation">(</span>property<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> property<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></details> <p><strong><code>SensitiveStrategy</code>脱敏标识注解</strong></p> <details class="custom-block details"><summary>点击展开</summary> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">FIELD</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@JacksonAnnotationsInside</span>
<span class="token annotation punctuation">@JsonSerialize</span><span class="token punctuation">(</span>using <span class="token operator">=</span> <span class="token class-name">SensitiveJsonSerializer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Sensitive</span> <span class="token punctuation">{</span>
    <span class="token class-name">SensitiveStrategy</span> <span class="token function">strategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></details> <p><strong><code>SensitiveService</code>脱敏业务接口</strong></p> <details class="custom-block details"><summary>点击展开</summary> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SensitiveService</span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     * 是否脱敏
     */</span>
    <span class="token keyword">boolean</span> <span class="token function">isSensitive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div></details> <p><strong><code>SysSensitiveServiceImpl</code>脱敏业务实现类</strong></p> <details class="custom-block details"><summary>点击展开</summary> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SysSensitiveServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SensitiveService</span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     * 是否脱敏
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isSensitive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">!</span><span class="token class-name">LoginHelper</span><span class="token punctuation">.</span><span class="token function">isAdmin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div></details></div></div>  <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=ruoyi-vue-plus" title="标签">#ruoyi-vue-plus</a><a href="/tags/?tag=%E5%BA%8F%E5%88%97%E5%8C%96" title="标签">#序列化</a><a href="/tags/?tag=Jackson" title="标签">#Jackson</a></div> <!----></div> <div class="page-nav-wapper"><!----> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/ruoyi-vue-plus/15/" class="prev">ruoyi-vue-plus-推送功能</a></span> <span class="next"><a href="/ruoyi-vue-plus/17/">ruoyi-vue-plus-数据加密</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/ruoyi-vue-plus/17/"><div>
            ruoyi-vue-plus-数据加密
            <!----></div></a> <span class="date">05-01</span></dt></dl><dl><dd>02</dd> <dt><a href="/ruoyi-vue-plus/18/"><div>
            ruoyi-vue-plus-单元测试
            <!----></div></a> <span class="date">05-01</span></dt></dl><dl><dd>03</dd> <dt><a href="/ruoyi-vue-plus/97/"><div>
            ruoyi-vue-plus-工具篇
            <!----></div></a> <span class="date">04-21</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="Bozhu12" title="联系" target="_blank" class="iconfont icon-weixin"></a><a href="https://github.com/Bozhu12" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/user/home?id=448156561" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2024
    <span> | <a href="https://beian.miit.gov.cn/">桂ICP备2022009417号-1</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.d9970b58.js" defer></script><script src="/assets/js/2.b26d2d6f.js" defer></script><script src="/assets/js/116.e985fcfc.js" defer></script>
  </body>
</html>
